{"ast":null,"code":"var _jsxFileName = \"/Users/virginiamuruzabal/work/ditto/client/packages/shop/src/components/product-grid/product-list/product-list.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { NetworkStatus } from 'apollo-client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/button';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { SHOP_IMAGE_HOST } from 'utils/images-path';\nimport { useMedia } from 'utils/use-media';\nconst ErrorMessage = dynamic(() => import('components/error-message/error-message'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/error-message/error-message')],\n    modules: ['components/error-message/error-message']\n  }\n});\nconst QuickView = dynamic(() => import('features/quick-view/quick-view'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('features/quick-view/quick-view')],\n    modules: ['features/quick-view/quick-view']\n  }\n});\nconst GeneralCard = dynamic(() => import('components/product-card/product-card-one/product-card-one'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-one/product-card-one')],\n    modules: ['components/product-card/product-card-one/product-card-one']\n  }\n});\nconst OneLineCard = dynamic(() => import('components/product-card/product-card-six/product-card-six'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-six/product-card-six')],\n    modules: ['components/product-card/product-card-six/product-card-six']\n  }\n});\nconst BookCard = dynamic(() => import('components/product-card/product-card-two/product-card-two'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-two/product-card-two')],\n    modules: ['components/product-card/product-card-two/product-card-two']\n  }\n}); // const FurnitureCard = dynamic(\n//   import('components/product-card/product-card-three/product-card-three')\n// );\n// const MedicineCard = dynamic(\n//   import('components/product-card/product-card-five/product-card-five')\n// );\n\nexport const Products = ({\n  deviceType,\n  fetchLimit = 20,\n  loadMore = true,\n  type\n}) => {\n  var _data$products$items;\n\n  const router = useRouter();\n  const isMobile = useMedia('(max-width: 580px)');\n  const {\n    data,\n    error,\n    loading,\n    fetchMore,\n    networkStatus\n  } = useQuery(GET_PRODUCTS, {\n    variables: {\n      type: router.query.type,\n      text: router.query.text,\n      category: router.query.category,\n      offset: 0,\n      limit: fetchLimit\n    },\n    notifyOnNetworkStatusChange: true\n  });\n  const loadingMore = networkStatus === NetworkStatus.fetchMore; // Quick View Modal\n\n  const handleModalClose = () => {\n    const {\n      pathname,\n      query,\n      asPath\n    } = router;\n    const as = asPath;\n    router.push({\n      pathname,\n      query\n    }, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  const handleQuickViewModal = (modalProps, deviceType, onModalClose) => {\n    const {\n      pathname,\n      query\n    } = router;\n    const as = `/product/${modalProps.slug}`;\n\n    if (pathname === '/product/[slug]') {\n      router.push(pathname, as);\n      return;\n    }\n\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: {\n        modalProps,\n        deviceType,\n        onModalClose\n      },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0\n        }\n      }\n    });\n    router.push({\n      pathname,\n      query\n    }, {\n      pathname: as\n    }, {\n      shallow: true\n    });\n  };\n\n  if (error) return __jsx(ErrorMessage, {\n    message: error.message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  });\n\n  if (loading && !loadingMore) {\n    return __jsx(LoaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }\n    }, __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      uniqueKey: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      uniqueKey: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      uniqueKey: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  if (!data || !data.products || data.products.items.length === 0) {\n    return __jsx(NoResultFound, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit\n      },\n      updateQuery: (previousResult, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) {\n          return previousResult;\n        }\n\n        return {\n          products: {\n            __typename: previousResult.products.__typename,\n            items: [...previousResult.products.items, ...fetchMoreResult.products.items],\n            hasMore: fetchMoreResult.products.hasMore\n          }\n        };\n      }\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    switch (productType) {\n      // case 'book':\n      //   return (\n      //     <BookCard\n      //       title={props.title}\n      //       image={props.image}\n      //       name={props?.author?.name}\n      //       data={props}\n      //       deviceType={deviceType}\n      //       onClick={() =>\n      //         router.push('/product/[slug]', `/product/${props.slug}`)\n      //       }\n      //     />\n      //   );\n      // case 'medicine':\n      //   return (\n      //     <MedicineCard\n      //       title={props.name}\n      //       currency={CURRENCY}\n      //       image={SHOP_IMAGE_HOST+props.images[0]}\n      //       price={props.price}\n      //       weight={props.unit}\n      //       data={props}\n      //     />\n      //   );\n      // case 'furniture':\n      //   return (\n      //     <FurnitureCard\n      //       title={props.name}\n      //       image={SHOP_IMAGE_HOST+props.images[0]}\n      //       discountInPercent={props.discount_in_percent}\n      //       onClick={() =>\n      //         handleQuickViewModal(props, deviceType, handleModalClose)\n      //       }\n      //     />\n      //   );\n      default:\n        return __jsx(GeneralCard, {\n          title: props.name,\n          description: props.description,\n          image: SHOP_IMAGE_HOST + props.images[0],\n          weight: props.unit,\n          currency: CURRENCY,\n          price: props.price,\n          salePrice: props.sale_price,\n          discountInPercent: props.discount_in_percent,\n          data: props,\n          deviceType: deviceType,\n          onClick: () => router.push('/product/[slug]', `/product/${props.slug}`),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 11\n          }\n        });\n    }\n  };\n\n  const onlineProducts = (_data$products$items = data.products.items) === null || _data$products$items === void 0 ? void 0 : _data$products$items.filter(product => (product === null || product === void 0 ? void 0 : product.is_online) === true);\n  return __jsx(React.Fragment, null, __jsx(ProductsRow, {\n    style: {\n      display: isMobile ? 'block' : 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }\n  }, onlineProducts === null || onlineProducts === void 0 ? void 0 : onlineProducts.sort((a, b) => a.name.localeCompare(b.name)).map((item, index) => __jsx(ProductsCol, {\n    key: index,\n    style: isMobile ? {\n      maxWidth: '100%',\n      paddingRight: 1\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }, __jsx(ProductCardWrapper, {\n    style: isMobile ? {\n      display: 'block'\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, __jsx(Fade, {\n    duration: 800,\n    delay: index * 10,\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, renderCard(type, item)))))), loadMore && data.products.hasMore && __jsx(ButtonWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: handleLoadMore,\n    loading: loadingMore,\n    variant: \"secondary\",\n    style: {\n      fontSize: 14\n    },\n    border: \"1px solid #f1f1f1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"loadMoreButton\",\n    defaultMessage: \"Load More\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default Products;","map":{"version":3,"sources":["/Users/virginiamuruzabal/work/ditto/client/packages/shop/src/components/product-grid/product-list/product-list.tsx"],"names":["React","useRouter","dynamic","openModal","closeModal","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","NetworkStatus","Placeholder","Fade","NoResultFound","FormattedMessage","Button","GET_PRODUCTS","SHOP_IMAGE_HOST","useMedia","ErrorMessage","QuickView","GeneralCard","OneLineCard","BookCard","Products","deviceType","fetchLimit","loadMore","type","router","isMobile","data","error","loading","fetchMore","networkStatus","variables","query","text","category","offset","limit","notifyOnNetworkStatusChange","loadingMore","handleModalClose","pathname","asPath","as","push","shallow","handleQuickViewModal","modalProps","onModalClose","slug","show","overlayClassName","closeOnClickOutside","component","componentProps","closeComponent","config","enableResizing","disableDragging","className","width","y","height","transition","mass","tension","friction","message","products","items","length","handleLoadMore","Number","updateQuery","previousResult","fetchMoreResult","__typename","hasMore","renderCard","productType","props","name","description","images","unit","price","sale_price","discount_in_percent","onlineProducts","filter","product","is_online","display","sort","a","b","localeCompare","map","item","index","maxWidth","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { NetworkStatus } from 'apollo-client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/button';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { SHOP_IMAGE_HOST } from 'utils/images-path';\nimport { useMedia } from 'utils/use-media';\nconst ErrorMessage = dynamic(() =>\n  import('components/error-message/error-message')\n);\nconst QuickView = dynamic(() => import('features/quick-view/quick-view'));\nconst GeneralCard = dynamic(\n  import('components/product-card/product-card-one/product-card-one')\n);\nconst OneLineCard = dynamic(\n  import('components/product-card/product-card-six/product-card-six')\n);\nconst BookCard = dynamic(\n  import('components/product-card/product-card-two/product-card-two')\n);\n// const FurnitureCard = dynamic(\n//   import('components/product-card/product-card-three/product-card-three')\n// );\n// const MedicineCard = dynamic(\n//   import('components/product-card/product-card-five/product-card-five')\n// );\n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  fetchLimit?: number;\n  loadMore?: boolean;\n  type?: string;\n};\nexport const Products: React.FC<ProductsProps> = ({\n  deviceType,\n  fetchLimit = 20,\n  loadMore = true,\n  type,\n}) => {\n  const router = useRouter();\n  const isMobile = useMedia('(max-width: 580px)');\n  const { data, error, loading, fetchMore, networkStatus } = useQuery(\n    GET_PRODUCTS,\n    {\n      variables: {\n        type: router.query.type,\n        text: router.query.text,\n        category: router.query.category,\n        offset: 0,\n        limit: fetchLimit,\n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  );\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n\n  // Quick View Modal\n  const handleModalClose = () => {\n    const { pathname, query, asPath } = router;\n    const as = asPath;\n    router.push(\n      {\n        pathname,\n        query,\n      },\n      as,\n      {\n        shallow: true,\n      }\n    );\n    closeModal();\n  };\n\n  const handleQuickViewModal = (\n    modalProps: any,\n    deviceType: any,\n    onModalClose: any\n  ) => {\n    const { pathname, query } = router;\n    const as = `/product/${modalProps.slug}`;\n    if (pathname === '/product/[slug]') {\n      router.push(pathname, as);\n      return;\n    }\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: { modalProps, deviceType, onModalClose },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0,\n        },\n      },\n    });\n    router.push(\n      {\n        pathname,\n        query,\n      },\n      {\n        pathname: as,\n      },\n      {\n        shallow: true,\n      }\n    );\n  };\n  if (error) return <ErrorMessage message={error.message} />;\n  if (loading && !loadingMore) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"1\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"2\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"3\" />\n        </LoaderItem>\n      </LoaderWrapper>\n    );\n  }\n\n  if (!data || !data.products || data.products.items.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit,\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        if (!fetchMoreResult) {\n          return previousResult;\n        }\n        return {\n          products: {\n            __typename: previousResult.products.__typename,\n            items: [\n              ...previousResult.products.items,\n              ...fetchMoreResult.products.items,\n            ],\n            hasMore: fetchMoreResult.products.hasMore,\n          },\n        };\n      },\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    switch (productType) {\n      // case 'book':\n      //   return (\n      //     <BookCard\n      //       title={props.title}\n      //       image={props.image}\n      //       name={props?.author?.name}\n      //       data={props}\n      //       deviceType={deviceType}\n      //       onClick={() =>\n      //         router.push('/product/[slug]', `/product/${props.slug}`)\n      //       }\n      //     />\n      //   );\n      // case 'medicine':\n      //   return (\n      //     <MedicineCard\n      //       title={props.name}\n      //       currency={CURRENCY}\n      //       image={SHOP_IMAGE_HOST+props.images[0]}\n      //       price={props.price}\n      //       weight={props.unit}\n      //       data={props}\n      //     />\n      //   );\n      // case 'furniture':\n      //   return (\n      //     <FurnitureCard\n      //       title={props.name}\n      //       image={SHOP_IMAGE_HOST+props.images[0]}\n      //       discountInPercent={props.discount_in_percent}\n      //       onClick={() =>\n      //         handleQuickViewModal(props, deviceType, handleModalClose)\n      //       }\n      //     />\n      //   );\n      default:\n        return (\n          <GeneralCard\n            title={props.name}\n            description={props.description}\n            image={SHOP_IMAGE_HOST+props.images[0]}\n            weight={props.unit}\n            currency={CURRENCY}\n            price={props.price}\n            salePrice={props.sale_price}\n            discountInPercent={props.discount_in_percent}\n            data={props}\n            deviceType={deviceType}\n            onClick={() =>\n              router.push('/product/[slug]', `/product/${props.slug}`)\n            }\n          />\n        );\n    }\n  };\n\n  const onlineProducts = data.products.items?.filter((product) => product?.is_online === true)\n\n  return (\n    <>\n      <ProductsRow style={{ display: isMobile ? 'block' : 'flex' }}>\n        {onlineProducts?.sort((a, b) => a.name.localeCompare(b.name)).map((item: any, index: number) => (\n          <ProductsCol\n            key={index}\n            style={isMobile ? { maxWidth: '100%', paddingRight: 1 } : {}}\n          >\n            <ProductCardWrapper style={isMobile ? { display: 'block' } : {}}>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                {renderCard(type, item)}\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.products.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            loading={loadingMore}\n            variant=\"secondary\"\n            style={{\n              fontSize: 14,\n            }}\n            border=\"1px solid #f1f1f1\"\n          >\n            <FormattedMessage id=\"loadMoreButton\" defaultMessage=\"Load More\" />\n          </Button>\n        </ButtonWrapper>\n      )}\n    </>\n  );\n};\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}