{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/estebanmuruzabal/work/Mahdi-Fashion/client/packages/shop/src/layouts/header/menu/left-menu/left-menu.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { FormattedMessage } from 'react-intl';\nimport Popover from 'components/popover/popover';\nimport { useQuery } from '@apollo/react-hooks';\nimport Logo from 'layouts/logo/logo';\nimport { MenuDown } from 'assets/icons/MenuDown';\nimport { CATEGORY_MENU } from 'site-settings/site-navigation';\nimport { GET_TYPE } from 'graphql/query/type.query';\nimport ErrorMessage from 'components/error-message/error-message';\nimport * as categoryMenuIcons from 'assets/icons/category-menu-icons';\nimport { MainMenu, MenuItem, SelectedItem, Icon, Arrow, LeftMenuBox } from './left-menu.style';\n\nvar CategoryIcon = function CategoryIcon(_ref) {\n  var name = _ref.name;\n  var TagName = categoryMenuIcons[name];\n  return !!TagName ? __jsx(TagName, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 22\n    }\n  }) : __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 36\n    }\n  }, \" \");\n};\n\n_c = CategoryIcon;\n\nvar CategoryMenu = function CategoryMenu(props) {\n  _s();\n\n  var _useState = useState([]),\n      typeMenu = _useState[0],\n      setTypeMenu = _useState[1];\n\n  var handleOnClick = function handleOnClick(item) {\n    if (item.dynamic) {\n      Router.push('/[type]', \"\".concat(item.href));\n      props.onClick(item);\n      return;\n    }\n\n    Router.push(\"\".concat(item.href));\n    props.onClick(item);\n  };\n\n  useEffect(function () {\n    CATEGORY_MENU().then(function (res) {\n      setTypeMenu(res);\n    });\n    return;\n  }, []);\n  return __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, typeMenu.map(function (item) {\n    return __jsx(MenuItem, _extends({\n      key: item.id\n    }, props, {\n      onClick: function onClick() {\n        return handleOnClick(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }), __jsx(CategoryIcon, {\n      name: item.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }), __jsx(FormattedMessage, {\n      id: item.id,\n      defaultMessage: item.defaultMessage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }));\n  }));\n};\n\n_s(CategoryMenu, \"B/jbiVKWN9EeXSIR55ciyFmhYn0=\");\n\n_c2 = CategoryMenu;\nexport var LeftMenu = function LeftMenu(_ref2) {\n  _s2();\n\n  var logo = _ref2.logo;\n  var router = useRouter();\n\n  var _useQuery = useQuery(GET_TYPE, {\n    variables: {\n      searchText: ''\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  if (loading) {\n    return __jsx(ErrorMessage, {\n      message: 'Loading...',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 12\n      }\n    });\n  }\n\n  ;\n\n  if (error) {\n    return __jsx(ErrorMessage, {\n      message: error.message,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    });\n  }\n\n  ;\n  var typeMenu = data.types.items.map(function (item) {\n    return {\n      id: item.id,\n      href: \"/\".concat(item.slug),\n      defaultMessage: item.name,\n      icon: item.icon,\n      dynamic: true\n    };\n  });\n  var initialMenu = router.asPath == '/' ? typeMenu[1] : typeMenu.find(function (item) {\n    return item.href == router.asPath;\n  });\n\n  if (initialMenu) {\n    if (localStorage.getItem('myMenu')) {\n      localStorage.removeItem('myMenu');\n    }\n\n    localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n  }\n\n  var _React$useState = React.useState(typeMenu.find(function (item) {\n    return item.href == router.asPath;\n  })),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeMenu = _React$useState2[0],\n      setActiveMenu = _React$useState2[1];\n\n  return __jsx(LeftMenuBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, __jsx(Logo, {\n    imageUrl: logo,\n    alt: 'Shop Logo',\n    onClick: initialMenu ? initialMenu : JSON.parse(localStorage.getItem('myMenu')),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }), __jsx(MainMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, __jsx(Popover, {\n    className: \"right\",\n    handler: __jsx(SelectedItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, __jsx(Icon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, __jsx(CategoryIcon, {\n      name: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    })), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, __jsx(FormattedMessage, {\n      id: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.id,\n      defaultMessage: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.defaultMessage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }))), __jsx(Arrow, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, __jsx(MenuDown, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }))),\n    content: __jsx(CategoryMenu, {\n      onClick: setActiveMenu,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 20\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })));\n}; // import React, { useState, useEffect } from 'react';\n// import Router, { useRouter } from 'next/router';\n// import { FormattedMessage } from 'react-intl';\n// import Popover from 'components/popover/popover';\n// import { useQuery } from '@apollo/react-hooks';\n// import Logo from 'layouts/logo/logo';\n// import { MenuDown } from 'assets/icons/MenuDown';\n// import { CATEGORY_MENU_ITEMS,CATEGORY_MENU } from 'site-settings/site-navigation';\n// import { GET_TYPE } from 'graphql/query/type.query';\n// import ErrorMessage from 'components/error-message/error-message';\n// import * as categoryMenuIcons from 'assets/icons/category-menu-icons';\n// import {\n//   MainMenu,\n//   MenuItem,\n//   SelectedItem,\n//   Icon,\n//   Arrow,\n//   LeftMenuBox,\n// } from './left-menu.style';\n// const CategoryIcon = ({ name }) => {\n//   const TagName = categoryMenuIcons[name];\n//   return !!TagName ? <TagName /> : <p> </p>;\n// };\n// const CategoryMenu = (props: any) => {\n//   const [typeMenu, setTypeMenu] = useState([]);\n//   const handleOnClick = (item) => {\n//     if (item.dynamic) {\n//       Router.push('/[type]', `${item.href}`);\n//       props.onClick(item);\n//       return;\n//     }\n//     Router.push(`${item.href}`);\n//     props.onClick(item);\n//   };\n//   useEffect(() => {\n//     CATEGORY_MENU().then((res) => {\n//       setTypeMenu(res);\n//     })\n//     return;\n//   }, []);\n//   return (\n//     <div style={{ display: 'flex', flexDirection: 'column' }}>\n//       {typeMenu.map((item) => {\n//         return(\n//         <MenuItem key={item.id} {...props} onClick={() => handleOnClick(item)}>\n//           <CategoryIcon name={item.icon} />\n//           <FormattedMessage id={item.id} defaultMessage={item.defaultMessage} />\n//         </MenuItem>\n//       )})}\n//     </div>\n//   );\n// };\n// type Props = {\n//   logo: string;\n// };\n// export const LeftMenu: React.FC<Props> = ({ logo }) => {\n//   const router = useRouter();\n//   const { data, error, loading } = useQuery(\n//     GET_TYPE,\n//     {\n//       variables: {\n//         searchText: ''\n//       }\n//     }\n//   );\n//   if (loading) {\n//     return <ErrorMessage message={'Loading...'} />\n//   };\n//   if (error) {\n//     return (\n//       <ErrorMessage message={error.message} />\n//     );\n//   };\n//   const typeMenu = data.types.items.map((item) => {\n//     return({\n//       id: item.id,\n//       href: `/${item.slug}`,\n//       defaultMessage: item.name,\n//       icon: item.icon,\n//       dynamic: true,\n//     })\n//   })\n//   const initialMenu = router.asPath == '/' ? typeMenu[0] : typeMenu.find((item) => item.href == router.asPath);\n//   if(initialMenu){\n//     if(localStorage.getItem('myMenu')){\n//       localStorage.removeItem('myMenu');\n//     }\n//     localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n//   }\n//   const [activeMenu, setActiveMenu] = React.useState(\n//     initialMenu ?? JSON.parse(localStorage.getItem('myMenu'))\n//   );\n//   return(\n//     <LeftMenuBox>\n//       <Logo\n//         imageUrl={logo}\n//         alt={'Shop Logo'}\n//         onClick={initialMenu ? initialMenu: JSON.parse(localStorage.getItem('myMenu'))}\n//       />\n//       <MainMenu>\n//         <Popover\n//           className=\"right\"\n//           handler={\n//             <SelectedItem>\n//               <span>\n//                 <Icon>\n//                   <CategoryIcon name={activeMenu?.icon} />\n//                 </Icon>\n//                 <span>\n//                   <FormattedMessage\n//                     id={activeMenu?.id}\n//                     defaultMessage={activeMenu?.defaultMessage}\n//                   />\n//                 </span>\n//               </span>\n//               <Arrow>\n//                 <MenuDown />\n//               </Arrow>\n//             </SelectedItem>\n//           }\n//           content={<CategoryMenu onClick={setActiveMenu} />}\n//         />\n//       </MainMenu>\n//     </LeftMenuBox>\n//   );\n// };\n\n_s2(LeftMenu, \"mk4tbty+Pp+6HqLF6cxKmVYO16k=\", false, function () {\n  return [useRouter, useQuery];\n});\n\n_c3 = LeftMenu;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"CategoryIcon\");\n$RefreshReg$(_c2, \"CategoryMenu\");\n$RefreshReg$(_c3, \"LeftMenu\");","map":{"version":3,"sources":["/Users/estebanmuruzabal/work/Mahdi-Fashion/client/packages/shop/src/layouts/header/menu/left-menu/left-menu.tsx"],"names":["React","useState","useEffect","Router","useRouter","FormattedMessage","Popover","useQuery","Logo","MenuDown","CATEGORY_MENU","GET_TYPE","ErrorMessage","categoryMenuIcons","MainMenu","MenuItem","SelectedItem","Icon","Arrow","LeftMenuBox","CategoryIcon","name","TagName","CategoryMenu","props","typeMenu","setTypeMenu","handleOnClick","item","dynamic","push","href","onClick","then","res","display","flexDirection","map","id","icon","defaultMessage","LeftMenu","logo","router","variables","searchText","data","error","loading","message","types","items","slug","initialMenu","asPath","find","localStorage","getItem","removeItem","setItem","JSON","stringify","activeMenu","setActiveMenu","parse"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { FormattedMessage } from 'react-intl';\nimport Popover from 'components/popover/popover';\nimport { useQuery } from '@apollo/react-hooks';\nimport Logo from 'layouts/logo/logo';\nimport { MenuDown } from 'assets/icons/MenuDown';\nimport { CATEGORY_MENU_ITEMS,CATEGORY_MENU } from 'site-settings/site-navigation';\nimport { GET_TYPE } from 'graphql/query/type.query';\nimport ErrorMessage from 'components/error-message/error-message';\nimport * as categoryMenuIcons from 'assets/icons/category-menu-icons';\nimport {\n  MainMenu,\n  MenuItem,\n  SelectedItem,\n  Icon,\n  Arrow,\n  LeftMenuBox,\n} from './left-menu.style';\n\nconst CategoryIcon = ({ name }) => {\n  const TagName = categoryMenuIcons[name];\n  return !!TagName ? <TagName /> : <p> </p>;\n};\n\nconst CategoryMenu = (props: any) => {\n\n  const [typeMenu, setTypeMenu] = useState([]);\n\n  const handleOnClick = (item) => {\n    if (item.dynamic) {\n      Router.push('/[type]', `${item.href}`);\n      props.onClick(item);\n      return;\n    }\n    Router.push(`${item.href}`);\n    props.onClick(item);\n  };\n\n  useEffect(() => {\n    CATEGORY_MENU().then((res) => {\n      setTypeMenu(res);\n    })\n    return;\n  }, []);\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\n      {typeMenu.map((item) => {\n        return(\n        <MenuItem key={item.id} {...props} onClick={() => handleOnClick(item)}>\n          <CategoryIcon name={item.icon} />\n          <FormattedMessage id={item.id} defaultMessage={item.defaultMessage} />\n        </MenuItem>\n      )})}\n    </div>\n  );\n};\n\ntype Props = {\n  logo: string;\n};\n\nexport const LeftMenu: React.FC<Props> = ({ logo }) => {\n  const router = useRouter();\n  const { data, error, loading } = useQuery(\n    GET_TYPE,\n    {\n      variables: {\n        searchText: ''\n      }\n    }\n  );\n  if (loading) {\n    return <ErrorMessage message={'Loading...'} />\n  };\n\n  if (error) {\n    return (\n      <ErrorMessage message={error.message} />\n    );\n  };\n  const typeMenu = data.types.items.map((item) => {\n    return({\n      id: item.id,\n      href: `/${item.slug}`,\n      defaultMessage: item.name,\n      icon: item.icon,\n      dynamic: true,\n    })\n  })\n  \n  const initialMenu = router.asPath == '/' ? typeMenu[1] : typeMenu.find((item) => item.href == router.asPath);\n  \n  if(initialMenu){\n    if(localStorage.getItem('myMenu')){\n      localStorage.removeItem('myMenu');\n    }\n    localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n  }\n\n  const [activeMenu, setActiveMenu] = React.useState(\n    typeMenu.find((item) => item.href == router.asPath)\n  );\n\n  return(\n    <LeftMenuBox>\n      <Logo\n        imageUrl={logo}\n        alt={'Shop Logo'}\n        onClick={initialMenu ? initialMenu: JSON.parse(localStorage.getItem('myMenu'))}\n      />\n      <MainMenu>\n        <Popover\n          className=\"right\"\n          handler={\n            <SelectedItem>\n              <span>\n                <Icon>\n                  <CategoryIcon name={activeMenu?.icon} />\n                </Icon>\n                <span>\n                  <FormattedMessage\n                    id={activeMenu?.id}\n                    defaultMessage={activeMenu?.defaultMessage}\n                  />\n                </span>\n              </span>\n              <Arrow>\n                <MenuDown />\n              </Arrow>\n            </SelectedItem>\n          }\n          content={<CategoryMenu onClick={setActiveMenu} />}\n        />\n      </MainMenu>\n    </LeftMenuBox>\n  );\n};\n\n\n\n// import React, { useState, useEffect } from 'react';\n// import Router, { useRouter } from 'next/router';\n// import { FormattedMessage } from 'react-intl';\n// import Popover from 'components/popover/popover';\n// import { useQuery } from '@apollo/react-hooks';\n// import Logo from 'layouts/logo/logo';\n// import { MenuDown } from 'assets/icons/MenuDown';\n// import { CATEGORY_MENU_ITEMS,CATEGORY_MENU } from 'site-settings/site-navigation';\n// import { GET_TYPE } from 'graphql/query/type.query';\n// import ErrorMessage from 'components/error-message/error-message';\n// import * as categoryMenuIcons from 'assets/icons/category-menu-icons';\n// import {\n//   MainMenu,\n//   MenuItem,\n//   SelectedItem,\n//   Icon,\n//   Arrow,\n//   LeftMenuBox,\n// } from './left-menu.style';\n\n// const CategoryIcon = ({ name }) => {\n//   const TagName = categoryMenuIcons[name];\n//   return !!TagName ? <TagName /> : <p> </p>;\n// };\n\n// const CategoryMenu = (props: any) => {\n\n//   const [typeMenu, setTypeMenu] = useState([]);\n\n//   const handleOnClick = (item) => {\n//     if (item.dynamic) {\n//       Router.push('/[type]', `${item.href}`);\n//       props.onClick(item);\n//       return;\n//     }\n//     Router.push(`${item.href}`);\n//     props.onClick(item);\n//   };\n\n//   useEffect(() => {\n//     CATEGORY_MENU().then((res) => {\n//       setTypeMenu(res);\n//     })\n//     return;\n//   }, []);\n\n//   return (\n//     <div style={{ display: 'flex', flexDirection: 'column' }}>\n//       {typeMenu.map((item) => {\n//         return(\n//         <MenuItem key={item.id} {...props} onClick={() => handleOnClick(item)}>\n//           <CategoryIcon name={item.icon} />\n//           <FormattedMessage id={item.id} defaultMessage={item.defaultMessage} />\n//         </MenuItem>\n//       )})}\n//     </div>\n//   );\n// };\n\n// type Props = {\n//   logo: string;\n// };\n\n// export const LeftMenu: React.FC<Props> = ({ logo }) => {\n//   const router = useRouter();\n//   const { data, error, loading } = useQuery(\n//     GET_TYPE,\n//     {\n//       variables: {\n//         searchText: ''\n//       }\n//     }\n//   );\n//   if (loading) {\n//     return <ErrorMessage message={'Loading...'} />\n//   };\n\n//   if (error) {\n//     return (\n//       <ErrorMessage message={error.message} />\n//     );\n//   };\n//   const typeMenu = data.types.items.map((item) => {\n//     return({\n//       id: item.id,\n//       href: `/${item.slug}`,\n//       defaultMessage: item.name,\n//       icon: item.icon,\n//       dynamic: true,\n//     })\n//   })\n//   const initialMenu = router.asPath == '/' ? typeMenu[0] : typeMenu.find((item) => item.href == router.asPath);\n//   if(initialMenu){\n//     if(localStorage.getItem('myMenu')){\n//       localStorage.removeItem('myMenu');\n//     }\n//     localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n//   }\n\n//   const [activeMenu, setActiveMenu] = React.useState(\n//     initialMenu ?? JSON.parse(localStorage.getItem('myMenu'))\n//   );\n  \n//   return(\n//     <LeftMenuBox>\n//       <Logo\n//         imageUrl={logo}\n//         alt={'Shop Logo'}\n//         onClick={initialMenu ? initialMenu: JSON.parse(localStorage.getItem('myMenu'))}\n//       />\n//       <MainMenu>\n//         <Popover\n//           className=\"right\"\n//           handler={\n//             <SelectedItem>\n//               <span>\n//                 <Icon>\n//                   <CategoryIcon name={activeMenu?.icon} />\n//                 </Icon>\n//                 <span>\n//                   <FormattedMessage\n//                     id={activeMenu?.id}\n//                     defaultMessage={activeMenu?.defaultMessage}\n//                   />\n//                 </span>\n//               </span>\n//               <Arrow>\n//                 <MenuDown />\n//               </Arrow>\n//             </SelectedItem>\n//           }\n//           content={<CategoryMenu onClick={setActiveMenu} />}\n//         />\n//       </MainMenu>\n//     </LeftMenuBox>\n//   );\n// };\n"]},"metadata":{},"sourceType":"module"}