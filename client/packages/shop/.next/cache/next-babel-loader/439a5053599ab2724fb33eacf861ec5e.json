{"ast":null,"code":"var _jsxFileName = \"/Users/virginiamuruzabal/work/ditto/client/packages/shop/src/components/product-card/product-card-one/product-card-one.tsx\";\nvar __jsx = React.createElement;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// product card for general\nimport React, { useState } from 'react';\nimport Image from 'components/image/image';\nimport { Button } from 'components/button/button';\nimport { ProductCardWrapper, ProductImageWrapper, ProductInfo, DiscountPercent, OutOfStock, ButtonText, PriceContainer, PriceContainerRow, ProductCartBtn, ProductCartWrapper, ProductPrice, ProductPriceWrapper, SalePrice } from '../product-card.style';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { Counter } from 'components/counter/counter';\nimport { cartAnimation } from 'utils/cart-animation';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { isMobile } from 'react-device-detect';\nimport { ProductQuantityExceededMsg } from '../product-card.style';\nimport { CURRENCY } from 'utils/constant';\n\nconst ProductCard = (_ref) => {\n  var _getItem9, _getItem10;\n\n  let {\n    title,\n    image,\n    weight,\n    price,\n    salePrice,\n    discountInPercent,\n    cartProducts,\n    addToCart,\n    updateCart,\n    value,\n    currency,\n    onChange,\n    increment,\n    decrement,\n    data,\n    deviceType,\n    onClick\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"title\", \"image\", \"weight\", \"price\", \"salePrice\", \"discountInPercent\", \"cartProducts\", \"addToCart\", \"updateCart\", \"value\", \"currency\", \"onChange\", \"increment\", \"decrement\", \"data\", \"deviceType\", \"onClick\"]);\n\n  const {\n    addItem,\n    removeItem,\n    getItem,\n    isInCart,\n    items,\n    removeRecicledItemHandler,\n    addRecicledItemHandler,\n    removeItemFromCart\n  } = useCart();\n  const {\n    0: showProductQuantityExceededMsg,\n    1: setShowProductQuantityExceededMsg\n  } = useState(false);\n  const hasEcoButton = data.packagePrice > 0;\n  const intl = useIntl();\n\n  const handleAddClick = e => {\n    var _getItem, _getItem2;\n\n    const currentQuantity = (((_getItem = getItem(data.id)) === null || _getItem === void 0 ? void 0 : _getItem.quantity) || 0) + (((_getItem2 = getItem(data.id)) === null || _getItem2 === void 0 ? void 0 : _getItem2.recicledQuantity) || 0);\n    const stock = data.product_quantity;\n\n    if (stock <= currentQuantity) {\n      e.stopPropagation();\n      showProductQuantityExceededMsgFor5Sec();\n    } else {\n      e.stopPropagation();\n      addItem(data);\n\n      if (!isInCart(data.id)) {\n        cartAnimation(e);\n      }\n    }\n  };\n\n  const handleRecicledAddClick = e => {\n    var _getItem3, _getItem4;\n\n    const currentQuantity = (((_getItem3 = getItem(data.id)) === null || _getItem3 === void 0 ? void 0 : _getItem3.quantity) || 0) + (((_getItem4 = getItem(data.id)) === null || _getItem4 === void 0 ? void 0 : _getItem4.recicledQuantity) || 0);\n    const stock = data.product_quantity;\n\n    if (stock <= currentQuantity) {\n      e.stopPropagation();\n      showProductQuantityExceededMsgFor5Sec();\n    } else {\n      e.stopPropagation();\n      addRecicledItemHandler(data);\n    }\n  };\n\n  const handleRecicledRemoveClick = e => {\n    var _getItem5, _getItem6;\n\n    const recicledQuantity = ((_getItem5 = getItem(data.id)) === null || _getItem5 === void 0 ? void 0 : _getItem5.recicledQuantity) || 0;\n    const quantity = ((_getItem6 = getItem(data.id)) === null || _getItem6 === void 0 ? void 0 : _getItem6.quantity) || 0;\n    e.stopPropagation();\n    quantity === 0 && recicledQuantity === 1 ? removeItemFromCart(data) : removeRecicledItemHandler(data);\n  };\n\n  const handleRemoveClick = e => {\n    var _getItem7, _getItem8;\n\n    const recicledQuantity = ((_getItem7 = getItem(data.id)) === null || _getItem7 === void 0 ? void 0 : _getItem7.recicledQuantity) || 0;\n    const quantity = ((_getItem8 = getItem(data.id)) === null || _getItem8 === void 0 ? void 0 : _getItem8.quantity) || 0;\n    e.stopPropagation();\n    quantity === 1 && recicledQuantity === 0 ? removeItemFromCart(data) : removeItem(data);\n  };\n\n  const showProductQuantityExceededMsgFor5Sec = () => {\n    setShowProductQuantityExceededMsg(true);\n    setTimeout(() => {\n      setShowProductQuantityExceededMsg(false);\n    }, 1500);\n  };\n\n  const PriceContent = () => __jsx(React.Fragment, null, data.product_quantity != 0 ? __jsx(ProductCartWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 38\n    }\n  }, __jsx(ProductCartBtn, {\n    style: {\n      display: 'flex',\n      marginTop: '-10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, __jsx(PriceContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, __jsx(PriceContainerRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, __jsx(ProductPriceWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, data.discountInPercent ? __jsx(SalePrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 46\n    }\n  }, CURRENCY, \" \", data.sale_price) : null, __jsx(ProductPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, CURRENCY, finalPrice)), noRecicledQuantityInCart ? __jsx(React.Fragment, null, __jsx(Counter, {\n    value: getItem(data.id).quantity,\n    onDecrement: handleRemoveClick,\n    onIncrement: handleAddClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  })) : __jsx(Button, {\n    className: \"cart-button\",\n    variant: \"secondary\",\n    borderradius: 100,\n    onClick: handleAddClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, __jsx(ButtonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"addToCartButton\",\n    defaultMessage: \"Cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 23\n    }\n  })))), hasEcoButton ? __jsx(PriceContainerRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, __jsx(ProductPriceWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, __jsx(ProductPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, \" \", CURRENCY, \" \", Number(finalPrice - data.packagePrice))), reclicledQuantityInCart ? __jsx(React.Fragment, null, __jsx(Counter, {\n    value: reclicledQuantityInCart,\n    onDecrement: handleRecicledRemoveClick,\n    onIncrement: handleRecicledAddClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  })) : __jsx(Button, {\n    className: \"cart-button\",\n    variant: \"secondary\",\n    borderRadius: 100,\n    onClick: handleRecicledAddClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, __jsx(ButtonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"addEcoToCartButton\",\n    defaultMessage: \"Cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 23\n    }\n  })))) : null))) : __jsx(ProductCartWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 10\n    }\n  }, __jsx(ProductPriceWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, data.discountInPercent ? __jsx(SalePrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 40\n    }\n  }, CURRENCY, \" \", data.sale_price) : null, __jsx(ProductPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, CURRENCY, finalPrice))), showProductQuantityExceededMsg && __jsx(ProductQuantityExceededMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"productStockLimit\",\n    defaultMessage: \"There is no more availability of this product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  })), hasEcoButton && data.product_quantity != 0 && __jsx(\"span\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      margin: '0px -10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, \"*\", __jsx(\"p\", {\n    className: \"eco-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 12\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"ecoDescription\",\n    defaultMessage: \"Eco purchase: you pay ${packageDiscount} if you have a package from us to returned.\",\n    values: {\n      packageDiscount: data.packagePrice\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }))));\n\n  const finalPrice = salePrice ? salePrice : price;\n  const noRecicledQuantityInCart = (_getItem9 = getItem(data.id)) === null || _getItem9 === void 0 ? void 0 : _getItem9.quantity;\n  const reclicledQuantityInCart = (_getItem10 = getItem(data.id)) === null || _getItem10 === void 0 ? void 0 : _getItem10.recicledQuantity;\n  return __jsx(ProductCardWrapper, {\n    onClick: onClick,\n    className: \"product-card\",\n    style: isMobile ? {\n      display: 'flex'\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, __jsx(ProductImageWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, __jsx(Image, {\n    url: image,\n    className: \"product-image\",\n    style: {\n      position: 'relative'\n    },\n    alt: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }), discountInPercent ? __jsx(React.Fragment, null, __jsx(DiscountPercent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, discountInPercent, \"%\")) : '', data.product_quantity == 0 ? __jsx(React.Fragment, null, __jsx(OutOfStock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, intl.formatMessage({\n    id: 'outOfStock',\n    defaultMessage: 'Out of stock'\n  }))) : ''), __jsx(ProductInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }, __jsx(\"h3\", {\n    className: \"product-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }\n  }, title), __jsx(PriceContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default ProductCard;","map":{"version":3,"sources":["/Users/virginiamuruzabal/work/ditto/client/packages/shop/src/components/product-card/product-card-one/product-card-one.tsx"],"names":["React","useState","Image","Button","ProductCardWrapper","ProductImageWrapper","ProductInfo","DiscountPercent","OutOfStock","ButtonText","PriceContainer","PriceContainerRow","ProductCartBtn","ProductCartWrapper","ProductPrice","ProductPriceWrapper","SalePrice","useCart","Counter","cartAnimation","FormattedMessage","useIntl","isMobile","ProductQuantityExceededMsg","CURRENCY","ProductCard","title","image","weight","price","salePrice","discountInPercent","cartProducts","addToCart","updateCart","value","currency","onChange","increment","decrement","data","deviceType","onClick","props","addItem","removeItem","getItem","isInCart","items","removeRecicledItemHandler","addRecicledItemHandler","removeItemFromCart","showProductQuantityExceededMsg","setShowProductQuantityExceededMsg","hasEcoButton","packagePrice","intl","handleAddClick","e","currentQuantity","id","quantity","recicledQuantity","stock","product_quantity","stopPropagation","showProductQuantityExceededMsgFor5Sec","handleRecicledAddClick","handleRecicledRemoveClick","handleRemoveClick","setTimeout","PriceContent","display","marginTop","sale_price","finalPrice","noRecicledQuantityInCart","Number","reclicledQuantityInCart","flexDirection","margin","packageDiscount","position","formatMessage","defaultMessage"],"mappings":";;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SACEC,kBADF,EAEEC,mBAFF,EAGEC,WAHF,EAIEC,eAJF,EAKEC,UALF,EAMEC,UANF,EAOEC,cAPF,EAQEC,iBARF,EASEC,cATF,EAUEC,kBAVF,EAWEC,YAXF,EAYEC,mBAZF,EAaEC,SAbF,QAcO,uBAdP;AAeA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,OAAT,QAAwB,4BAAxB;AACA,SAASC,aAAT,QAA8B,sBAA9B;AACA,SAASC,gBAAT,EAA2BC,OAA3B,QAA0C,YAA1C;AACA,SAASC,QAAT,QAAyB,qBAAzB;AAEA,SAASC,0BAAT,QAA2C,uBAA3C;AAEA,SAASC,QAAT,QAAyB,gBAAzB;;AAuBA,MAAMC,WAAuC,GAAG,UAmB1C;AAAA;;AAAA,MAnB2C;AAC/CC,IAAAA,KAD+C;AAE/CC,IAAAA,KAF+C;AAG/CC,IAAAA,MAH+C;AAI/CC,IAAAA,KAJ+C;AAK/CC,IAAAA,SAL+C;AAM/CC,IAAAA,iBAN+C;AAO/CC,IAAAA,YAP+C;AAQ/CC,IAAAA,SAR+C;AAS/CC,IAAAA,UAT+C;AAU/CC,IAAAA,KAV+C;AAW/CC,IAAAA,QAX+C;AAY/CC,IAAAA,QAZ+C;AAa/CC,IAAAA,SAb+C;AAc/CC,IAAAA,SAd+C;AAe/CC,IAAAA,IAf+C;AAgB/CC,IAAAA,UAhB+C;AAiB/CC,IAAAA;AAjB+C,GAmB3C;AAAA,MADDC,KACC;;AACJ,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,UAAX;AAAuBC,IAAAA,OAAvB;AAAgCC,IAAAA,QAAhC;AAA0CC,IAAAA,KAA1C;AAAiDC,IAAAA,yBAAjD;AAA4EC,IAAAA,sBAA5E;AAAoGC,IAAAA;AAApG,MAA2HlC,OAAO,EAAxI;AACA,QAAM;AAAA,OAACmC,8BAAD;AAAA,OAAiCC;AAAjC,MAAsEpD,QAAQ,CAAC,KAAD,CAApF;AACA,QAAMqD,YAAY,GAAGd,IAAI,CAACe,YAAL,GAAoB,CAAzC;AACA,QAAMC,IAAI,GAAGnC,OAAO,EAApB;;AAEA,QAAMoC,cAAc,GAAIC,CAAD,IAAO;AAAA;;AAC5B,UAAMC,eAAe,GAAG,CAAC,aAAAb,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,sDAAkBC,QAAlB,KAA8B,CAA/B,KAAqC,cAAAf,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBE,gBAAlB,KAAsC,CAA3E,CAAxB;AACA,UAAMC,KAAK,GAAGvB,IAAI,CAACwB,gBAAnB;;AACA,QAAID,KAAK,IAAIJ,eAAb,EAA8B;AAC5BD,MAAAA,CAAC,CAACO,eAAF;AACAC,MAAAA,qCAAqC;AACtC,KAHD,MAGO;AACLR,MAAAA,CAAC,CAACO,eAAF;AACArB,MAAAA,OAAO,CAACJ,IAAD,CAAP;;AACA,UAAI,CAACO,QAAQ,CAACP,IAAI,CAACoB,EAAN,CAAb,EAAwB;AACtBzC,QAAAA,aAAa,CAACuC,CAAD,CAAb;AACD;AACF;AACF,GAbD;;AAeA,QAAMS,sBAAsB,GAAIT,CAAD,IAAO;AAAA;;AACpC,UAAMC,eAAe,GAAG,CAAC,cAAAb,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBC,QAAlB,KAA8B,CAA/B,KAAqC,cAAAf,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBE,gBAAlB,KAAsC,CAA3E,CAAxB;AACA,UAAMC,KAAK,GAAGvB,IAAI,CAACwB,gBAAnB;;AACA,QAAID,KAAK,IAAIJ,eAAb,EAA8B;AAC5BD,MAAAA,CAAC,CAACO,eAAF;AACAC,MAAAA,qCAAqC;AACtC,KAHD,MAGO;AACLR,MAAAA,CAAC,CAACO,eAAF;AACAf,MAAAA,sBAAsB,CAACV,IAAD,CAAtB;AACD;AACF,GAVD;;AAWA,QAAM4B,yBAAyB,GAAIV,CAAD,IAAO;AAAA;;AACvC,UAAMI,gBAAgB,GAAG,cAAAhB,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBE,gBAAlB,KAAsC,CAA/D;AACA,UAAMD,QAAQ,GAAG,cAAAf,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBC,QAAlB,KAA8B,CAA/C;AACAH,IAAAA,CAAC,CAACO,eAAF;AACAJ,IAAAA,QAAQ,KAAK,CAAb,IAAkBC,gBAAgB,KAAK,CAAvC,GAA2CX,kBAAkB,CAACX,IAAD,CAA7D,GAAsES,yBAAyB,CAACT,IAAD,CAA/F;AACD,GALD;;AAOA,QAAM6B,iBAAiB,GAAIX,CAAD,IAAO;AAAA;;AAC/B,UAAMI,gBAAgB,GAAG,cAAAhB,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBE,gBAAlB,KAAsC,CAA/D;AACA,UAAMD,QAAQ,GAAG,cAAAf,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,wDAAkBC,QAAlB,KAA8B,CAA/C;AACAH,IAAAA,CAAC,CAACO,eAAF;AACAJ,IAAAA,QAAQ,KAAK,CAAb,IAAkBC,gBAAgB,KAAK,CAAvC,GAA2CX,kBAAkB,CAACX,IAAD,CAA7D,GAAsEK,UAAU,CAACL,IAAD,CAAhF;AACD,GALD;;AAOA,QAAM0B,qCAAqC,GAAG,MAAM;AAClDb,IAAAA,iCAAiC,CAAC,IAAD,CAAjC;AACAiB,IAAAA,UAAU,CAAC,MAAM;AACfjB,MAAAA,iCAAiC,CAAC,KAAD,CAAjC;AACD,KAFS,EAEP,IAFO,CAAV;AAGD,GALD;;AAOA,QAAMkB,YAAY,GAAG,MACnB,4BACG/B,IAAI,CAACwB,gBAAL,IAAyB,CAAzB,GAA8B,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAC7B,MAAC,cAAD;AAAgB,IAAA,KAAK,EAAE;AAAEQ,MAAAA,OAAO,EAAE,MAAX;AAAkBC,MAAAA,SAAS,EAAE;AAA7B,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjC,IAAI,CAACT,iBAAL,GAA0B,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYP,QAAZ,OAAuBgB,IAAI,CAACkC,UAA5B,CAA1B,GAAiF,IADpF,EAEE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlD,QADH,EAEGmD,UAFH,CAFF,CADF,EAQIC,wBAAwB,GACxB,4BACE,MAAC,OAAD;AACI,IAAA,KAAK,EAAE9B,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAP,CAAiBC,QAD5B;AAEI,IAAA,WAAW,EAAEQ,iBAFjB;AAGI,IAAA,WAAW,EAAEZ,cAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADwB,GASxB,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,aAAlB;AAAgC,IAAA,OAAO,EAAC,WAAxC;AAAoD,IAAA,YAAY,EAAE,GAAlE;AAAuE,IAAA,OAAO,EAAEA,cAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAE,iBAAtB;AAAyC,IAAA,cAAc,EAAC,MAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAjBJ,CADF,EAyBIH,YAAY,GACZ,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAgB9B,QAAhB,OAA2BqD,MAAM,CAACF,UAAU,GAAGnC,IAAI,CAACe,YAAnB,CAAjC,CADF,CADF,EAIIuB,uBAAuB,GACzB,4BACE,MAAC,OAAD;AACI,IAAA,KAAK,EAAEA,uBADX;AAEI,IAAA,WAAW,EAAEV,yBAFjB;AAGI,IAAA,WAAW,EAAED,sBAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADyB,GASzB,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,aAAlB;AAAgC,IAAA,OAAO,EAAC,WAAxC;AAAoD,IAAA,YAAY,EAAE,GAAlE;AAAuE,IAAA,OAAO,EAAEA,sBAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,oBAArB;AAA0C,IAAA,cAAc,EAAC,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAbF,CADY,GAqBP,IA9CT,CADJ,CAD6B,CAA9B,GAyDE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACD,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK3B,IAAI,CAACT,iBAAL,GAA0B,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYP,QAAZ,OAAuBgB,IAAI,CAACkC,UAA5B,CAA1B,GAAiF,IADtF,EAEI,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlD,QADH,EAEGmD,UAFH,CAFJ,CADC,CA1DL,EAoEIvB,8BAA8B,IAC9B,MAAC,0BAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,mBAArB;AAAyC,IAAA,cAAc,EAAC,+CAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CArEJ,EAyEIE,YAAY,IAAId,IAAI,CAACwB,gBAAL,IAAyB,CAAzC,IACA;AAAM,IAAA,KAAK,EAAE;AAAEQ,MAAAA,OAAO,EAAE,MAAX;AAAmBO,MAAAA,aAAa,EAAE,KAAlC;AAAyCC,MAAAA,MAAM,EAAE;AAAjD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACG;AAAG,IAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,gBADL;AAEE,IAAA,cAAc,EAAC,qFAFjB;AAGE,IAAA,MAAM,EAAE;AAAEC,MAAAA,eAAe,EAAEzC,IAAI,CAACe;AAAxB,KAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,CA1EJ,CADF;;AAuFA,QAAMoB,UAAU,GAAG7C,SAAS,GAAGA,SAAH,GAAeD,KAA3C;AACA,QAAM+C,wBAAwB,gBAAG9B,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAV,8CAAG,UAAkBC,QAAnD;AACA,QAAMiB,uBAAuB,iBAAGhC,OAAO,CAACN,IAAI,CAACoB,EAAN,CAAV,+CAAG,WAAkBE,gBAAlD;AACA,SACE,MAAC,kBAAD;AAAoB,IAAA,OAAO,EAAEpB,OAA7B;AAAsC,IAAA,SAAS,EAAC,cAAhD;AAA+D,IAAA,KAAK,EAAEpB,QAAQ,GAAG;AAAEkD,MAAAA,OAAO,EAAE;AAAX,KAAH,GAAyB,EAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,GAAG,EAAE7C,KADP;AAEE,IAAA,SAAS,EAAC,eAFZ;AAGE,IAAA,KAAK,EAAE;AAAEuD,MAAAA,QAAQ,EAAE;AAAZ,KAHT;AAIE,IAAA,GAAG,EAAExD,KAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOGK,iBAAiB,GAChB,4BACE,MAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkBA,iBAAlB,MADF,CADgB,GAKhB,EAZJ,EAcGS,IAAI,CAACwB,gBAAL,IAAyB,CAAzB,GACC,4BACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAaR,IAAI,CAAC2B,aAAL,CAAmB;AAAEvB,IAAAA,EAAE,EAAE,YAAN;AAAoBwB,IAAAA,cAAc,EAAE;AAApC,GAAnB,CAAb,CADF,CADD,GAKC,EAnBJ,CADF,EAuBE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+B1D,KAA/B,CADF,EAEI,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAvBF,CADF;AA8BD,CAhMD;;AAkMA,eAAeD,WAAf","sourcesContent":["// product card for general\nimport React, { useState } from 'react';\nimport Image from 'components/image/image';\nimport { Button } from 'components/button/button';\nimport {\n  ProductCardWrapper,\n  ProductImageWrapper,\n  ProductInfo,\n  DiscountPercent,\n  OutOfStock,\n  ButtonText,\n  PriceContainer,\n  PriceContainerRow,\n  ProductCartBtn,\n  ProductCartWrapper,\n  ProductPrice,\n  ProductPriceWrapper,\n  SalePrice,\n} from '../product-card.style';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { Counter } from 'components/counter/counter';\nimport { cartAnimation } from 'utils/cart-animation';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { isMobile } from 'react-device-detect';\nimport { CartIcon } from 'assets/icons/CartIcon';\nimport { ProductQuantityExceededMsg } from '../product-card.style';\nimport CartPopUp from 'features/carts/cart-popup-two';\nimport { CURRENCY } from 'utils/constant';\n\ntype ProductCardProps = {\n  title: string;\n  image: any;\n  weight: string;\n  currency: string;\n  description: string;\n  price: number;\n  salePrice?: number;\n  discountInPercent?: number;\n  data: any;\n  onClick?: (e: any) => void;\n  onChange?: (e: any) => void;\n  increment?: (e: any) => void;\n  decrement?: (e: any) => void;\n  cartProducts?: any;\n  addToCart?: any;\n  updateCart?: any;\n  value?: any;\n  deviceType?: any;\n};\n\nconst ProductCard: React.FC<ProductCardProps> = ({\n  title,\n  image,\n  weight,\n  price,\n  salePrice,\n  discountInPercent,\n  cartProducts,\n  addToCart,\n  updateCart,\n  value,\n  currency,\n  onChange,\n  increment,\n  decrement,\n  data,\n  deviceType,\n  onClick,\n  ...props\n}) => {\n  const { addItem, removeItem, getItem, isInCart, items, removeRecicledItemHandler, addRecicledItemHandler, removeItemFromCart } = useCart();\n  const [showProductQuantityExceededMsg, setShowProductQuantityExceededMsg] = useState(false);\n  const hasEcoButton = data.packagePrice > 0;\n  const intl = useIntl();\n\n  const handleAddClick = (e) => {\n    const currentQuantity = (getItem(data.id)?.quantity || 0) + (getItem(data.id)?.recicledQuantity || 0);\n    const stock = data.product_quantity;\n    if (stock <= currentQuantity) {\n      e.stopPropagation();\n      showProductQuantityExceededMsgFor5Sec()\n    } else {\n      e.stopPropagation();\n      addItem(data);\n      if (!isInCart(data.id)) {\n        cartAnimation(e);\n      }\n    }\n  };\n\n  const handleRecicledAddClick = (e) => {\n    const currentQuantity = (getItem(data.id)?.quantity || 0) + (getItem(data.id)?.recicledQuantity || 0);\n    const stock = data.product_quantity;\n    if (stock <= currentQuantity) {\n      e.stopPropagation();\n      showProductQuantityExceededMsgFor5Sec()\n    } else {\n      e.stopPropagation();\n      addRecicledItemHandler(data);\n    }\n  };\n  const handleRecicledRemoveClick = (e) => {\n    const recicledQuantity = getItem(data.id)?.recicledQuantity || 0;\n    const quantity = getItem(data.id)?.quantity || 0;\n    e.stopPropagation();\n    quantity === 0 && recicledQuantity === 1 ? removeItemFromCart(data) : removeRecicledItemHandler(data);\n  };\n\n  const handleRemoveClick = (e) => {\n    const recicledQuantity = getItem(data.id)?.recicledQuantity || 0;\n    const quantity = getItem(data.id)?.quantity || 0;\n    e.stopPropagation();\n    quantity === 1 && recicledQuantity === 0 ? removeItemFromCart(data) : removeItem(data);\n  };\n\n  const showProductQuantityExceededMsgFor5Sec = () => {\n    setShowProductQuantityExceededMsg(true);\n    setTimeout(() => {\n      setShowProductQuantityExceededMsg(false);\n    }, 1500)\n  };\n  \n  const PriceContent = () => (\n    <>\n      {data.product_quantity != 0 ? (<ProductCartWrapper>\n        <ProductCartBtn style={{ display: 'flex',marginTop: '-10px' }}>\n            <PriceContainer>\n              <PriceContainerRow>\n                <ProductPriceWrapper>\n                  {data.discountInPercent ? (<SalePrice>{CURRENCY} {data.sale_price}</SalePrice>) : null}\n                  <ProductPrice>\n                    {CURRENCY}\n                    {finalPrice}\n                  </ProductPrice>\n                </ProductPriceWrapper>\n                { noRecicledQuantityInCart ? (\n                  <>\n                    <Counter\n                        value={getItem(data.id).quantity}\n                        onDecrement={handleRemoveClick}\n                        onIncrement={handleAddClick}\n                    />\n                  </>\n                ) : (\n                  <Button className=\"cart-button\" variant=\"secondary\" borderradius={100} onClick={handleAddClick}>\n                    <ButtonText>\n                      <FormattedMessage id={\"addToCartButton\"} defaultMessage=\"Cart\" />\n                    </ButtonText>\n                  </Button>\n                )}\n              </PriceContainerRow>\n              { hasEcoButton ? (\n                <PriceContainerRow>\n                  <ProductPriceWrapper>\n                    <ProductPrice> {CURRENCY} {Number(finalPrice - data.packagePrice)}</ProductPrice>\n                  </ProductPriceWrapper>\n                  { reclicledQuantityInCart ? (\n                  <>\n                    <Counter\n                        value={reclicledQuantityInCart}\n                        onDecrement={handleRecicledRemoveClick}\n                        onIncrement={handleRecicledAddClick}\n                    />\n                  </>\n                ) : (\n                  <Button className=\"cart-button\" variant=\"secondary\" borderRadius={100} onClick={handleRecicledAddClick}>\n                    <ButtonText>\n                      <FormattedMessage id=\"addEcoToCartButton\" defaultMessage=\"Cart\" />\n                    </ButtonText>\n                  </Button>\n                )}\n                </PriceContainerRow>\n                ) : (null)\n              }\n            </PriceContainer>\n        </ProductCartBtn>\n        {/* \n        I TOOK THIS OFF BECAUSE A UI BUG THAT SHOWS ON DESKTOP 3 CARTS POPSUP, DONT KNOW WHY, DONTCARE\n        { (noRecicledQuantityInCart || reclicledQuantityInCart) ? (<CartPopUp deviceType={deviceType}/>) : null} */}\n      </ProductCartWrapper>\n      )\n      : (<ProductCartWrapper>\n        <ProductPriceWrapper>\n            {data.discountInPercent ? (<SalePrice>{CURRENCY} {data.sale_price}</SalePrice>) : null}\n            <ProductPrice>\n              {CURRENCY}\n              {finalPrice}\n            </ProductPrice>\n          </ProductPriceWrapper>\n        </ProductCartWrapper>)\n      }\n      { showProductQuantityExceededMsg && (\n        <ProductQuantityExceededMsg>\n          <FormattedMessage id='productStockLimit' defaultMessage='There is no more availability of this product' />\n        </ProductQuantityExceededMsg>\n      )}\n      { hasEcoButton && data.product_quantity != 0 && (\n        <span style={{ display: 'flex', flexDirection: 'row', margin: '0px -10px'}}>\n          *<p className=\"eco-detail\">\n            <FormattedMessage\n              id='ecoDescription'\n              defaultMessage=\"Eco purchase: you pay ${packageDiscount} if you have a package from us to returned.\"\n              values={{ packageDiscount: data.packagePrice }}\n            />\n          </p>\n        </span>\n      )}\n    </>\n  )\n  const finalPrice = salePrice ? salePrice : price;\n  const noRecicledQuantityInCart = getItem(data.id)?.quantity;\n  const reclicledQuantityInCart = getItem(data.id)?.recicledQuantity;\n  return (\n    <ProductCardWrapper onClick={onClick} className=\"product-card\" style={isMobile ? { display: 'flex' } : {}}>\n      <ProductImageWrapper>\n        <Image\n          url={image}\n          className=\"product-image\"\n          style={{ position: 'relative' }}\n          alt={title}\n        />\n        {discountInPercent ? (\n          <>\n            <DiscountPercent>{discountInPercent}%</DiscountPercent>\n          </>\n        ) : (\n          ''\n        )}\n        {data.product_quantity == 0 ? (\n          <>\n            <OutOfStock>{intl.formatMessage({ id: 'outOfStock', defaultMessage: 'Out of stock' })}</OutOfStock>\n          </>\n        ) : (\n          ''\n        )}\n      </ProductImageWrapper>\n      <ProductInfo>\n        <h3 className=\"product-title\">{title}</h3>\n          <PriceContent />\n      </ProductInfo>\n    </ProductCardWrapper>\n  );\n};\n\nexport default ProductCard;\n"]},"metadata":{},"sourceType":"module"}