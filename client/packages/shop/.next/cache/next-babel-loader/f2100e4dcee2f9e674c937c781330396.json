{"ast":null,"code":"var _jsxFileName = \"/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/layouts/header/mobile-header.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport MobileDrawer from './mobile-drawer';\nimport { MobileHeaderWrapper, MobileHeaderInnerWrapper, DrawerWrapper, LogoWrapper, SearchModalWrapper, SearchModalClose } from './header.style';\nimport Search from 'features/search/search';\nimport LogoImage from 'assets/images/logo.svg';\nimport { LongArrowLeft } from 'assets/icons/LongArrowLeft';\nimport Logo from 'layouts/logo/logo';\nimport LanguageSwitcher from './menu/language-switcher/language-switcher';\nimport { isCategoryPage } from '../is-home-page';\nimport useDimensions from 'utils/useComponentSize';\nimport { GET_TYPE } from 'graphql/query/type.query';\nimport { useQuery } from '@apollo/react-hooks';\nimport { CATEGORY_MENU_ITEMS } from 'site-settings/site-navigation';\nimport { AuthContext } from 'contexts/auth/auth.context';\n\nconst SearchModal = () => {\n  const onSubmit = () => {\n    closeModal();\n  };\n\n  return __jsx(SearchModalWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, __jsx(SearchModalClose, {\n    type: \"submit\",\n    onClick: () => closeModal(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, __jsx(LongArrowLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  })), __jsx(Search, {\n    className: \"header-modal-search\",\n    showButtonText: false,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst MobileHeader = ({\n  className\n}) => {\n  const {\n    pathname,\n    query\n  } = useRouter();\n  const {\n    authState: {\n      isAuthenticated,\n      isStaff\n    },\n    authDispatch\n  } = useContext(AuthContext);\n  const [mobileHeaderRef, dimensions] = useDimensions();\n  const router = useRouter();\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(GET_TYPE, {\n    variables: {\n      searchText: ''\n    }\n  });\n\n  const handleSearchModal = () => {\n    openModal({\n      show: true,\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'search-modal-mobile',\n        width: '100%',\n        height: '100%'\n      },\n      closeOnClickOutside: false,\n      component: SearchModal,\n      closeComponent: () => __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      })\n    });\n  };\n\n  const type = pathname === '/restaurant' ? 'restaurant' : query.type;\n  const isHomePage = isCategoryPage(type);\n  const typeMenu = data.types.items.map(item => {\n    return {\n      id: item.id,\n      href: `/${item.slug}`,\n      defaultMessage: item.name,\n      icon: item.icon,\n      dynamic: true\n    };\n  });\n  const initialMenu = router.asPath == '/' ? typeMenu[0] : typeMenu.find(item => item.href == router.asPath);\n\n  if (initialMenu) {\n    if (localStorage.getItem('myMenu')) {\n      localStorage.removeItem('myMenu');\n    }\n\n    localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n  }\n\n  const [activeMenu, setActiveMenu] = React.useState(initialMenu !== null && initialMenu !== void 0 ? initialMenu : CATEGORY_MENU_ITEMS[0]);\n  return __jsx(MobileHeaderWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, __jsx(MobileHeaderInnerWrapper, {\n    className: className,\n    ref: mobileHeaderRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, __jsx(DrawerWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, \"!isAuthenticated ? (\", __jsx(Button, {\n    variant: \"primary\",\n    onClick: onJoin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"joinButton\",\n    defaultMessage: \"join\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  })), \") : (\", __jsx(Popover, {\n    direction: \"right\",\n    className: \"user-pages-dropdown\",\n    handler: __jsx(\"img\", {\n      src: avatar,\n      alt: \"user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 22\n      }\n    }),\n    content: __jsx(AuthorizedMenu, {\n      isStaff: isStaff,\n      onLogout: onLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }), \");\", __jsx(MobileDrawer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  })), __jsx(LogoWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, __jsx(Logo, {\n    imageUrl: LogoImage,\n    alt: \"shop logo\",\n    onClick: initialMenu ? initialMenu : JSON.parse(localStorage.getItem('myMenu')),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  })), __jsx(LanguageSwitcher, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default MobileHeader;","map":{"version":3,"sources":["/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/layouts/header/mobile-header.tsx"],"names":["React","useContext","useRouter","openModal","closeModal","MobileDrawer","MobileHeaderWrapper","MobileHeaderInnerWrapper","DrawerWrapper","LogoWrapper","SearchModalWrapper","SearchModalClose","Search","LogoImage","LongArrowLeft","Logo","LanguageSwitcher","isCategoryPage","useDimensions","GET_TYPE","useQuery","CATEGORY_MENU_ITEMS","AuthContext","SearchModal","onSubmit","MobileHeader","className","pathname","query","authState","isAuthenticated","isStaff","authDispatch","mobileHeaderRef","dimensions","router","data","error","loading","variables","searchText","handleSearchModal","show","config","enableResizing","disableDragging","width","height","closeOnClickOutside","component","closeComponent","type","isHomePage","typeMenu","types","items","map","item","id","href","slug","defaultMessage","name","icon","dynamic","initialMenu","asPath","find","localStorage","getItem","removeItem","setItem","JSON","stringify","activeMenu","setActiveMenu","useState","onJoin","avatar","onLogout","parse"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,mBAAtC;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,SACEC,mBADF,EAEEC,wBAFF,EAGEC,aAHF,EAIEC,WAJF,EAMEC,kBANF,EAOEC,gBAPF,QAQO,gBARP;AASA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AAGA,SAASC,aAAT,QAA8B,4BAA9B;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AAEA,OAAOC,gBAAP,MAA6B,4CAA7B;AACA,SAASC,cAAT,QAA+B,iBAA/B;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,mBAAT,QAAoC,+BAApC;AACA,SAASC,WAAT,QAA4B,4BAA5B;;AAOA,MAAMC,WAAyB,GAAG,MAAM;AACtC,QAAMC,QAAQ,GAAG,MAAM;AACrBpB,IAAAA,UAAU;AACX,GAFD;;AAGA,SACE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,IAAI,EAAC,QAAvB;AAAgC,IAAA,OAAO,EAAE,MAAMA,UAAU,EAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,MAAD;AACE,IAAA,SAAS,EAAC,qBADZ;AAEE,IAAA,cAAc,EAAE,KAFlB;AAGE,IAAA,QAAQ,EAAEoB,QAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF;AAYD,CAhBD;;AAkBA,MAAMC,YAAyC,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAmB;AACnE,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAsB1B,SAAS,EAArC;AACA,QAAM;AAAE2B,IAAAA,SAAS,EAAE;AAAEC,MAAAA,eAAF;AAAmBC,MAAAA;AAAnB,KAAb;AAA2CC,IAAAA;AAA3C,MAA8D/B,UAAU,CAAMqB,WAAN,CAA9E;AAEA,QAAM,CAACW,eAAD,EAAkBC,UAAlB,IAAgChB,aAAa,EAAnD;AACA,QAAMiB,MAAM,GAAGjC,SAAS,EAAxB;AACA,QAAM;AAAEkC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,MAA2BlB,QAAQ,CACvCD,QADuC,EAEvC;AACEoB,IAAAA,SAAS,EAAE;AACTC,MAAAA,UAAU,EAAE;AADH;AADb,GAFuC,CAAzC;;AASA,QAAMC,iBAAiB,GAAG,MAAM;AAC9BtC,IAAAA,SAAS,CAAC;AACRuC,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,MAAM,EAAE;AACNC,QAAAA,cAAc,EAAE,KADV;AAENC,QAAAA,eAAe,EAAE,IAFX;AAGNnB,QAAAA,SAAS,EAAE,qBAHL;AAINoB,QAAAA,KAAK,EAAE,MAJD;AAKNC,QAAAA,MAAM,EAAE;AALF,OAFA;AASRC,MAAAA,mBAAmB,EAAE,KATb;AAURC,MAAAA,SAAS,EAAE1B,WAVH;AAWR2B,MAAAA,cAAc,EAAE,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXd,KAAD,CAAT;AAaD,GAdD;;AAeA,QAAMC,IAAI,GAAGxB,QAAQ,KAAK,aAAb,GAA6B,YAA7B,GAA4CC,KAAK,CAACuB,IAA/D;AAEA,QAAMC,UAAU,GAAGnC,cAAc,CAACkC,IAAD,CAAjC;AACA,QAAME,QAAQ,GAAGjB,IAAI,CAACkB,KAAL,CAAWC,KAAX,CAAiBC,GAAjB,CAAsBC,IAAD,IAAU;AAC9C,WAAO;AACLC,MAAAA,EAAE,EAAED,IAAI,CAACC,EADJ;AAELC,MAAAA,IAAI,EAAG,IAAGF,IAAI,CAACG,IAAK,EAFf;AAGLC,MAAAA,cAAc,EAAEJ,IAAI,CAACK,IAHhB;AAILC,MAAAA,IAAI,EAAEN,IAAI,CAACM,IAJN;AAKLC,MAAAA,OAAO,EAAE;AALJ,KAAP;AAOD,GARgB,CAAjB;AASA,QAAMC,WAAW,GAAG9B,MAAM,CAAC+B,MAAP,IAAiB,GAAjB,GAAuBb,QAAQ,CAAC,CAAD,CAA/B,GAAqCA,QAAQ,CAACc,IAAT,CAAeV,IAAD,IAAUA,IAAI,CAACE,IAAL,IAAaxB,MAAM,CAAC+B,MAA5C,CAAzD;;AAEA,MAAGD,WAAH,EAAe;AACb,QAAGG,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAH,EAAkC;AAChCD,MAAAA,YAAY,CAACE,UAAb,CAAwB,QAAxB;AACD;;AACDF,IAAAA,YAAY,CAACG,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAeR,WAAf,CAA/B;AACD;;AAED,QAAM,CAACS,UAAD,EAAaC,aAAb,IAA8B3E,KAAK,CAAC4E,QAAN,CAClCX,WADkC,aAClCA,WADkC,cAClCA,WADkC,GACnB5C,mBAAmB,CAAC,CAAD,CADA,CAApC;AAIA,SACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,wBAAD;AAA0B,IAAA,SAAS,EAAEK,SAArC;AAAgD,IAAA,GAAG,EAAEO,eAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAE4C,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,YAArB;AAAkC,IAAA,cAAc,EAAC,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,WASE,MAAC,OAAD;AACE,IAAA,SAAS,EAAC,OADZ;AAEE,IAAA,SAAS,EAAC,qBAFZ;AAGE,IAAA,OAAO,EAAE;AAAK,MAAA,GAAG,EAAEC,MAAV;AAAkB,MAAA,GAAG,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAE,MAAC,cAAD;AAAgB,MAAA,OAAO,EAAE/C,OAAzB;AAAkC,MAAA,QAAQ,EAAEgD,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,QAgBE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CADF,EAoBE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AACE,IAAA,QAAQ,EAAElE,SADZ;AAEE,IAAA,GAAG,EAAC,WAFN;AAGE,IAAA,OAAO,EAAEoD,WAAW,GAAGA,WAAH,GAAgBO,IAAI,CAACQ,KAAL,CAAWZ,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAHtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CApBF,EA4BE,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BF,CADF,CADF;AAiDD,CAxGD;;AA0GA,eAAe5C,YAAf","sourcesContent":["import React, { useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport MobileDrawer from './mobile-drawer';\nimport {\n  MobileHeaderWrapper,\n  MobileHeaderInnerWrapper,\n  DrawerWrapper,\n  LogoWrapper,\n  SearchWrapper,\n  SearchModalWrapper,\n  SearchModalClose,\n} from './header.style';\nimport Search from 'features/search/search';\nimport LogoImage from 'assets/images/logo.svg';\n\nimport { SearchIcon } from 'assets/icons/SearchIcon';\nimport { LongArrowLeft } from 'assets/icons/LongArrowLeft';\nimport Logo from 'layouts/logo/logo';\n\nimport LanguageSwitcher from './menu/language-switcher/language-switcher';\nimport { isCategoryPage } from '../is-home-page';\nimport useDimensions from 'utils/useComponentSize';\nimport { GET_TYPE } from 'graphql/query/type.query';\nimport { useQuery } from '@apollo/react-hooks';\nimport { CATEGORY_MENU_ITEMS } from 'site-settings/site-navigation';\nimport { AuthContext } from 'contexts/auth/auth.context';\n\ntype MobileHeaderProps = {\n  className?: string;\n  closeSearch?: any;\n};\n\nconst SearchModal: React.FC<{}> = () => {\n  const onSubmit = () => {\n    closeModal();\n  };\n  return (\n    <SearchModalWrapper>\n      <SearchModalClose type=\"submit\" onClick={() => closeModal()}>\n        <LongArrowLeft />\n      </SearchModalClose>\n      <Search\n        className=\"header-modal-search\"\n        showButtonText={false}\n        onSubmit={onSubmit}\n      />\n    </SearchModalWrapper>\n  );\n};\n\nconst MobileHeader: React.FC<MobileHeaderProps> = ({ className }) => {\n  const { pathname, query } = useRouter();\n  const { authState: { isAuthenticated, isStaff }, authDispatch,  } = useContext<any>(AuthContext);\n  \n  const [mobileHeaderRef, dimensions] = useDimensions();\n  const router = useRouter();\n  const { data, error, loading } = useQuery(\n    GET_TYPE,\n    {\n      variables: {\n        searchText: ''\n      }\n    }\n  );\n\n  const handleSearchModal = () => {\n    openModal({\n      show: true,\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'search-modal-mobile',\n        width: '100%',\n        height: '100%',\n      },\n      closeOnClickOutside: false,\n      component: SearchModal,\n      closeComponent: () => <div />,\n    });\n  };\n  const type = pathname === '/restaurant' ? 'restaurant' : query.type;\n\n  const isHomePage = isCategoryPage(type);\n  const typeMenu = data.types.items.map((item) => {\n    return({\n      id: item.id,\n      href: `/${item.slug}`,\n      defaultMessage: item.name,\n      icon: item.icon,\n      dynamic: true,\n    })\n  })\n  const initialMenu = router.asPath == '/' ? typeMenu[0] : typeMenu.find((item) => item.href == router.asPath);\n  \n  if(initialMenu){\n    if(localStorage.getItem('myMenu')){\n      localStorage.removeItem('myMenu');\n    }\n    localStorage.setItem('myMenu', JSON.stringify(initialMenu));\n  }\n\n  const [activeMenu, setActiveMenu] = React.useState(\n    initialMenu ?? CATEGORY_MENU_ITEMS[0]\n  );\n\n  return (\n    <MobileHeaderWrapper>\n      <MobileHeaderInnerWrapper className={className} ref={mobileHeaderRef}>\n        <DrawerWrapper>\n          {\n\n          }\n        !isAuthenticated ? (\n          <Button variant=\"primary\" onClick={onJoin}>\n            <FormattedMessage id=\"joinButton\" defaultMessage=\"join\" />\n          </Button>\n        ) : (\n          <Popover\n            direction=\"right\"\n            className=\"user-pages-dropdown\"\n            handler={<img src={avatar} alt=\"user\" />}\n            content={<AuthorizedMenu isStaff={isStaff} onLogout={onLogout} />}\n          />\n        );\n          <MobileDrawer />\n        </DrawerWrapper>\n\n        <LogoWrapper>\n          <Logo\n            imageUrl={LogoImage}\n            alt=\"shop logo\"\n            onClick={initialMenu ? initialMenu: JSON.parse(localStorage.getItem('myMenu'))}\n          />\n        </LogoWrapper>\n\n        <LanguageSwitcher />\n\n        {/* {isHomePage ? (\n          <SearchWrapper\n            onClick={handleSearchModal}\n            className=\"searchIconWrapper\"\n          >\n            <SearchIcon />\n          </SearchWrapper>\n        ) : null} */}\n        {/* <SearchWrapper\n          onClick={handleSearchModal}\n          className=\"searchIconWrapper\"\n        >\n          <SearchIcon />\n        </SearchWrapper> */}\n      </MobileHeaderInnerWrapper>\n    </MobileHeaderWrapper>\n  );\n};\n\nexport default MobileHeader;\n"]},"metadata":{},"sourceType":"module"}