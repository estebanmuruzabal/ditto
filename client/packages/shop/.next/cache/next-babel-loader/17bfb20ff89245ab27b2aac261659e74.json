{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/contexts/profile/profile.provider.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useReducer } from 'react';\nimport { ProfileContext } from './profile.context';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'HANDLE_ON_INPUT_CHANGE':\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.payload.field, action.payload.value));\n\n    case 'ADD_SENSOR':\n      state.plants[action.payload.plantIndex].sensors.push(action.payload.setting);\n      return _objectSpread({}, state);\n\n    case 'UPDATE_SENSOR':\n      state.plants[action.payload.plantIndex].sensors[action.payload.sensorIndex] = action.payload.settingUpdated;\n      return _objectSpread({}, state);\n\n    case 'DELETE_SENSOR':\n      state.plants[action.payload.plantIndex].sensors.splice(action.payload.settingIndex, 1);\n      return _objectSpread({}, state);\n\n    case 'ADD_CONTACT':\n      var newContact = _objectSpread({}, action.payload.values);\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        phones: [].concat(_toConsumableArray(state.phones), [newContact])\n      });\n\n    case 'UPDATE_CONTACT':\n      if (action.payload.id !== null) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          phones: state.phones.map(function (item) {\n            return item.id == action.payload.id ? _objectSpread(_objectSpread({}, item), action.payload.values) : item;\n          })\n        });\n      }\n\n    case 'DELETE_CONTACT':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        phones: state.phones.filter(function (item) {\n          return item.id !== action.payload;\n        })\n      });\n\n    case 'ADD_ADDRESS':\n      var newAdress = _objectSpread({}, action.payload);\n\n      if (state.delivery_address == null) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          delivery_address: [newAdress]\n        });\n      } else {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          delivery_address: [].concat(_toConsumableArray(state.delivery_address), [newAdress])\n        });\n      }\n\n    case 'UPDATE_ADDRESS':\n      if (action.payload.id) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          delivery_address: state.delivery_address.map(function (item, index) {\n            return item.id === action.payload.id ? _objectSpread(_objectSpread({}, item), action.payload.value) : item;\n          })\n        });\n      }\n\n    case 'DELETE_ADDRESS':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        delivery_address: state.delivery_address.filter(function (item, index) {\n          return item.id !== action.payload;\n        })\n      });\n\n    case 'ADD_CARD':\n      var newCard = {\n        id: action.payload.id,\n        type: state.card.length === '0' ? 'primary' : 'secondary',\n        cardType: action.payload.brand.toLowerCase(),\n        name: state.name,\n        lastFourDigit: action.payload.last4\n      };\n      return _objectSpread(_objectSpread({}, state), {}, {\n        card: [newCard].concat(_toConsumableArray(state.card))\n      });\n\n    case 'DELETE_CARD':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        card: state.card.filter(function (item) {\n          return item.id !== action.payload;\n        })\n      });\n\n    case 'SET_PRIMARY_CONTACT':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        phones: state.phones.map(function (item) {\n          return item.id === action.payload ? _objectSpread(_objectSpread({}, item), {}, {\n            is_primary: true,\n            type: 'primary'\n          }) : _objectSpread(_objectSpread({}, item), {}, {\n            is_primary: false,\n            type: 'secondary'\n          });\n        })\n      });\n\n    case 'SET_PRIMARY_ADDRESS':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        delivery_address: state.delivery_address.map(function (item, index) {\n          return item.id == action.payload ? _objectSpread(_objectSpread({}, item), {}, {\n            is_primary: true\n          }) : _objectSpread(_objectSpread({}, item), {}, {\n            is_primary: false\n          });\n        })\n      });\n\n    case 'SET_PRIMARY_SCHEDULE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        deliveryMethods: state.deliveryMethods.map(function (item) {\n          return item.id === action.payload ? _objectSpread(_objectSpread({}, item), {}, {\n            type: 'primary'\n          }) : _objectSpread(_objectSpread({}, item), {}, {\n            type: 'secondary'\n          });\n        })\n      });\n\n    case 'SET_PRIMARY_CARD':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        paymentMethods: state.paymentMethods.map(function (item) {\n          return item.id === action.payload ? _objectSpread(_objectSpread({}, item), {}, {\n            type: 'primary'\n          }) : _objectSpread(_objectSpread({}, item), {}, {\n            type: 'secondary'\n          });\n        })\n      });\n\n    default:\n      return state;\n  }\n}\n\nexport var ProfileProvider = function ProfileProvider(_ref) {\n  _s();\n\n  var children = _ref.children,\n      initData = _ref.initData;\n\n  var _useReducer = useReducer(reducer, _objectSpread({}, initData)),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return __jsx(ProfileContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 5\n    }\n  }, children);\n};\n\n_s(ProfileProvider, \"5VC8NG+g73NQ4DJHKnzMVrRTO14=\");\n\n_c = ProfileProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileProvider\");","map":{"version":3,"sources":["/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/contexts/profile/profile.provider.tsx"],"names":["React","useReducer","ProfileContext","reducer","state","action","type","payload","field","value","plants","plantIndex","sensors","push","setting","sensorIndex","settingUpdated","splice","settingIndex","newContact","values","phones","id","map","item","filter","newAdress","delivery_address","index","newCard","card","length","cardType","brand","toLowerCase","name","lastFourDigit","last4","is_primary","deliveryMethods","paymentMethods","ProfileProvider","children","initData","dispatch"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,mBAA/B;;AAqBA,SAASC,OAAT,CAAiBC,KAAjB,EAA6BC,MAA7B,EAAkD;AAChD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,wBAAL;AACE,6CAAYF,KAAZ,2BAAoBC,MAAM,CAACE,OAAP,CAAeC,KAAnC,EAA2CH,MAAM,CAACE,OAAP,CAAeE,KAA1D;;AAEF,SAAK,YAAL;AACIL,MAAAA,KAAK,CAACM,MAAN,CAAaL,MAAM,CAACE,OAAP,CAAeI,UAA5B,EAAwCC,OAAxC,CAAgDC,IAAhD,CAAqDR,MAAM,CAACE,OAAP,CAAeO,OAApE;AAEA,+BAAYV,KAAZ;;AACJ,SAAK,eAAL;AACIA,MAAAA,KAAK,CAACM,MAAN,CAAaL,MAAM,CAACE,OAAP,CAAeI,UAA5B,EAAwCC,OAAxC,CAAgDP,MAAM,CAACE,OAAP,CAAeQ,WAA/D,IAA8EV,MAAM,CAACE,OAAP,CAAeS,cAA7F;AAEA,+BAAYZ,KAAZ;;AACJ,SAAK,eAAL;AACIA,MAAAA,KAAK,CAACM,MAAN,CAAaL,MAAM,CAACE,OAAP,CAAeI,UAA5B,EAAwCC,OAAxC,CAAgDK,MAAhD,CAAuDZ,MAAM,CAACE,OAAP,CAAeW,YAAtE,EAAoF,CAApF;AAEA,+BAAYd,KAAZ;;AACJ,SAAK,aAAL;AACE,UAAMe,UAAU,qBACXd,MAAM,CAACE,OAAP,CAAea,MADJ,CAAhB;;AAGA,6CACKhB,KADL;AAEEiB,QAAAA,MAAM,+BAAMjB,KAAK,CAACiB,MAAZ,IAAoBF,UAApB;AAFR;;AAKF,SAAK,gBAAL;AACE,UAAId,MAAM,CAACE,OAAP,CAAee,EAAf,KAAsB,IAA1B,EAAiC;AAC/B,+CACKlB,KADL;AAEEiB,UAAAA,MAAM,EAAEjB,KAAK,CAACiB,MAAN,CAAaE,GAAb,CAAiB,UAACC,IAAD;AAAA,mBACvBA,IAAI,CAACF,EAAL,IAAWjB,MAAM,CAACE,OAAP,CAAee,EAA1B,mCACSE,IADT,GACkBnB,MAAM,CAACE,OAAP,CAAea,MADjC,IAEII,IAHmB;AAAA,WAAjB;AAFV;AAQD;;AAEH,SAAK,gBAAL;AACE,6CACKpB,KADL;AAEEiB,QAAAA,MAAM,EAAEjB,KAAK,CAACiB,MAAN,CAAaI,MAAb,CACN,UAACD,IAAD;AAAA,iBAAeA,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAlC;AAAA,SADM;AAFV;;AAOF,SAAK,aAAL;AACE,UAAMmB,SAAS,qBACVrB,MAAM,CAACE,OADG,CAAf;;AAGA,UAAGH,KAAK,CAACuB,gBAAN,IAA0B,IAA7B,EAAkC;AAChC,+CACKvB,KADL;AAEEuB,UAAAA,gBAAgB,EAAE,CAACD,SAAD;AAFpB;AAID,OALD,MAKK;AACH,+CACKtB,KADL;AAEEuB,UAAAA,gBAAgB,+BAAMvB,KAAK,CAACuB,gBAAZ,IAA8BD,SAA9B;AAFlB;AAID;;AACH,SAAK,gBAAL;AACI,UAAIrB,MAAM,CAACE,OAAP,CAAee,EAAnB,EAAuB;AACrB,+CACKlB,KADL;AAEEuB,UAAAA,gBAAgB,EAAEvB,KAAK,CAACuB,gBAAN,CAAuBJ,GAAvB,CAA2B,UAACC,IAAD,EAAYI,KAAZ;AAAA,mBAC3CJ,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAP,CAAee,EAA3B,mCACSE,IADT,GACkBnB,MAAM,CAACE,OAAP,CAAeE,KADjC,IAEIe,IAHuC;AAAA,WAA3B;AAFpB;AAQD;;AACL,SAAK,gBAAL;AACE,6CACKpB,KADL;AAEEuB,QAAAA,gBAAgB,EAAEvB,KAAK,CAACuB,gBAAN,CAAuBF,MAAvB,CAChB,UAACD,IAAD,EAAYI,KAAZ;AAAA,iBAA2BJ,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAA9C;AAAA,SADgB;AAFpB;;AAMF,SAAK,UAAL;AACE,UAAMsB,OAAO,GAAG;AACdP,QAAAA,EAAE,EAAEjB,MAAM,CAACE,OAAP,CAAee,EADL;AAEdhB,QAAAA,IAAI,EAAEF,KAAK,CAAC0B,IAAN,CAAWC,MAAX,KAAsB,GAAtB,GAA4B,SAA5B,GAAwC,WAFhC;AAGdC,QAAAA,QAAQ,EAAE3B,MAAM,CAACE,OAAP,CAAe0B,KAAf,CAAqBC,WAArB,EAHI;AAIdC,QAAAA,IAAI,EAAE/B,KAAK,CAAC+B,IAJE;AAKdC,QAAAA,aAAa,EAAE/B,MAAM,CAACE,OAAP,CAAe8B;AALhB,OAAhB;AAOA,6CACKjC,KADL;AAEE0B,QAAAA,IAAI,GAAGD,OAAH,4BAAezB,KAAK,CAAC0B,IAArB;AAFN;;AAIF,SAAK,aAAL;AACE,6CACK1B,KADL;AAEE0B,QAAAA,IAAI,EAAE1B,KAAK,CAAC0B,IAAN,CAAWL,MAAX,CAAkB,UAACD,IAAD;AAAA,iBAAeA,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAlC;AAAA,SAAlB;AAFR;;AAIF,SAAK,qBAAL;AACE,6CACKH,KADL;AAEEiB,QAAAA,MAAM,EAAEjB,KAAK,CAACiB,MAAN,CAAaE,GAAb,CAAiB,UAACC,IAAD;AAAA,iBACvBA,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAnB,mCACSiB,IADT;AACec,YAAAA,UAAU,EAAE,IAD3B;AACiChC,YAAAA,IAAI,EAAE;AADvC,+CAESkB,IAFT;AAEec,YAAAA,UAAU,EAAE,KAF3B;AAEkChC,YAAAA,IAAI,EAAE;AAFxC,YADuB;AAAA,SAAjB;AAFV;;AAQF,SAAK,qBAAL;AACE,6CACKF,KADL;AAEEuB,QAAAA,gBAAgB,EAAEvB,KAAK,CAACuB,gBAAN,CAAuBJ,GAAvB,CAA2B,UAACC,IAAD,EAAYI,KAAZ;AAAA,iBAC3CJ,IAAI,CAACF,EAAL,IAAWjB,MAAM,CAACE,OAAlB,mCACSiB,IADT;AACec,YAAAA,UAAU,EAAE;AAD3B,+CAESd,IAFT;AAEec,YAAAA,UAAU,EAAE;AAF3B,YAD2C;AAAA,SAA3B;AAFpB;;AAQF,SAAK,sBAAL;AACE,6CACKlC,KADL;AAEEmC,QAAAA,eAAe,EAAEnC,KAAK,CAACmC,eAAN,CAAsBhB,GAAtB,CAA0B,UAACC,IAAD,EAAc;AACxD,iBAAQA,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAnB,mCACAiB,IADA;AACMlB,YAAAA,IAAI,EAAE;AADZ,+CAEAkB,IAFA;AAEMlB,YAAAA,IAAI,EAAE;AAFZ,YAAR;AAGG,SAJa;AAFnB;;AASF,SAAK,kBAAL;AACE,6CACKF,KADL;AAEEoC,QAAAA,cAAc,EAAEpC,KAAK,CAACoC,cAAN,CAAqBjB,GAArB,CAAyB,UAACC,IAAD;AAAA,iBACvCA,IAAI,CAACF,EAAL,KAAYjB,MAAM,CAACE,OAAnB,mCACSiB,IADT;AACelB,YAAAA,IAAI,EAAE;AADrB,+CAESkB,IAFT;AAEelB,YAAAA,IAAI,EAAE;AAFrB,YADuC;AAAA,SAAzB;AAFlB;;AAQF;AACE,aAAOF,KAAP;AArIJ;AAuID;;AAMD,OAAO,IAAMqC,eAA+D,GAAK,SAApEA,eAAoE,OAG1E;AAAA;;AAAA,MAFLC,QAEK,QAFLA,QAEK;AAAA,MADLC,QACK,QADLA,QACK;;AAAA,oBAEqB1C,UAAU,CAACE,OAAD,oBAAewC,QAAf,EAF/B;AAAA,MAEEvC,KAFF;AAAA,MAESwC,QAFT;;AAIL,SACE,MAAC,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAAExC,MAAAA,KAAK,EAALA,KAAF;AAASwC,MAAAA,QAAQ,EAARA;AAAT,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,QADH,CADF;AAKD,CAZM;;GAAMD,e;;KAAAA,e","sourcesContent":["import React, { useReducer } from 'react';\nimport { ProfileContext } from './profile.context';\nimport { SensorsTypes } from 'utils/constant';\n\ntype Action =\n  | { type: 'HANDLE_ON_INPUT_CHANGE'; payload: any }\n  | { type: 'ADD_SENSOR'; payload: any }\n  | { type: 'DELETE_SENSOR'; payload: any }\n  | { type: 'UPDATE_SENSOR'; payload: any }\n  | { type: 'HANDLE_PASSWORD_CLEAR'; payload: any }\n  | { type: 'ADD_CONTACT'; payload: any }\n  | { type: 'UPDATE_CONTACT'; payload: any }\n  | { type: 'DELETE_CONTACT'; payload: any }\n  | { type: 'ADD_ADDRESS'; payload: any }\n  | { type: 'UPDATE_ADDRESS'; payload: any }\n  | { type: 'DELETE_ADDRESS'; payload: any }\n  | { type: 'ADD_CARD'; payload: any }\n  | { type: 'DELETE_CARD'; payload: any }\n  | { type: 'SET_PRIMARY_CONTACT'; payload: any }\n  | { type: 'SET_PRIMARY_ADDRESS'; payload: any }\n  | { type: 'SET_PRIMARY_SCHEDULE'; payload: any }\n  | { type: 'SET_PRIMARY_CARD'; payload: any };\nfunction reducer(state: any, action: Action): any {\n  switch (action.type) {\n    case 'HANDLE_ON_INPUT_CHANGE':\n      return { ...state, [action.payload.field]: action.payload.value };\n\n    case 'ADD_SENSOR':\n        state.plants[action.payload.plantIndex].sensors.push(action.payload.setting);\n      \n        return { ...state};\n    case 'UPDATE_SENSOR':\n        state.plants[action.payload.plantIndex].sensors[action.payload.sensorIndex] = action.payload.settingUpdated;\n      \n        return { ...state};\n    case 'DELETE_SENSOR':\n        state.plants[action.payload.plantIndex].sensors.splice(action.payload.settingIndex, 1);\n      \n        return { ...state};\n    case 'ADD_CONTACT':\n      const newContact = {\n        ...action.payload.values,\n      };\n      return {\n        ...state,\n        phones: [...state.phones, newContact],\n      };\n    \n    case 'UPDATE_CONTACT':\n      if (action.payload.id !== null ) {\n        return {\n          ...state,\n          phones: state.phones.map((item: any) =>\n            item.id == action.payload.id\n              ? { ...item, ...action.payload.values }\n              : item\n          ),\n        };\n      }\n        \n    case 'DELETE_CONTACT':\n      return {\n        ...state,\n        phones: state.phones.filter(\n          (item: any) => item.id !== action.payload\n        ),\n      };\n    \n    case 'ADD_ADDRESS':\n      const newAdress = {\n        ...action.payload\n      };\n      if(state.delivery_address == null){\n        return {\n          ...state,\n          delivery_address: [newAdress],\n        };\n      }else{\n        return {\n          ...state,\n          delivery_address: [...state.delivery_address, newAdress],\n        };\n      }\n    case 'UPDATE_ADDRESS':\n        if (action.payload.id) {\n          return {\n            ...state,\n            delivery_address: state.delivery_address.map((item: any, index: any) =>\n              item.id === action.payload.id\n                ? { ...item, ...action.payload.value }\n                : item\n            ),\n          };\n        }\n    case 'DELETE_ADDRESS':\n      return {\n        ...state,\n        delivery_address: state.delivery_address.filter(\n          (item: any, index: any) => item.id !== action.payload\n        ),\n      };\n    case 'ADD_CARD':\n      const newCard = {\n        id: action.payload.id,\n        type: state.card.length === '0' ? 'primary' : 'secondary',\n        cardType: action.payload.brand.toLowerCase(),\n        name: state.name,\n        lastFourDigit: action.payload.last4,\n      };\n      return {\n        ...state,\n        card: [newCard, ...state.card],\n      };\n    case 'DELETE_CARD':\n      return {\n        ...state,\n        card: state.card.filter((item: any) => item.id !== action.payload),\n      };\n    case 'SET_PRIMARY_CONTACT':\n      return {\n        ...state,\n        phones: state.phones.map((item: any) =>\n          item.id === action.payload\n            ? { ...item, is_primary: true, type: 'primary' }\n            : { ...item, is_primary: false, type: 'secondary' }\n        ),\n      };\n    case 'SET_PRIMARY_ADDRESS':\n      return {\n        ...state,\n        delivery_address: state.delivery_address.map((item: any, index: any) =>\n          item.id == action.payload\n            ? { ...item, is_primary: true }\n            : { ...item, is_primary: false }\n        ),\n      };\n    case 'SET_PRIMARY_SCHEDULE':\n      return {\n        ...state,\n        deliveryMethods: state.deliveryMethods.map((item: any) =>{\n         return( item.id === action.payload\n          ? { ...item, type: 'primary' }\n          : { ...item, type: 'secondary' }\n          )}\n        ),\n      };\n    case 'SET_PRIMARY_CARD':\n      return {\n        ...state,\n        paymentMethods: state.paymentMethods.map((item: any) =>\n          item.id === action.payload\n            ? { ...item, type: 'primary' }\n            : { ...item, type: 'secondary' }\n        ),\n      };\n    default:\n      return state;\n  }\n}\n\ntype ProfileProviderProps = {\n  initData: any;\n};\n\nexport const ProfileProvider:  React.FunctionComponent<ProfileProviderProps>  =  ({\n  children,\n  initData,\n}) =>  {\n\n  const [state, dispatch] = useReducer(reducer, { ...initData });\n \n  return (\n    <ProfileContext.Provider value={{ state, dispatch }}>\n      {children}\n    </ProfileContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}