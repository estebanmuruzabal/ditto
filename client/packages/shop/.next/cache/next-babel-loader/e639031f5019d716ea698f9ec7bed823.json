{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/estebanmuruzabal/work/Mahdi-Fashion/client/packages/shop/src/features/user-profile/work/work.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useState } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { Col } from 'react-styled-flexboxgrid';\nimport { openModal } from '@redq/reuse-modal';\nimport RadioCard from 'components/radio-card/radio-card';\nimport { WorkContext } from 'contexts/work/work.context';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport { DELETE_ADDRESS, SETPRIMARY_ADDRESS } from 'graphql/mutation/address';\nimport { UPDATE_USER_TODO_TASKS, UPDATE_USER_WORK_INFO } from 'graphql/mutation/user';\nimport { CHANGE_PASSWORD } from 'graphql/mutation/changePassword';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { DELETE_PHONENUMBER, SETPRIMARY_PHONENUMBER } from 'graphql/mutation/phone';\nimport { SettingsForm, SettingsFormContent, HeadingSection, Title, Row, ButtonGroup } from './work.style';\nimport RadioGroupThree from 'components/radio-group/radio-group-three';\nimport { UPDATE_ME } from 'graphql/mutation/me';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Label } from 'components/forms/label';\nimport Switch from 'components/switch/switch';\nimport moment from 'moment';\n\nvar WorkContent = function WorkContent(_ref) {\n  _s();\n\n  var _state$workInfo, _state$workInfo2, _state$workInfo3, _state$workInfo4, _state$workInfo5, _state$workInfo7, _state$workInfo7$rate, _state$workInfo8, _state$workInfo9, _state$workInfo9$tota;\n\n  var deviceType = _ref.deviceType;\n\n  var _useContext = useContext(WorkContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var _useState = useState(''),\n      userinfoMsg = _useState[0],\n      setUserinfoMsg = _useState[1];\n\n  var _useState2 = useState(false),\n      isChambeanding = _useState2[0],\n      setChamba = _useState2[1];\n\n  var _useState3 = useState(''),\n      passwordChangeMsg = _useState3[0],\n      setPasswordChangeMsg = _useState3[1];\n\n  var _React$useContext = React.useContext(AuthContext),\n      isAuthenticated = _React$useContext.authState.isAuthenticated,\n      authDispatch = _React$useContext.authDispatch;\n\n  var _useMutation = useMutation(UPDATE_ME),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      updateMeMutation = _useMutation2[0];\n\n  var _useMutation3 = useMutation(DELETE_CARD),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      deletePaymentCardMutation = _useMutation4[0];\n\n  var _useMutation5 = useMutation(UPDATE_USER_TODO_TASKS),\n      _useMutation6 = _slicedToArray(_useMutation5, 1),\n      updateUserTodoMutation = _useMutation6[0];\n\n  var _useMutation7 = useMutation(UPDATE_USER_WORK_INFO),\n      _useMutation8 = _slicedToArray(_useMutation7, 1),\n      updateUserInfoMutation = _useMutation8[0];\n\n  var _useMutation9 = useMutation(CHANGE_PASSWORD),\n      _useMutation10 = _slicedToArray(_useMutation9, 1),\n      changePasswordMutation = _useMutation10[0];\n\n  var _useMutation11 = useMutation(DELETE_PHONENUMBER),\n      _useMutation12 = _slicedToArray(_useMutation11, 1),\n      deletePhoneNumberMutation = _useMutation12[0];\n\n  var _useMutation13 = useMutation(SETPRIMARY_PHONENUMBER),\n      _useMutation14 = _slicedToArray(_useMutation13, 1),\n      setprimaryPhoneNumberMutation = _useMutation14[0];\n\n  var _useMutation15 = useMutation(SETPRIMARY_ADDRESS),\n      _useMutation16 = _slicedToArray(_useMutation15, 1),\n      setprimaryAddressMutation = _useMutation16[0];\n\n  var _useMutation17 = useMutation(DELETE_ADDRESS),\n      _useMutation18 = _slicedToArray(_useMutation17, 1),\n      deleteAddressMutation = _useMutation18[0];\n\n  var intl = useIntl();\n  var delivery_address = state.delivery_address,\n      card = state.card,\n      name = state.name,\n      email = state.email,\n      id = state.id,\n      phones = state.phones;\n\n  var updateUserWorkInfoMutation = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(logDescription) {\n      var workInfo, id, isWorking, startedWorkTime, stoppedWorkTime, ratePerHour, totalWorkingMinutesPerWeek, totalSalaryToPayWeekly, advancedSalaryPaid, taskRelated;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              workInfo = state.workInfo, id = state.id;\n              isWorking = workInfo.isWorking, startedWorkTime = workInfo.startedWorkTime, stoppedWorkTime = workInfo.stoppedWorkTime, ratePerHour = workInfo.ratePerHour, totalWorkingMinutesPerWeek = workInfo.totalWorkingMinutesPerWeek, totalSalaryToPayWeekly = workInfo.totalSalaryToPayWeekly, advancedSalaryPaid = workInfo.advancedSalaryPaid, taskRelated = workInfo.taskRelated;\n              _context.next = 4;\n              return updateUserInfoMutation({\n                variables: {\n                  id: id,\n                  isWorking: isWorking,\n                  startedWorkTime: startedWorkTime,\n                  stoppedWorkTime: stoppedWorkTime,\n                  ratePerHour: ratePerHour,\n                  logDescription: logDescription,\n                  totalWorkingMinutesPerWeek: totalWorkingMinutesPerWeek,\n                  totalSalaryToPayWeekly: totalSalaryToPayWeekly,\n                  advancedSalaryPaid: advancedSalaryPaid,\n                  taskRelated: taskRelated,\n                  role: state.role\n                }\n              });\n\n            case 4:\n              setUserinfoMsg('Update user work info successfully');\n              setTimeout(function () {\n                setUserinfoMsg('');\n              }, 8000);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateUserWorkInfoMutation(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var stopWorking = function stopWorking() {\n    var user = state;\n    if (!user.workInfo) user.workInfo = {};\n    user.workInfo.isWorking = false;\n    user.workInfo.stoppedWorkTime = new Date().toLocaleString('en-US', {\n      timeZone: 'America/Argentina/Buenos_Aires'\n    });\n    var startedWorkTime = moment(new Date(user.workInfo.startedWorkTime));\n    var stoppedWorkTime = moment(new Date(user.workInfo.stoppedWorkTime));\n    var workedInMinutes = stoppedWorkTime.diff(startedWorkTime, 'minutes');\n    var ratePerMinute = user.workInfo.ratePerHour / 60;\n    user.workInfo.totalWorkingMinutesPerWeek += workedInMinutes;\n    user.workInfo.totalSalaryToPayWeekly = Number(user.workInfo.totalWorkingMinutesPerWeek) * Number(ratePerMinute) - Number(user.workInfo.advancedSalaryPaid); // user.logs.push({\n    //   logDescription: ,\n    //   timestamp: new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' })\n    // });\n\n    dispatch({\n      type: 'HANDLE_WORK_CHANGE',\n      payload: {\n        workInfo: user.workInfo,\n        logs: user.logs\n      }\n    });\n    updateUserWorkInfoMutation(\"finished working.\");\n  };\n\n  var startWorking = function startWorking() {\n    var user = state;\n    if (!user.workInfo) user.workInfo = {};\n    user.workInfo.isWorking = true;\n    user.workInfo.startedWorkTime = new Date().toLocaleString('en-US', {\n      timeZone: 'America/Argentina/Buenos_Aires'\n    });\n    user.workInfo.stoppedWorkTime = null;\n    user.workInfo.ratePerHour = 300; // user.logs.push({\n    //   logDescription: ,\n    //   timestamp: new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' })\n    // })\n\n    dispatch({\n      type: 'HANDLE_WORK_CHANGE',\n      payload: {\n        workInfo: user.workInfo,\n        logs: user.logs\n      }\n    });\n    updateUserWorkInfoMutation(\"started working.\");\n  };\n\n  var handleTaskChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(task, action) {\n      var id, tasks, completationTimes, taskIndex, taskUpdated, finishDate, workedHours, startDate;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              id = state.id, tasks = state.tasks;\n              completationTimes = task.isRepetitived ? (Number(task.completationTimes) + 1).toString() : task.completationTimes;\n              taskIndex = tasks === null || tasks === void 0 ? void 0 : tasks.findIndex(function (t) {\n                return t.taskId === task.taskId;\n              });\n              _context2.t0 = action;\n              _context2.next = _context2.t0 === 'stop' ? 6 : _context2.t0 === 'start' ? 10 : 13;\n              break;\n\n            case 6:\n              finishDate = new Date().toLocaleString('en-US', {\n                timeZone: 'America/Argentina/Buenos_Aires'\n              });\n              workedHours = getDurationTimeInHours(task.startDate, finishDate);\n              taskUpdated = {\n                id: id,\n                taskId: task.taskId,\n                description: task.description,\n                startDate: task.startDate,\n                finishDate: finishDate,\n                plannedDate: task.plannedDate,\n                isRepetitived: task.isRepetitived,\n                completationTimes: completationTimes,\n                workedHours: workedHours,\n                isDone: true\n              };\n              return _context2.abrupt(\"break\", 15);\n\n            case 10:\n              startDate = new Date().toLocaleString('en-US', {\n                timeZone: 'America/Argentina/Buenos_Aires'\n              });\n              taskUpdated = {\n                id: id,\n                taskId: task.taskId,\n                description: task.description,\n                startDate: startDate,\n                finishDate: task.finishDate,\n                plannedDate: task.plannedDate,\n                isRepetitived: task.isRepetitived,\n                completationTimes: completationTimes,\n                workedHours: task.workedHours,\n                isDone: task.isDone\n              };\n              return _context2.abrupt(\"break\", 15);\n\n            case 13:\n              taskUpdated = task;\n              return _context2.abrupt(\"break\", 15);\n\n            case 15:\n              tasks[taskIndex] = taskUpdated;\n              dispatch({\n                type: 'HANDLE_TODO_TASKS',\n                payload: {\n                  tasks: tasks\n                }\n              });\n              _context2.next = 19;\n              return updateUserTodoMutation({\n                variables: _objectSpread({}, taskUpdated)\n              });\n\n            case 19:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleTaskChange(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getDurationTimeInHours = function getDurationTimeInHours(startDate, finishDate) {\n    var dt1 = new Date(startDate);\n    var dt2 = new Date(finishDate);\n    var diff = (dt2.getTime() - dt1.getTime()) / 1000;\n    diff /= 60 * 60;\n    return Math.abs(Math.round(diff));\n  }; // Add or edit modal\n\n\n  var handleModal = function handleModal(modalComponent) {\n    var modalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'add-address-modal';\n    openModal({\n      show: true,\n      config: {\n        width: 360,\n        height: 'auto',\n        enableResizing: false,\n        disableDragging: true,\n        className: className\n      },\n      closeOnClickOutside: true,\n      component: modalComponent,\n      componentProps: {\n        item: modalProps\n      }\n    });\n  };\n\n  console.log(\"working info changed:\", state);\n  var h = ((_state$workInfo = state.workInfo) === null || _state$workInfo === void 0 ? void 0 : _state$workInfo.totalWorkingMinutesPerWeek) / 60 | 0;\n  var m = ((_state$workInfo2 = state.workInfo) === null || _state$workInfo2 === void 0 ? void 0 : _state$workInfo2.totalWorkingMinutesPerWeek) % 60 | 0;\n  var subtotalSalario = Number((_state$workInfo3 = state.workInfo) === null || _state$workInfo3 === void 0 ? void 0 : _state$workInfo3.totalWorkingMinutesPerWeek) / 60 * Number((_state$workInfo4 = state.workInfo) === null || _state$workInfo4 === void 0 ? void 0 : _state$workInfo4.ratePerHour);\n  var pendingTasks = state === null || state === void 0 ? void 0 : state.tasks.filter(function (task) {\n    return task.startDate.length === 0 && task.finishDate.length === 0 && task.isDone === false;\n  });\n  var inProgressTasks = state === null || state === void 0 ? void 0 : state.tasks.filter(function (task) {\n    return task.startDate.length > 1 && task.finishDate.length === 0;\n  });\n  return __jsx(SettingsForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 5\n    }\n  }, __jsx(SettingsFormContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  }, __jsx(HeadingSection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 11\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"workPageTitle\",\n    defaultMessage: \"Ditto Farm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }))), __jsx(Col, {\n    style: {\n      alignItems: 'flex-end',\n      marginBottom: '50px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    style: {\n      marginBottom: '15px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  }, __jsx(Switch, {\n    label: \"Usted se encuentra: \".concat(((_state$workInfo5 = state.workInfo) === null || _state$workInfo5 === void 0 ? void 0 : _state$workInfo5.isWorking) ? 'Chambeando' : 'Vagando'),\n    disabled: false,\n    labelPosition: 'right' // className,\n    ,\n    onUpdate: function onUpdate() {\n      var _state$workInfo6;\n\n      return ((_state$workInfo6 = state.workInfo) === null || _state$workInfo6 === void 0 ? void 0 : _state$workInfo6.isWorking) ? stopWorking() : startWorking();\n    } // style\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  })), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"profileNameField\",\n    defaultMessage: \"Your Name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  }, state.name)), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"workedHours\",\n    defaultMessage: \"workedHours\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 15\n    }\n  }, \"\".concat(h, \":\").concat(Number(m) >= 9 ? m : '0' + m, \" hs\"))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 13\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"salaryPerHour\",\n    defaultMessage: \"salaryPerHour\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 15\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, \"$\".concat(((_state$workInfo7 = state.workInfo) === null || _state$workInfo7 === void 0 ? void 0 : (_state$workInfo7$rate = _state$workInfo7.ratePerHour) === null || _state$workInfo7$rate === void 0 ? void 0 : _state$workInfo7$rate.toFixed(2)) || '-'))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"subtotalSalary\",\n    defaultMessage: \"Salary Subtotal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }\n  }, \"$\".concat(subtotalSalario))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"advancedSalaryPaid\",\n    defaultMessage: \"advancedSalaryPaid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }, \"$\".concat((_state$workInfo8 = state.workInfo) === null || _state$workInfo8 === void 0 ? void 0 : _state$workInfo8.advancedSalaryPaid))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  }, __jsx(Label, {\n    style: {\n      marginRight: '15px',\n      minWidth: '200px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"totalSalaryToPayWeekly\",\n    defaultMessage: \"totalSalaryToPayWeekly\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  })), __jsx(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }, \"$\".concat(((_state$workInfo9 = state.workInfo) === null || _state$workInfo9 === void 0 ? void 0 : (_state$workInfo9$tota = _state$workInfo9.totalSalaryToPayWeekly) === null || _state$workInfo9$tota === void 0 ? void 0 : _state$workInfo9$tota.toFixed(2)) || '-'))), (inProgressTasks === null || inProgressTasks === void 0 ? void 0 : inProgressTasks.length) > 0 && __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  }, __jsx(SettingsFormContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 15\n    }\n  }, __jsx(HeadingSection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"inProgressTasks\",\n    defaultMessage: \"inProgressTasks\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 21\n    }\n  }))), __jsx(ButtonGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 17\n    }\n  }, __jsx(RadioGroupThree, {\n    items: inProgressTasks,\n    component: function component(task, index) {\n      return __jsx(RadioCard, {\n        id: index,\n        key: index,\n        title: task.description,\n        content: \"Comenzaste: \".concat(moment(new Date(task.startDate)).format('HH:mm A - MM/DD'), \".\"),\n        checked: task.isDone,\n        onChange: function onChange() {\n          return handleTaskChange(task, 'nothing');\n        },\n        name: \"contact\",\n        hasEdit: false,\n        onDelete: function onDelete() {\n          return handleTaskChange(task, 'stop');\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 19\n    }\n  }))))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }, __jsx(SettingsFormContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 15\n    }\n  }, __jsx(HeadingSection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"pendingTasks\",\n    defaultMessage: \"pendingTasks\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 21\n    }\n  }))), __jsx(ButtonGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 17\n    }\n  }, __jsx(RadioGroupThree, {\n    items: pendingTasks,\n    component: function component(task, index) {\n      var _task$plannedDate, _task$plannedDate2;\n\n      if (((_task$plannedDate = task.plannedDate) === null || _task$plannedDate === void 0 ? void 0 : _task$plannedDate.length) > 1) {} else if (((_task$plannedDate2 = task.plannedDate) === null || _task$plannedDate2 === void 0 ? void 0 : _task$plannedDate2.length) > 1) {\n        var plannedDate = moment(task.plannedDate, 'MM/D/YYYY');\n        var today = moment(new Date(), 'MM/D/YYYY');\n        console.log(plannedDate.isSame(today, 'date'));\n        console.log(plannedDate.isSame(today, 'day'));\n      }\n\n      return __jsx(RadioCard, {\n        id: index,\n        key: index,\n        disabled: false,\n        title: task.description,\n        content: \"Fecha planeada: \".concat(moment(new Date(task.plannedDate)).format('HH:mm A - MM/DD')),\n        checked: task.isDone,\n        onChange: function onChange() {\n          return handleTaskChange(task, 'contact');\n        },\n        name: \"contact\",\n        onEdit: function onEdit() {\n          return handleTaskChange(task, 'start');\n        },\n        hasDelete: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 25\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 19\n    }\n  }))))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 13\n    }\n  }, __jsx(SettingsFormContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 15\n    }\n  }, __jsx(HeadingSection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"doneTasks\",\n    defaultMessage: \"doneTasks\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 21\n    }\n  }))), __jsx(ButtonGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 17\n    }\n  }, __jsx(RadioGroupThree, {\n    items: state === null || state === void 0 ? void 0 : state.tasks.filter(function (task) {\n      return task.isDone === true;\n    }),\n    component: function component(task, index) {\n      return __jsx(RadioCard, {\n        id: index,\n        key: index,\n        title: task.description,\n        content: \"Comenzaste: \".concat(moment(new Date(task.startDate)).format('HH:mm A - MM/DD'), \". Terminaste: \").concat(moment(new Date(task.finishDate)).format('HH:mm A - MM/DD'), \". Tardaste: \").concat(task.workedHours, \"hs\"),\n        checked: task.isDone,\n        onChange: function onChange() {\n          return handleTaskChange(task, 'nothing');\n        },\n        name: \"contact\",\n        hasDelete: false,\n        hasEdit: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\n_s(WorkContent, \"nABgMfE4BK+mwnZt4LCjrghxxnk=\", false, function () {\n  return [useMutation, useMutation, useMutation, useMutation, useMutation, useMutation, useMutation, useMutation, useMutation, useIntl];\n});\n\n_c = WorkContent;\nexport default WorkContent;\n\nvar _c;\n\n$RefreshReg$(_c, \"WorkContent\");","map":{"version":3,"sources":["/Users/estebanmuruzabal/work/Mahdi-Fashion/client/packages/shop/src/features/user-profile/work/work.tsx"],"names":["React","useContext","useState","useMutation","Col","openModal","RadioCard","WorkContext","AuthContext","DELETE_ADDRESS","SETPRIMARY_ADDRESS","UPDATE_USER_TODO_TASKS","UPDATE_USER_WORK_INFO","CHANGE_PASSWORD","DELETE_CARD","DELETE_PHONENUMBER","SETPRIMARY_PHONENUMBER","SettingsForm","SettingsFormContent","HeadingSection","Title","Row","ButtonGroup","RadioGroupThree","UPDATE_ME","FormattedMessage","useIntl","Label","Switch","moment","WorkContent","deviceType","state","dispatch","userinfoMsg","setUserinfoMsg","isChambeanding","setChamba","passwordChangeMsg","setPasswordChangeMsg","isAuthenticated","authState","authDispatch","updateMeMutation","deletePaymentCardMutation","updateUserTodoMutation","updateUserInfoMutation","changePasswordMutation","deletePhoneNumberMutation","setprimaryPhoneNumberMutation","setprimaryAddressMutation","deleteAddressMutation","intl","delivery_address","card","name","email","id","phones","updateUserWorkInfoMutation","logDescription","workInfo","isWorking","startedWorkTime","stoppedWorkTime","ratePerHour","totalWorkingMinutesPerWeek","totalSalaryToPayWeekly","advancedSalaryPaid","taskRelated","variables","role","setTimeout","stopWorking","user","Date","toLocaleString","timeZone","workedInMinutes","diff","ratePerMinute","Number","type","payload","logs","startWorking","handleTaskChange","task","action","tasks","completationTimes","isRepetitived","toString","taskIndex","findIndex","t","taskId","finishDate","workedHours","getDurationTimeInHours","startDate","taskUpdated","description","plannedDate","isDone","dt1","dt2","getTime","Math","abs","round","handleModal","modalComponent","modalProps","className","show","config","width","height","enableResizing","disableDragging","closeOnClickOutside","component","componentProps","item","console","log","h","m","subtotalSalario","pendingTasks","filter","length","inProgressTasks","alignItems","marginBottom","marginRight","minWidth","toFixed","index","format","today","isSame"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,GAAT,QAAoB,0BAApB;AACA,SAASC,SAAT,QAA0B,mBAA1B;AAGA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,cAAT,EAAyBC,kBAAzB,QAAmD,0BAAnD;AACA,SAASC,sBAAT,EAAiCC,qBAAjC,QAA8D,uBAA9D;AACA,SAASC,eAAT,QAAgC,iCAAhC;AACA,SAASC,WAAT,QAA4B,uBAA5B;AACA,SAASC,kBAAT,EAA6BC,sBAA7B,QAA2D,wBAA3D;AAEA,SACEC,YADF,EAEEC,mBAFF,EAGEC,cAHF,EAIEC,KAJF,EAKEC,GALF,EAMEC,WANF,QASO,cATP;AAWA,OAAOC,eAAP,MAA4B,0CAA5B;AAOA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,gBAAT,EAA2BC,OAA3B,QAA0C,YAA1C;AACA,SAASC,KAAT,QAAsB,wBAAtB;AAEA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAUA,IAAMC,WAAuC,GAAG,SAA1CA,WAA0C,OAAoB;AAAA;;AAAA;;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAAA,oBACtC9B,UAAU,CAACM,WAAD,CAD4B;AAAA,MAC1DyB,KAD0D,eAC1DA,KAD0D;AAAA,MACnDC,QADmD,eACnDA,QADmD;;AAAA,kBAE5B/B,QAAQ,CAAC,EAAD,CAFoB;AAAA,MAE3DgC,WAF2D;AAAA,MAE9CC,cAF8C;;AAAA,mBAG9BjC,QAAQ,CAAC,KAAD,CAHsB;AAAA,MAG3DkC,cAH2D;AAAA,MAG3CC,SAH2C;;AAAA,mBAIhBnC,QAAQ,CAAC,EAAD,CAJQ;AAAA,MAI3DoC,iBAJ2D;AAAA,MAIxCC,oBAJwC;;AAAA,0BAQ9DvC,KAAK,CAACC,UAAN,CAAsBO,WAAtB,CAR8D;AAAA,MAMnDgC,eANmD,qBAMhEC,SANgE,CAMnDD,eANmD;AAAA,MAOhEE,YAPgE,qBAOhEA,YAPgE;;AAAA,qBASvCvC,WAAW,CAACqB,SAAD,CAT4B;AAAA;AAAA,MAS3DmB,gBAT2D;;AAAA,sBAU9BxC,WAAW,CAACW,WAAD,CAVmB;AAAA;AAAA,MAU3D8B,yBAV2D;;AAAA,sBAYjCzC,WAAW,CAACQ,sBAAD,CAZsB;AAAA;AAAA,MAY3DkC,sBAZ2D;;AAAA,sBAajC1C,WAAW,CAACS,qBAAD,CAbsB;AAAA;AAAA,MAa3DkC,sBAb2D;;AAAA,sBAcjC3C,WAAW,CAACU,eAAD,CAdsB;AAAA;AAAA,MAc3DkC,sBAd2D;;AAAA,uBAe9B5C,WAAW,CAACY,kBAAD,CAfmB;AAAA;AAAA,MAe3DiC,yBAf2D;;AAAA,uBAgB1B7C,WAAW,CAACa,sBAAD,CAhBe;AAAA;AAAA,MAgB3DiC,6BAhB2D;;AAAA,uBAiB9B9C,WAAW,CAACO,kBAAD,CAjBmB;AAAA;AAAA,MAiB3DwC,yBAjB2D;;AAAA,uBAkBlC/C,WAAW,CAACM,cAAD,CAlBuB;AAAA;AAAA,MAkB3D0C,qBAlB2D;;AAmBlE,MAAMC,IAAI,GAAG1B,OAAO,EAApB;AAnBkE,MAuBhE2B,gBAvBgE,GA6B9DrB,KA7B8D,CAuBhEqB,gBAvBgE;AAAA,MAwBhEC,IAxBgE,GA6B9DtB,KA7B8D,CAwBhEsB,IAxBgE;AAAA,MAyBhEC,IAzBgE,GA6B9DvB,KA7B8D,CAyBhEuB,IAzBgE;AAAA,MA0BhEC,KA1BgE,GA6B9DxB,KA7B8D,CA0BhEwB,KA1BgE;AAAA,MA2BhEC,EA3BgE,GA6B9DzB,KA7B8D,CA2BhEyB,EA3BgE;AAAA,MA4BhEC,MA5BgE,GA6B9D1B,KA7B8D,CA4BhE0B,MA5BgE;;AA+BlE,MAAMC,0BAA0B;AAAA,yEAAG,iBAAOC,cAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,cAAAA,QADyB,GACR7B,KADQ,CACzB6B,QADyB,EACfJ,EADe,GACRzB,KADQ,CACfyB,EADe;AAEzBK,cAAAA,SAFyB,GAEwHD,QAFxH,CAEzBC,SAFyB,EAEdC,eAFc,GAEwHF,QAFxH,CAEdE,eAFc,EAEGC,eAFH,GAEwHH,QAFxH,CAEGG,eAFH,EAEoBC,WAFpB,GAEwHJ,QAFxH,CAEoBI,WAFpB,EAEiCC,0BAFjC,GAEwHL,QAFxH,CAEiCK,0BAFjC,EAE6DC,sBAF7D,GAEwHN,QAFxH,CAE6DM,sBAF7D,EAEqFC,kBAFrF,GAEwHP,QAFxH,CAEqFO,kBAFrF,EAEyGC,WAFzG,GAEwHR,QAFxH,CAEyGQ,WAFzG;AAAA;AAAA,qBAI3BvB,sBAAsB,CAAC;AAC3BwB,gBAAAA,SAAS,EAAE;AACRb,kBAAAA,EAAE,EAAFA,EADQ;AAERK,kBAAAA,SAAS,EAATA,SAFQ;AAGRC,kBAAAA,eAAe,EAAfA,eAHQ;AAIRC,kBAAAA,eAAe,EAAfA,eAJQ;AAKRC,kBAAAA,WAAW,EAAXA,WALQ;AAMRL,kBAAAA,cAAc,EAAdA,cANQ;AAORM,kBAAAA,0BAA0B,EAA1BA,0BAPQ;AAQRC,kBAAAA,sBAAsB,EAAtBA,sBARQ;AASRC,kBAAAA,kBAAkB,EAAlBA,kBATQ;AAURC,kBAAAA,WAAW,EAAXA,WAVQ;AAWRE,kBAAAA,IAAI,EAAEvC,KAAK,CAACuC;AAXJ;AADgB,eAAD,CAJK;;AAAA;AAmBjCpC,cAAAA,cAAc,CAAC,oCAAD,CAAd;AACAqC,cAAAA,UAAU,CAAC,YAAY;AACrBrC,gBAAAA,cAAc,CAAC,EAAD,CAAd;AACD,eAFS,EAEP,IAFO,CAAV;;AApBiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAA1BwB,0BAA0B;AAAA;AAAA;AAAA,KAAhC;;AA0BA,MAAMc,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAMC,IAAI,GAAG1C,KAAb;AACA,QAAI,CAAC0C,IAAI,CAACb,QAAV,EAAoBa,IAAI,CAACb,QAAL,GAAgB,EAAhB;AACpBa,IAAAA,IAAI,CAACb,QAAL,CAAcC,SAAd,GAA0B,KAA1B;AACAY,IAAAA,IAAI,CAACb,QAAL,CAAcG,eAAd,GAAgC,IAAIW,IAAJ,GAAWC,cAAX,CAA0B,OAA1B,EAAmC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnC,CAAhC;AAEA,QAAMd,eAAe,GAAGlC,MAAM,CAAC,IAAI8C,IAAJ,CAASD,IAAI,CAACb,QAAL,CAAcE,eAAvB,CAAD,CAA9B;AACA,QAAMC,eAAe,GAAGnC,MAAM,CAAC,IAAI8C,IAAJ,CAASD,IAAI,CAACb,QAAL,CAAcG,eAAvB,CAAD,CAA9B;AAEA,QAAMc,eAAe,GAAGd,eAAe,CAACe,IAAhB,CAAqBhB,eAArB,EAAsC,SAAtC,CAAxB;AACA,QAAMiB,aAAa,GAAGN,IAAI,CAACb,QAAL,CAAcI,WAAd,GAA4B,EAAlD;AAEAS,IAAAA,IAAI,CAACb,QAAL,CAAcK,0BAAd,IAA4CY,eAA5C;AACAJ,IAAAA,IAAI,CAACb,QAAL,CAAcM,sBAAd,GAAuCc,MAAM,CAACP,IAAI,CAACb,QAAL,CAAcK,0BAAf,CAAN,GAAmDe,MAAM,CAACD,aAAD,CAAzD,GAA2EC,MAAM,CAACP,IAAI,CAACb,QAAL,CAAcO,kBAAf,CAAxH,CAbwB,CAexB;AACA;AACA;AACA;;AAEAnC,IAAAA,QAAQ,CAAC;AACPiD,MAAAA,IAAI,EAAE,oBADC;AAEPC,MAAAA,OAAO,EAAE;AAAEtB,QAAAA,QAAQ,EAAEa,IAAI,CAACb,QAAjB;AAA2BuB,QAAAA,IAAI,EAAEV,IAAI,CAACU;AAAtC;AAFF,KAAD,CAAR;AAIAzB,IAAAA,0BAA0B,qBAA1B;AACD,GAzBD;;AA2BA,MAAM0B,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMX,IAAI,GAAG1C,KAAb;AACA,QAAI,CAAC0C,IAAI,CAACb,QAAV,EAAoBa,IAAI,CAACb,QAAL,GAAgB,EAAhB;AACpBa,IAAAA,IAAI,CAACb,QAAL,CAAcC,SAAd,GAA0B,IAA1B;AACAY,IAAAA,IAAI,CAACb,QAAL,CAAcE,eAAd,GAAgC,IAAIY,IAAJ,GAAWC,cAAX,CAA0B,OAA1B,EAAmC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnC,CAAhC;AACAH,IAAAA,IAAI,CAACb,QAAL,CAAcG,eAAd,GAAgC,IAAhC;AAEAU,IAAAA,IAAI,CAACb,QAAL,CAAcI,WAAd,GAA4B,GAA5B,CAPyB,CAQzB;AACA;AACA;AACA;;AAEAhC,IAAAA,QAAQ,CAAC;AACPiD,MAAAA,IAAI,EAAE,oBADC;AAEPC,MAAAA,OAAO,EAAE;AAAEtB,QAAAA,QAAQ,EAAEa,IAAI,CAACb,QAAjB;AAA2BuB,QAAAA,IAAI,EAAEV,IAAI,CAACU;AAAtC;AAFF,KAAD,CAAR;AAIAzB,IAAAA,0BAA0B,oBAA1B;AACD,GAlBD;;AAsBA,MAAM2B,gBAAgB;AAAA,yEAAG,kBAAOC,IAAP,EAAkBC,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AACf/B,cAAAA,EADe,GACDzB,KADC,CACfyB,EADe,EACXgC,KADW,GACDzD,KADC,CACXyD,KADW;AAEjBC,cAAAA,iBAFiB,GAEIH,IAAI,CAACI,aAAL,GAAqB,CAACV,MAAM,CAACM,IAAI,CAACG,iBAAN,CAAN,GAAgC,CAAjC,EAAoCE,QAApC,EAArB,GAAsEL,IAAI,CAACG,iBAF/E;AAGjBG,cAAAA,SAHiB,GAGLJ,KAHK,aAGLA,KAHK,uBAGLA,KAAK,CAAEK,SAAP,CAAiB,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACC,MAAF,KAAaT,IAAI,CAACS,MAAtB;AAAA,eAAlB,CAHK;AAAA,6BAMfR,MANe;AAAA,gDAOhB,MAPgB,wBAwBhB,OAxBgB;AAAA;;AAAA;AAQbS,cAAAA,UARa,GAQA,IAAItB,IAAJ,GAAWC,cAAX,CAA0B,OAA1B,EAAmC;AAAEC,gBAAAA,QAAQ,EAAE;AAAZ,eAAnC,CARA;AASbqB,cAAAA,WATa,GASCC,sBAAsB,CAACZ,IAAI,CAACa,SAAN,EAAiBH,UAAjB,CATvB;AAWnBI,cAAAA,WAAW,GAAG;AACZ5C,gBAAAA,EAAE,EAAFA,EADY;AAEZuC,gBAAAA,MAAM,EAAET,IAAI,CAACS,MAFD;AAGZM,gBAAAA,WAAW,EAAEf,IAAI,CAACe,WAHN;AAIZF,gBAAAA,SAAS,EAAEb,IAAI,CAACa,SAJJ;AAKZH,gBAAAA,UAAU,EAAVA,UALY;AAMZM,gBAAAA,WAAW,EAAEhB,IAAI,CAACgB,WANN;AAOZZ,gBAAAA,aAAa,EAAEJ,IAAI,CAACI,aAPR;AAQZD,gBAAAA,iBAAiB,EAAjBA,iBARY;AASZQ,gBAAAA,WAAW,EAAEA,WATD;AAUZM,gBAAAA,MAAM,EAAE;AAVI,eAAd;AAXmB;;AAAA;AAyBbJ,cAAAA,SAzBa,GAyBD,IAAIzB,IAAJ,GAAWC,cAAX,CAA0B,OAA1B,EAAmC;AAAEC,gBAAAA,QAAQ,EAAE;AAAZ,eAAnC,CAzBC;AA0BnBwB,cAAAA,WAAW,GAAG;AACZ5C,gBAAAA,EAAE,EAAFA,EADY;AAEZuC,gBAAAA,MAAM,EAAET,IAAI,CAACS,MAFD;AAGZM,gBAAAA,WAAW,EAAEf,IAAI,CAACe,WAHN;AAIZF,gBAAAA,SAAS,EAAEA,SAJC;AAKZH,gBAAAA,UAAU,EAAEV,IAAI,CAACU,UALL;AAMZM,gBAAAA,WAAW,EAAEhB,IAAI,CAACgB,WANN;AAOZZ,gBAAAA,aAAa,EAAEJ,IAAI,CAACI,aAPR;AAQZD,gBAAAA,iBAAiB,EAAjBA,iBARY;AASZQ,gBAAAA,WAAW,EAAEX,IAAI,CAACW,WATN;AAUZM,gBAAAA,MAAM,EAAEjB,IAAI,CAACiB;AAVD,eAAd;AA1BmB;;AAAA;AAwCnBH,cAAAA,WAAW,GAAGd,IAAd;AAxCmB;;AAAA;AA4CrBE,cAAAA,KAAK,CAACI,SAAD,CAAL,GAAmBQ,WAAnB;AACApE,cAAAA,QAAQ,CAAC;AACPiD,gBAAAA,IAAI,EAAE,mBADC;AAEPC,gBAAAA,OAAO,EAAE;AAAEM,kBAAAA,KAAK,EAALA;AAAF;AAFF,eAAD,CAAR;AA7CqB;AAAA,qBAkDR5C,sBAAsB,CAAC;AAClCyB,gBAAAA,SAAS,oBACJ+B,WADI;AADyB,eAAD,CAlDd;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhBf,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAyDA,MAAMa,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,SAAD,EAAoBH,UAApB,EAA2C;AACxE,QAAMQ,GAAG,GAAG,IAAI9B,IAAJ,CAASyB,SAAT,CAAZ;AACA,QAAMM,GAAG,GAAG,IAAI/B,IAAJ,CAASsB,UAAT,CAAZ;AAEA,QAAIlB,IAAI,GAAG,CAAC2B,GAAG,CAACC,OAAJ,KAAgBF,GAAG,CAACE,OAAJ,EAAjB,IAAkC,IAA7C;AACA5B,IAAAA,IAAI,IAAK,KAAK,EAAd;AAEA,WAAO6B,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,KAAL,CAAW/B,IAAX,CAAT,CAAP;AACD,GARD,CAnKkE,CA6KlE;;;AACA,MAAMgC,WAAW,GAAG,SAAdA,WAAc,CAClBC,cADkB,EAIf;AAAA,QAFHC,UAEG,uEAFU,EAEV;AAAA,QADHC,SACG,uEADiB,mBACjB;AACH7G,IAAAA,SAAS,CAAC;AACR8G,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,GADD;AAENC,QAAAA,MAAM,EAAE,MAFF;AAGNC,QAAAA,cAAc,EAAE,KAHV;AAINC,QAAAA,eAAe,EAAE,IAJX;AAKNN,QAAAA,SAAS,EAAEA;AALL,OAFA;AASRO,MAAAA,mBAAmB,EAAE,IATb;AAURC,MAAAA,SAAS,EAAEV,cAVH;AAWRW,MAAAA,cAAc,EAAE;AAAEC,QAAAA,IAAI,EAAEX;AAAR;AAXR,KAAD,CAAT;AAaD,GAlBD;;AAoBAY,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqC9F,KAArC;AACA,MAAM+F,CAAC,GAAG,oBAAA/F,KAAK,CAAC6B,QAAN,oEAAgBK,0BAAhB,IAA6C,EAA7C,GAAkD,CAA5D;AACA,MAAM8D,CAAC,GAAG,qBAAAhG,KAAK,CAAC6B,QAAN,sEAAgBK,0BAAhB,IAA6C,EAA7C,GAAkD,CAA5D;AACA,MAAM+D,eAAe,GAAGhD,MAAM,qBAACjD,KAAK,CAAC6B,QAAP,qDAAC,iBAAgBK,0BAAjB,CAAN,GAAqD,EAArD,GAA0De,MAAM,qBAACjD,KAAK,CAAC6B,QAAP,qDAAC,iBAAgBI,WAAjB,CAAxF;AACA,MAAMiE,YAAY,GAAGlG,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEyD,KAAP,CAAa0C,MAAb,CAAoB,UAAC5C,IAAD;AAAA,WAAWA,IAAI,CAACa,SAAL,CAAegC,MAAf,KAA0B,CAA1B,IAA+B7C,IAAI,CAACU,UAAL,CAAgBmC,MAAhB,KAA2B,CAA1D,IAA+D7C,IAAI,CAACiB,MAAL,KAAgB,KAA1F;AAAA,GAApB,CAArB;AACA,MAAM6B,eAAe,GAAGrG,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEyD,KAAP,CAAa0C,MAAb,CAAoB,UAAC5C,IAAD;AAAA,WAAWA,IAAI,CAACa,SAAL,CAAegC,MAAf,GAAwB,CAAxB,IAA6B7C,IAAI,CAACU,UAAL,CAAgBmC,MAAhB,KAA2B,CAAnE;AAAA,GAApB,CAAxB;AAEA,SACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,eADL;AAEE,IAAA,cAAc,EAAC,YAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,EASE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEE,MAAAA,UAAU,EAAE,UAAd;AAA0BC,MAAAA,YAAY,EAAE;AAAxC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEA,MAAAA,YAAY,EAAE;AAAhB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,KAAK,gCAAyB,qBAAAvG,KAAK,CAAC6B,QAAN,sEAAgBC,SAAhB,IAA4B,YAA5B,GAA2C,SAApE,CADP;AAEE,IAAA,QAAQ,EAAE,KAFZ;AAGE,IAAA,aAAa,EAAE,OAHjB,CAIE;AAJF;AAKE,IAAA,QAAQ,EAAE;AAAA;;AAAA,aAAM,qBAAA9B,KAAK,CAAC6B,QAAN,sEAAgBC,SAAhB,IAA4BW,WAAW,EAAvC,GAA2CY,YAAY,EAA7D;AAAA,KALZ,CAME;AANF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAYE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEmD,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACM,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,kBADL;AAEE,IAAA,cAAc,EAAC,WAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADN,CADA,EAOI,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGzG,KAAK,CAACuB,IADT,CAPJ,CAZF,EAwBE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEiF,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,cAAc,EAAC,aAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADJ,EAOI,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACMV,CADN,cACW9C,MAAM,CAAC+C,CAAD,CAAN,IAAa,CAAb,GAAiBA,CAAjB,GAAqB,MAAMA,CADtC,SAPJ,CAxBF,EAqCE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEQ,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,eADL;AAEE,IAAA,cAAc,EAAC,eAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAOE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACK,qBAAAzG,KAAK,CAAC6B,QAAN,+FAAgBI,WAAhB,gFAA6ByE,OAA7B,CAAqC,CAArC,MAA2C,GADhD,EAPF,CArCF,EAiDE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEF,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,gBADL;AAEE,IAAA,cAAc,EAAC,iBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAOE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACOR,eADP,EAPF,CAjDF,EA6DE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEO,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,oBADL;AAEE,IAAA,cAAc,EAAC,oBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAOE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCACOzG,KAAK,CAAC6B,QADb,qDACO,iBAAgBO,kBADvB,EAPF,CA7DF,EAyEE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEoE,MAAAA,WAAW,EAAE,MAAf;AAAuBC,MAAAA,QAAQ,EAAE;AAAjC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,wBADL;AAEE,IAAA,cAAc,EAAC,wBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADF,EAOI,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACO,qBAAAzG,KAAK,CAAC6B,QAAN,+FAAgBM,sBAAhB,gFAAwCuE,OAAxC,CAAgD,CAAhD,MAAsD,GAD7D,EAPJ,CAzEF,EAqFI,CAAAL,eAAe,SAAf,IAAAA,eAAe,WAAf,YAAAA,eAAe,CAAED,MAAjB,IAA0B,CAA1B,IACA,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,EAAE,EAAE,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,iBAArB;AAAuC,IAAA,cAAc,EAAC,iBAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,EAME,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AACE,IAAA,KAAK,EAAEC,eADT;AAEE,IAAA,SAAS,EAAE,mBAAC9C,IAAD,EAAYoD,KAAZ;AAAA,aACT,MAAC,SAAD;AACE,QAAA,EAAE,EAAEA,KADN;AAEE,QAAA,GAAG,EAAEA,KAFP;AAGE,QAAA,KAAK,EAAEpD,IAAI,CAACe,WAHd;AAIE,QAAA,OAAO,wBAAiBzE,MAAM,CAAC,IAAI8C,IAAJ,CAASY,IAAI,CAACa,SAAd,CAAD,CAAN,CAAiCwC,MAAjC,CAAwC,iBAAxC,CAAjB,MAJT;AAKE,QAAA,OAAO,EAAErD,IAAI,CAACiB,MALhB;AAME,QAAA,QAAQ,EAAE;AAAA,iBAAMlB,gBAAgB,CAACC,IAAD,EAAO,SAAP,CAAtB;AAAA,SANZ;AAOE,QAAA,IAAI,EAAC,SAPP;AAQE,QAAA,OAAO,EAAE,KARX;AASE,QAAA,QAAQ,EAAE;AAAA,iBAAMD,gBAAgB,CAACC,IAAD,EAAO,MAAP,CAAtB;AAAA,SATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADS;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANF,CADF,CADA,CAtFJ,EAqHE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,EAAE,EAAE,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,cAArB;AAAoC,IAAA,cAAc,EAAC,cAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,EAME,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AACE,IAAA,KAAK,EAAE2C,YADT;AAEE,IAAA,SAAS,EAAE,mBAAC3C,IAAD,EAAYoD,KAAZ,EAA2B;AAAA;;AAEpC,UAAI,sBAAApD,IAAI,CAACgB,WAAL,wEAAkB6B,MAAlB,IAA2B,CAA/B,EAAkC,CAEjC,CAFD,MAEO,IAAI,uBAAA7C,IAAI,CAACgB,WAAL,0EAAkB6B,MAAlB,IAA2B,CAA/B,EAAiC;AACtC,YAAM7B,WAAW,GAAG1E,MAAM,CAAC0D,IAAI,CAACgB,WAAN,EAAmB,WAAnB,CAA1B;AACA,YAAMsC,KAAK,GAAGhH,MAAM,CAAC,IAAI8C,IAAJ,EAAD,EAAa,WAAb,CAApB;AACAkD,QAAAA,OAAO,CAACC,GAAR,CAAavB,WAAW,CAACuC,MAAZ,CAAmBD,KAAnB,EAA0B,MAA1B,CAAb;AAEAhB,QAAAA,OAAO,CAACC,GAAR,CAAavB,WAAW,CAACuC,MAAZ,CAAmBD,KAAnB,EAA0B,KAA1B,CAAb;AACD;;AACD,aACE,MAAC,SAAD;AACE,QAAA,EAAE,EAAEF,KADN;AAEE,QAAA,GAAG,EAAEA,KAFP;AAGE,QAAA,QAAQ,EAAE,KAHZ;AAIE,QAAA,KAAK,EAAEpD,IAAI,CAACe,WAJd;AAKE,QAAA,OAAO,4BAAqBzE,MAAM,CAAC,IAAI8C,IAAJ,CAASY,IAAI,CAACgB,WAAd,CAAD,CAAN,CAAmCqC,MAAnC,CAA0C,iBAA1C,CAArB,CALT;AAME,QAAA,OAAO,EAAErD,IAAI,CAACiB,MANhB;AAOE,QAAA,QAAQ,EAAE;AAAA,iBAAMlB,gBAAgB,CAACC,IAAD,EAAO,SAAP,CAAtB;AAAA,SAPZ;AAQE,QAAA,IAAI,EAAC,SARP;AASE,QAAA,MAAM,EAAE;AAAA,iBAAMD,gBAAgB,CAACC,IAAD,EAAM,OAAN,CAAtB;AAAA,SATV;AAUE,QAAA,SAAS,EAAE,KAVb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAaE,KA1BN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANF,CADF,CADF,CArHF,EAgKE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,EAAE,EAAE,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,WAArB;AAAiC,IAAA,cAAc,EAAC,WAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,EAME,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AACE,IAAA,KAAK,EAAEvD,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEyD,KAAP,CAAa0C,MAAb,CAAoB,UAAC5C,IAAD;AAAA,aAAWA,IAAI,CAACiB,MAAL,KAAgB,IAA3B;AAAA,KAApB,CADT;AAEE,IAAA,SAAS,EAAE,mBAACjB,IAAD,EAAYoD,KAAZ;AAAA,aACT,MAAC,SAAD;AACE,QAAA,EAAE,EAAEA,KADN;AAEE,QAAA,GAAG,EAAEA,KAFP;AAGE,QAAA,KAAK,EAAEpD,IAAI,CAACe,WAHd;AAIE,QAAA,OAAO,wBAAiBzE,MAAM,CAAC,IAAI8C,IAAJ,CAASY,IAAI,CAACa,SAAd,CAAD,CAAN,CAAiCwC,MAAjC,CAAwC,iBAAxC,CAAjB,2BAA4F/G,MAAM,CAAC,IAAI8C,IAAJ,CAASY,IAAI,CAACU,UAAd,CAAD,CAAN,CAAkC2C,MAAlC,CAAyC,iBAAzC,CAA5F,yBAAsKrD,IAAI,CAACW,WAA3K,OAJT;AAKE,QAAA,OAAO,EAAEX,IAAI,CAACiB,MALhB;AAME,QAAA,QAAQ,EAAE;AAAA,iBAAMlB,gBAAgB,CAACC,IAAD,EAAO,SAAP,CAAtB;AAAA,SANZ;AAOE,QAAA,IAAI,EAAC,SAPP;AAQE,QAAA,SAAS,EAAE,KARb;AASE,QAAA,OAAO,EAAE,KATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADS;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANF,CADF,CADF,CAhKF,CATF,CADF,CADF;AA6MD,CAtZD;;GAAMzD,W;UASuB3B,W,EACSA,W,EAEHA,W,EACAA,W,EACAA,W,EACGA,W,EACIA,W,EACJA,W,EACJA,W,EACnBuB,O;;;KAnBTI,W;AAwZN,eAAeA,WAAf","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { Col } from 'react-styled-flexboxgrid';\nimport { openModal } from '@redq/reuse-modal';\nimport Router, { useRouter } from 'next/router';\nimport RadioCardTWO from 'components/radio-card/radio-card-two';\nimport RadioCard from 'components/radio-card/radio-card';\nimport { WorkContext } from 'contexts/work/work.context';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport { DELETE_ADDRESS, SETPRIMARY_ADDRESS } from 'graphql/mutation/address';\nimport { UPDATE_USER_TODO_TASKS, UPDATE_USER_WORK_INFO } from 'graphql/mutation/user';\nimport { CHANGE_PASSWORD } from 'graphql/mutation/changePassword';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { DELETE_PHONENUMBER, SETPRIMARY_PHONENUMBER } from 'graphql/mutation/phone';\nimport StripePaymentForm from 'features/payment/stripe-form';\nimport {\n  SettingsForm,\n  SettingsFormContent,\n  HeadingSection,\n  Title,\n  Row,\n  ButtonGroup,\n  SuccessMsg,\n  ErrorMsg\n} from './work.style';\nimport RadioGroupTwo from 'components/radio-group/radio-group-two';\nimport RadioGroupThree from 'components/radio-group/radio-group-three';\n\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport UpdateAddressTwo from 'components/address-card/address-card-two';\nimport UpdateContact from 'components/contact-card/contact-card';\nimport { Button } from 'components/button/button';\nimport { Input } from 'components/forms/input';\nimport { UPDATE_ME } from 'graphql/mutation/me';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Label } from 'components/forms/label';\nimport { ItemCount } from 'components/cart-popup/cart-popup.style';\nimport Switch from 'components/switch/switch';\nimport moment from 'moment';\n\ntype WorkContentProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n};\n\nconst WorkContent: React.FC<WorkContentProps> = ({ deviceType }) => {\n  const { state, dispatch } = useContext(WorkContext);\n  const [userinfoMsg, setUserinfoMsg] = useState('');\n  const [isChambeanding, setChamba] = useState(false);\n  const [passwordChangeMsg, setPasswordChangeMsg] = useState('');\n  const {\n    authState: { isAuthenticated },\n    authDispatch,\n  } = React.useContext<any>(AuthContext);\n  const [updateMeMutation] = useMutation(UPDATE_ME);\n  const [deletePaymentCardMutation] = useMutation(DELETE_CARD);\n\n  const [updateUserTodoMutation] = useMutation(UPDATE_USER_TODO_TASKS);\n  const [updateUserInfoMutation] = useMutation(UPDATE_USER_WORK_INFO);\n  const [changePasswordMutation] = useMutation(CHANGE_PASSWORD);\n  const [deletePhoneNumberMutation] = useMutation(DELETE_PHONENUMBER);\n  const [setprimaryPhoneNumberMutation] = useMutation(SETPRIMARY_PHONENUMBER);\n  const [setprimaryAddressMutation] = useMutation(SETPRIMARY_ADDRESS);\n  const [deleteAddressMutation] = useMutation(DELETE_ADDRESS);\n  const intl = useIntl();\n \n\n  const { \n    delivery_address, \n    card,\n    name,\n    email,\n    id,\n    phones\n  } = state;\n  \n  const updateUserWorkInfoMutation = async (logDescription: string) => {\n    const { workInfo, id } = state;\n    const { isWorking, startedWorkTime, stoppedWorkTime, ratePerHour, totalWorkingMinutesPerWeek, totalSalaryToPayWeekly, advancedSalaryPaid, taskRelated} = workInfo;\n    \n    await updateUserInfoMutation({\n      variables: {\n         id,\n         isWorking,\n         startedWorkTime,\n         stoppedWorkTime,\n         ratePerHour,\n         logDescription,\n         totalWorkingMinutesPerWeek,\n         totalSalaryToPayWeekly,\n         advancedSalaryPaid,\n         taskRelated,\n         role: state.role\n        }\n    });\n    setUserinfoMsg('Update user work info successfully');\n    setTimeout(function () {\n      setUserinfoMsg('');\n    }, 8000)\n  };\n\n\n  const stopWorking = () => {\n    const user = state;\n    if (!user.workInfo) user.workInfo = {};\n    user.workInfo.isWorking = false;\n    user.workInfo.stoppedWorkTime = new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' });\n\n    const startedWorkTime = moment(new Date(user.workInfo.startedWorkTime));\n    const stoppedWorkTime = moment(new Date(user.workInfo.stoppedWorkTime));\n\n    const workedInMinutes = stoppedWorkTime.diff(startedWorkTime, 'minutes');\n    const ratePerMinute = user.workInfo.ratePerHour / 60;\n\n    user.workInfo.totalWorkingMinutesPerWeek += workedInMinutes;\n    user.workInfo.totalSalaryToPayWeekly = Number(user.workInfo.totalWorkingMinutesPerWeek) * Number(ratePerMinute) - Number(user.workInfo.advancedSalaryPaid);\n\n    // user.logs.push({\n    //   logDescription: ,\n    //   timestamp: new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' })\n    // });\n\n    dispatch({\n      type: 'HANDLE_WORK_CHANGE',\n      payload: { workInfo: user.workInfo, logs: user.logs },\n    });\n    updateUserWorkInfoMutation(`finished working.`);\n  }\n\n  const startWorking = () => {\n    const user = state;\n    if (!user.workInfo) user.workInfo = {};\n    user.workInfo.isWorking = true;\n    user.workInfo.startedWorkTime = new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' });\n    user.workInfo.stoppedWorkTime = null;\n\n    user.workInfo.ratePerHour = 300;\n    // user.logs.push({\n    //   logDescription: ,\n    //   timestamp: new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' })\n    // })\n\n    dispatch({\n      type: 'HANDLE_WORK_CHANGE',\n      payload: { workInfo: user.workInfo, logs: user.logs },\n    });\n    updateUserWorkInfoMutation(`started working.`);\n  };\n\n\n  \n  const handleTaskChange = async (task: any, action: string) => {\n    const { id, tasks } = state;\n    const completationTimes =  task.isRepetitived ? (Number(task.completationTimes)+ 1).toString() : task.completationTimes;\n    const taskIndex = tasks?.findIndex(t => t.taskId === task.taskId);\n    let taskUpdated;\n\n    switch (action) {\n      case 'stop':\n        const finishDate = new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' });\n        const workedHours = getDurationTimeInHours(task.startDate, finishDate);\n\n        taskUpdated = {\n          id,\n          taskId: task.taskId,\n          description: task.description,\n          startDate: task.startDate,\n          finishDate,\n          plannedDate: task.plannedDate,\n          isRepetitived: task.isRepetitived,\n          completationTimes,\n          workedHours: workedHours,\n          isDone: true\n        }\n        break;\n      case 'start':\n        const startDate = new Date().toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' });\n        taskUpdated = {\n          id,\n          taskId: task.taskId,\n          description: task.description,\n          startDate: startDate,\n          finishDate: task.finishDate,\n          plannedDate: task.plannedDate,\n          isRepetitived: task.isRepetitived,\n          completationTimes,\n          workedHours: task.workedHours,\n          isDone: task.isDone\n        }\n        break;\n      default:\n        taskUpdated = task;\n        break;\n      }\n\n      tasks[taskIndex] = taskUpdated;\n      dispatch({\n        type: 'HANDLE_TODO_TASKS',\n        payload: { tasks },\n      });\n\n      return await updateUserTodoMutation({\n        variables: {\n          ...taskUpdated,\n        },\n      });\n    }\n\n  const getDurationTimeInHours = (startDate: string, finishDate: string) => {\n    const dt1 = new Date(startDate);\n    const dt2 = new Date(finishDate);\n\n    let diff = (dt2.getTime() - dt1.getTime()) / 1000;\n    diff /= (60 * 60);\n\n    return Math.abs(Math.round(diff));\n  };\n\n  // Add or edit modal\n  const handleModal = (\n    modalComponent: any,\n    modalProps = {},\n    className: string = 'add-address-modal'\n  ) => {\n    openModal({\n      show: true,\n      config: {\n        width: 360,\n        height: 'auto',\n        enableResizing: false,\n        disableDragging: true,\n        className: className,\n      },\n      closeOnClickOutside: true,\n      component: modalComponent,\n      componentProps: { item: modalProps },\n    });\n  };\n\n  console.log(\"working info changed:\", state)\n  const h = state.workInfo?.totalWorkingMinutesPerWeek / 60 | 0;\n  const m = state.workInfo?.totalWorkingMinutesPerWeek % 60 | 0;\n  const subtotalSalario = Number(state.workInfo?.totalWorkingMinutesPerWeek) / 60 * Number(state.workInfo?.ratePerHour);\n  const pendingTasks = state?.tasks.filter((task) => (task.startDate.length === 0 && task.finishDate.length === 0 && task.isDone === false))\n  const inProgressTasks = state?.tasks.filter((task) => (task.startDate.length > 1 && task.finishDate.length === 0));\n\n  return (\n    <SettingsForm>\n      <SettingsFormContent>\n        <HeadingSection>\n          <Title>\n            <FormattedMessage\n              id='workPageTitle'\n              defaultMessage='Ditto Farm'\n            />\n          </Title>\n        </HeadingSection>\n        <Col style={{ alignItems: 'flex-end', marginBottom: '50px' }}>\n          <Row style={{ marginBottom: '15px' }}>\n            <Switch \n              label={`Usted se encuentra: ${state.workInfo?.isWorking ? 'Chambeando' : 'Vagando'}`}\n              disabled={false}\n              labelPosition={'right'}\n              // className,\n              onUpdate={() => state.workInfo?.isWorking ? stopWorking() :startWorking() }\n              // style\n            />\n          </Row>\n\n          <Row>\n          <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n                <FormattedMessage\n                  id='profileNameField'\n                  defaultMessage='Your Name'\n                />\n              </Label>\n              <Label>\n                {state.name}\n              </Label>\n          </Row>\n\n          <Row>\n              <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n                <FormattedMessage\n                  id='workedHours'\n                  defaultMessage='workedHours'\n                />\n              </Label>\n              <Label>\n                {`${h}:${Number(m) >= 9 ? m : '0' + m} hs`}\n              </Label>\n          </Row>\n\n\n          <Row>\n            <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n              <FormattedMessage\n                id='salaryPerHour'\n                defaultMessage='salaryPerHour'\n              />\n            </Label>\n            <Label>\n            {`$${state.workInfo?.ratePerHour?.toFixed(2) || '-'}`}\n            </Label>\n          </Row>\n\n          <Row>\n            <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n              <FormattedMessage\n                id='subtotalSalary'\n                defaultMessage='Salary Subtotal'\n              />\n            </Label>\n            <Label>\n              {`$${subtotalSalario}`}\n            </Label>\n          </Row>\n\n          <Row>\n            <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n              <FormattedMessage\n                id='advancedSalaryPaid'\n                defaultMessage='advancedSalaryPaid'\n              />\n            </Label>\n            <Label>\n              {`$${state.workInfo?.advancedSalaryPaid}`}\n            </Label>\n          </Row>\n\n          <Row>\n            <Label style={{ marginRight: '15px', minWidth: '200px'}}>\n                <FormattedMessage\n                  id='totalSalaryToPayWeekly'\n                  defaultMessage='totalSalaryToPayWeekly'\n                />\n              </Label>\n              <Label>\n                {`$${state.workInfo?.totalSalaryToPayWeekly?.toFixed(2) || '-'}`}\n              </Label>\n          </Row>\n\n          { inProgressTasks?.length > 0 && (\n            <Row>\n            <Col xs={12} sm={12} md={12} lg={12}>\n              <SettingsFormContent>\n                <HeadingSection>\n                  <Title>\n                    <FormattedMessage id='inProgressTasks' defaultMessage='inProgressTasks' />\n                  </Title>\n                </HeadingSection>\n                <ButtonGroup>\n                  <RadioGroupThree\n                    items={inProgressTasks}\n                    component={(task: any, index: any) => (\n                      <RadioCard\n                        id={index}\n                        key={index}\n                        title={task.description}\n                        content={`Comenzaste: ${moment(new Date(task.startDate)).format('HH:mm A - MM/DD')}.`}\n                        checked={task.isDone}\n                        onChange={() => handleTaskChange(task, 'nothing')}\n                        name='contact'\n                        hasEdit={false}\n                        onDelete={() => handleTaskChange(task, 'stop')}\n                      />\n                    )}\n                  />\n                </ButtonGroup>\n              </SettingsFormContent>\n            </Col>\n          </Row>\n          )}\n\n          <Row>\n            <Col xs={12} sm={12} md={12} lg={12}>\n              <SettingsFormContent>\n                <HeadingSection>\n                  <Title>\n                    <FormattedMessage id='pendingTasks' defaultMessage='pendingTasks' />\n                  </Title>\n                </HeadingSection>\n                <ButtonGroup>\n                  <RadioGroupThree\n                    items={pendingTasks}\n                    component={(task: any, index: any) => {\n\n                      if (task.plannedDate?.length > 1) {\n                        \n                      } else if (task.plannedDate?.length > 1){\n                        const plannedDate = moment(task.plannedDate, 'MM/D/YYYY');\n                        const today = moment(new Date(), 'MM/D/YYYY');\n                        console.log( plannedDate.isSame(today, 'date') );\n\n                        console.log( plannedDate.isSame(today, 'day') );\n                      }\n                      return (\n                        <RadioCard\n                          id={index}\n                          key={index}\n                          disabled={false}\n                          title={task.description}\n                          content={`Fecha planeada: ${moment(new Date(task.plannedDate)).format('HH:mm A - MM/DD')}`}\n                          checked={task.isDone}\n                          onChange={() => handleTaskChange(task, 'contact')}\n                          name='contact'\n                          onEdit={() => handleTaskChange(task,'start')}\n                          hasDelete={false}\n                        />\n                      )}\n                    }\n                  />\n                </ButtonGroup>\n              </SettingsFormContent>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col xs={12} sm={12} md={12} lg={12}>\n              <SettingsFormContent>\n                <HeadingSection>\n                  <Title>\n                    <FormattedMessage id='doneTasks' defaultMessage='doneTasks' />\n                  </Title>\n                </HeadingSection>\n                <ButtonGroup>\n                  <RadioGroupThree\n                    items={state?.tasks.filter((task) => (task.isDone === true))}\n                    component={(task: any, index: any) => (\n                      <RadioCard\n                        id={index}\n                        key={index}\n                        title={task.description}\n                        content={`Comenzaste: ${moment(new Date(task.startDate)).format('HH:mm A - MM/DD')}. Terminaste: ${moment(new Date(task.finishDate)).format('HH:mm A - MM/DD')}. Tardaste: ${task.workedHours}hs`}\n                        checked={task.isDone}\n                        onChange={() => handleTaskChange(task, 'nothing')}\n                        name='contact'\n                        hasDelete={false}\n                        hasEdit={false}\n                      />\n                    )}\n                  />\n                </ButtonGroup>\n              </SettingsFormContent>\n            </Col>\n          </Row>\n\n        </Col>\n      </SettingsFormContent>\n    </SettingsForm>\n  );\n};\n\nexport default WorkContent;\n"]},"metadata":{},"sourceType":"module"}