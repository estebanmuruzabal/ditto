{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { Button } from 'components/button/button';\nimport RadioCard from 'components/radio-card/radio-card';\nimport RadioGroupTwo from 'components/radio-group/radio-group-two';\nimport RadioGroupThree from 'components/radio-group/radio-group-three';\nimport RadioCardTWO from 'components/radio-card/radio-card-two';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport UpdateContact from 'components/contact-card/contact-card';\nimport { DELETE_ADDRESS, SETPRIMARY_ADDRESS } from 'graphql/mutation/address';\nimport { DELETE_PHONENUMBER, SETPRIMARY_PHONENUMBER } from 'graphql/mutation/phone';\nimport { CREAT_ORDER } from 'graphql/mutation/order';\nimport { GET_COUPON } from 'graphql/query/coupon';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { DELETE_CONTACT } from 'graphql/mutation/contact';\nimport { CURRENCY } from 'utils/constant';\nimport { openModal } from '@redq/reuse-modal';\nimport { useMutation } from '@apollo/react-hooks';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport CheckoutWrapper, { CheckoutContainer, CheckoutInformation, InformationBox, DeliverySchedule, Heading, ButtonGroup, CheckoutSubmit, HaveCoupon, CouponBoxWrapper, CouponInputBox // Input,\n, CouponCode, RemoveCoupon, ErrorMsg, TermConditionText, TermConditionLink, CartWrapper, CalculationWrapper, OrderInfo, Title, ItemsWrapper, Items, Quantity, Multiplier, ItemInfo, Price, TextWrapper, Text, Bold, NoProductMsg, NoProductImg, IconWrapper } from './checkout-two.style';\nimport CouponBox from 'components/coupon-box/coupon-box';\nimport { Plus } from 'assets/icons/PlusMinus';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport Sticky from 'react-stickynode';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport { FormattedMessage } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { useWindowSize } from 'utils/useWindowSize';\nimport UpdateAddressTwo from 'components/address-card/address-card-two'; // The type of props Checkout Form receives\n\nvar OrderItem = function OrderItem(_ref) {\n  var product = _ref.product;\n  var id = product.id,\n      quantity = product.quantity,\n      title = product.title,\n      name = product.name,\n      unit = product.unit,\n      price = product.price,\n      salePrice = product.salePrice;\n  var displayPrice = salePrice ? salePrice : price;\n  return __jsx(Items, {\n    key: id\n  }, __jsx(Quantity, null, quantity), __jsx(Multiplier, null, \"x\"), __jsx(ItemInfo, null, name ? name : title, \" \", unit ? \"| \".concat(unit) : ''), __jsx(Price, null, CURRENCY, (displayPrice * quantity).toFixed(2)));\n};\n\nvar CheckoutWithSidebar = function CheckoutWithSidebar(_ref2) {\n  var token = _ref2.token,\n      deviceType = _ref2.deviceType;\n\n  var _useState = useState(false),\n      hasCoupon = _useState[0],\n      setHasCoupon = _useState[1];\n\n  var _useState2 = useState(''),\n      couponCode = _useState2[0],\n      setCouponCode = _useState2[1];\n\n  var _useState3 = useState(''),\n      couponError = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(''),\n      orderError = _useState4[0],\n      setOrderError = _useState4[1];\n\n  var _useState5 = useState(''),\n      checkoutError = _useState5[0],\n      setCheckoutError = _useState5[1];\n\n  var _useContext = useContext(ProfileContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var _useLocale = useLocale(),\n      isRtl = _useLocale.isRtl;\n\n  var _useCart = useCart(),\n      items = _useCart.items,\n      removeCoupon = _useCart.removeCoupon,\n      coupon = _useCart.coupon,\n      applyCoupon = _useCart.applyCoupon,\n      clearCart = _useCart.clearCart,\n      cartItemsCount = _useCart.cartItemsCount,\n      calculatePrice = _useCart.calculatePrice,\n      calculateDiscount = _useCart.calculateDiscount,\n      calculateSubTotalPrice = _useCart.calculateSubTotalPrice,\n      isRestaurant = _useCart.isRestaurant,\n      toggleRestaurant = _useCart.toggleRestaurant;\n\n  var cartProduct = null;\n\n  if (items.length > 0) {\n    cartProduct = items.map(function (item, index) {\n      return {\n        product_id: item.id,\n        unit: item.unit,\n        quantity: Number(item.quantity),\n        sale_price: item.sale_price,\n        price: item.price,\n        image: item.images[0],\n        name: item.name\n      };\n    });\n  }\n\n  var _useState6 = useState(false),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      isValid = _useState7[0],\n      setIsValid = _useState7[1];\n\n  var _useState8 = useState({\n    contact_number: '',\n    payment_option_id: '',\n    delivery_method_id: '',\n    coupon_code: '',\n    delivery_address: null,\n    products: null\n  }),\n      submitResult = _useState8[0],\n      setSubmitResult = _useState8[1];\n\n  var delivery_address = state.delivery_address,\n      contact = state.contact,\n      paymentMethods = state.paymentMethods,\n      phones = state.phones,\n      name = state.name,\n      email = state.email,\n      id = state.id,\n      deliveryMethods = state.deliveryMethods; //set mututions\n\n  var _useMutation = useMutation(SETPRIMARY_ADDRESS),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      setprimaryAddressMutation = _useMutation2[0];\n\n  var _useMutation3 = useMutation(DELETE_ADDRESS),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      deleteAddressMutation = _useMutation4[0];\n\n  var _useMutation5 = useMutation(SETPRIMARY_PHONENUMBER),\n      _useMutation6 = _slicedToArray(_useMutation5, 1),\n      setprimaryPhoneNumberMutation = _useMutation6[0];\n\n  var _useMutation7 = useMutation(DELETE_PHONENUMBER),\n      _useMutation8 = _slicedToArray(_useMutation7, 1),\n      deletePhoneNumberMutation = _useMutation8[0];\n\n  var _useMutation9 = useMutation(CREAT_ORDER),\n      _useMutation10 = _slicedToArray(_useMutation9, 1),\n      setOrderMutation = _useMutation10[0];\n\n  var _useMutation11 = useMutation(DELETE_CONTACT),\n      _useMutation12 = _slicedToArray(_useMutation11, 1),\n      deleteContactMutation = _useMutation12[0];\n\n  var _useMutation13 = useMutation(DELETE_CARD),\n      _useMutation14 = _slicedToArray(_useMutation13, 1),\n      deletePaymentCardMutation = _useMutation14[0];\n\n  var size = useWindowSize();\n\n  var _useMutation15 = useMutation(GET_COUPON),\n      _useMutation16 = _slicedToArray(_useMutation15, 1),\n      appliedCoupon = _useMutation16[0];\n\n  var selectedAddress = delivery_address && delivery_address.find(function (item) {\n    return item.is_primary === true;\n  });\n  var selectedContact = phones.find(function (item) {\n    return item.is_primary === true;\n  });\n  useEffect(function () {\n    removeCoupon();\n    setHasCoupon(false);\n    setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n      delivery_address: \"Title: \".concat(selectedAddress && selectedAddress.title, \", \\n      District: \").concat(selectedAddress && selectedAddress.district, \",  \\n      Division: \").concat(selectedAddress && selectedAddress.division, \",  \\n      Region: \").concat(selectedAddress && selectedAddress.region, \",  \\n      Division: \").concat(selectedAddress && selectedAddress.address, \"\\n      \"),\n      products: cartProduct,\n      contact_number: selectedContact.number\n    }));\n\n    if (calculatePrice() > 0 && cartItemsCount > 0 && delivery_address && delivery_address.length && phones.length && paymentMethods.length && deliveryMethods.length) {\n      setIsValid(true);\n    }\n  }, [state]); // Add or edit modal\n\n  var handleModal = function handleModal(modalComponent) {\n    var modalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'add-address-modal';\n    openModal({\n      show: true,\n      config: {\n        width: 360,\n        height: 'auto',\n        enableResizing: false,\n        disableDragging: true,\n        className: className\n      },\n      closeOnClickOutside: true,\n      component: modalComponent,\n      componentProps: {\n        item: modalProps\n      }\n    });\n  };\n\n  var handleEditDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item, index, type, name) {\n      var modalComponent;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(type === 'edit')) {\n                _context.next = 5;\n                break;\n              }\n\n              modalComponent = name === 'address' ? UpdateAddressTwo : UpdateContact;\n              handleModal(modalComponent, {\n                item: item,\n                id: id\n              });\n              _context.next = 25;\n              break;\n\n            case 5:\n              _context.t0 = name;\n              _context.next = _context.t0 === 'contact' ? 8 : _context.t0 === 'address' ? 16 : 24;\n              break;\n\n            case 8:\n              if (!(phones.length > 1)) {\n                _context.next = 15;\n                break;\n              }\n\n              dispatch({\n                type: 'DELETE_CONTACT',\n                payload: item.id\n              });\n              _context.next = 12;\n              return deletePhoneNumberMutation({\n                variables: {\n                  id: id,\n                  phoneId: item.id\n                }\n              });\n\n            case 12:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 15:\n              return _context.abrupt(\"return\", null);\n\n            case 16:\n              if (!(delivery_address.length > 1)) {\n                _context.next = 23;\n                break;\n              }\n\n              dispatch({\n                type: 'DELETE_ADDRESS',\n                payload: item.id\n              });\n              _context.next = 20;\n              return deleteAddressMutation({\n                variables: {\n                  id: id,\n                  addressId: item.id\n                }\n              });\n\n            case 20:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 23:\n              return _context.abrupt(\"return\", null);\n\n            case 24:\n              return _context.abrupt(\"return\", false);\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleEditDelete(_x, _x2, _x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handlePrimary = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item, name) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = name;\n              _context2.next = _context2.t0 === 'contact' ? 3 : _context2.t0 === 'address' ? 7 : 11;\n              break;\n\n            case 3:\n              dispatch({\n                type: 'SET_PRIMARY_CONTACT',\n                payload: item.id\n              });\n              _context2.next = 6;\n              return setprimaryPhoneNumberMutation({\n                variables: {\n                  id: id,\n                  phoneId: item.id\n                }\n              });\n\n            case 6:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 7:\n              dispatch({\n                type: 'SET_PRIMARY_ADDRESS',\n                payload: item.id\n              });\n              _context2.next = 10;\n              return setprimaryAddressMutation({\n                variables: {\n                  id: id,\n                  addressId: item.id\n                }\n              });\n\n            case 10:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 11:\n              return _context2.abrupt(\"return\", false);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handlePrimary(_x5, _x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleApplyCoupon = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _yield$appliedCoupon, data, errors;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (couponCode) {\n                _context3.next = 3;\n                break;\n              }\n\n              setError('Invalid Coupon');\n              return _context3.abrupt(\"return\", null);\n\n            case 3:\n              _context3.next = 5;\n              return appliedCoupon({\n                variables: {\n                  code: couponCode\n                }\n              });\n\n            case 5:\n              _yield$appliedCoupon = _context3.sent;\n              data = _yield$appliedCoupon.data;\n              errors = _yield$appliedCoupon.errors;\n\n              if (!(!data.getCoupon.coupon && data.getCoupon.message && !data.getCoupon.message.status)) {\n                _context3.next = 11;\n                break;\n              }\n\n              setError('Invalid Coupon');\n              return _context3.abrupt(\"return\", null);\n\n            case 11:\n              if (!errors) {\n                _context3.next = 14;\n                break;\n              }\n\n              setError('Invalid Coupon');\n              return _context3.abrupt(\"return\", null);\n\n            case 14:\n              if (data.getCoupon.coupon && data.getCoupon.coupon.percentage) {\n                applyCoupon(data.getCoupon.coupon);\n                setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n                  coupon_code: couponCode,\n                  products: cartProduct\n                }));\n                setCouponCode('');\n              } else {\n                setError('Invalid Coupon');\n              }\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleApplyCoupon() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleOnUpdate = function handleOnUpdate(e) {\n    setCouponCode(e.currentTarget.value);\n  };\n\n  var setErrorFor5Sec = function setErrorFor5Sec(messageId) {\n    var a = __jsx(FormattedMessage, {\n      id: messageId\n    });\n\n    setCheckoutError(a);\n    setTimeout(function () {\n      return setCheckoutError(null);\n    }, 1500);\n    return null;\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var otherSubmitResult, contact_number, payment_option_id, delivery_method_id, delivery_address, coupon_code, products, customer_id, sub_total, total, discount_amount, _yield$setOrderMutati, orderCreateError;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              otherSubmitResult = {\n                customer_id: id,\n                sub_total: Number(calculateSubTotalPrice()),\n                total: Number(calculatePrice()),\n                discount_amount: Number(calculateDiscount())\n              };\n              contact_number = submitResult.contact_number, payment_option_id = submitResult.payment_option_id, delivery_method_id = submitResult.delivery_method_id, delivery_address = submitResult.delivery_address, coupon_code = submitResult.coupon_code, products = submitResult.products;\n              customer_id = otherSubmitResult.customer_id, sub_total = otherSubmitResult.sub_total, total = otherSubmitResult.total, discount_amount = otherSubmitResult.discount_amount;\n              console.log('total = ', typeof total);\n              console.log('sub_total = ', typeof sub_total);\n              console.log('discount_amount = ', typeof discount_amount);\n              console.log('product-price = ', products);\n              if (!delivery_address) setErrorFor5Sec('checkoutDeliveryAddressInvalid');\n              if (!delivery_method_id) setErrorFor5Sec('checkoutDeliveryMethodInvalid');\n              if (!contact_number) setErrorFor5Sec('checkoutContactNumberInvalid');\n              if (!payment_option_id) setErrorFor5Sec('checkoutPaymentMethodInvalid');\n\n              if (!(!customer_id || !products)) {\n                _context4.next = 14;\n                break;\n              }\n\n              setCheckoutError('Please place a valid order!');\n              return _context4.abrupt(\"return\", null);\n\n            case 14:\n              if (!confirm('Are you sure? You want to place this order?')) {\n                _context4.next = 21;\n                break;\n              }\n\n              _context4.next = 17;\n              return setOrderMutation({\n                variables: {\n                  input: {\n                    customer_id: customer_id,\n                    contact_number: contact_number,\n                    payment_option_id: payment_option_id,\n                    delivery_method_id: delivery_method_id,\n                    delivery_address: delivery_address,\n                    sub_total: sub_total,\n                    total: total,\n                    coupon_code: coupon_code,\n                    discount_amount: discount_amount,\n                    products: products\n                  }\n                }\n              });\n\n            case 17:\n              _yield$setOrderMutati = _context4.sent;\n              orderCreateError = _yield$setOrderMutati.errors;\n\n              if (!orderCreateError) {\n                setLoading(true);\n\n                if (isValid) {\n                  clearCart();\n                  removeCoupon();\n                  setHasCoupon(false);\n                  Router.push('/order');\n                }\n\n                setLoading(false);\n                setIsValid(false);\n              }\n\n              if (orderCreateError) {\n                setOrderError(orderCreateError[0].message);\n              }\n\n            case 21:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleSubmit() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"form\", null, __jsx(CheckoutWrapper, null, __jsx(CheckoutContainer, null, __jsx(CheckoutInformation, null, __jsx(InformationBox, null, __jsx(Heading, null, __jsx(FormattedMessage, {\n    id: \"checkoutDeliveryAddress\",\n    defaultMessage: \"Delivery Address\"\n  })), __jsx(ButtonGroup, null, __jsx(RadioGroupTwo, {\n    items: delivery_address,\n    component: function component(item, index) {\n      return __jsx(RadioCardTWO, {\n        id: index,\n        key: index,\n        address: item.address,\n        district: item.district,\n        division: item.division,\n        title: item.title,\n        region: item.region,\n        name: \"address\",\n        isChecked: item.is_primary === true,\n        onClick: function onClick() {\n          return setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n            delivery_address: \"Title: \".concat(item.title, \", \\n                        District: \").concat(item.district, \",  \\n                        Division: \").concat(item.division, \",  \\n                        Region: \").concat(item.region, \",  \\n                        Division: \").concat(item.address, \"\\n                        \"),\n            products: cartProduct\n          }));\n        },\n        onChange: function onChange() {\n          return handlePrimary(item, 'address');\n        },\n        onEdit: function onEdit() {\n          return handleEditDelete(item, index, 'edit', 'address');\n        },\n        onDelete: function onDelete() {\n          return handleEditDelete(item, index, 'delete', 'address');\n        }\n      });\n    },\n    secondaryComponent: __jsx(Button, {\n      className: \"addButton\",\n      variant: \"text\",\n      type: \"button\",\n      onClick: function onClick() {\n        return handleModal(UpdateAddressTwo, {\n          item: {},\n          id: id\n        }, 'add-address-modal');\n      }\n    }, __jsx(IconWrapper, null, __jsx(Plus, {\n      width: \"10px\"\n    })), __jsx(FormattedMessage, {\n      id: \"addNew\",\n      defaultMessage: \"Add New\"\n    }))\n  }))), __jsx(InformationBox, null, __jsx(DeliverySchedule, null, __jsx(Heading, null, __jsx(FormattedMessage, {\n    id: \"deliverySchedule\",\n    defaultMessage: \"Select Your Delivery Schedule\"\n  })), __jsx(RadioGroupTwo, {\n    items: deliveryMethods,\n    component: function component(item, index) {\n      return __jsx(RadioCard, {\n        id: item.id,\n        key: item.id,\n        title: item.name,\n        content: item.details,\n        name: \"schedule\",\n        checked: item.type === 'primary',\n        withActionButtons: false,\n        onClick: function onClick() {\n          return setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n            delivery_method_id: item.id,\n            products: cartProduct\n          }));\n        },\n        onChange: function onChange() {\n          return dispatch({\n            type: 'SET_PRIMARY_SCHEDULE',\n            payload: item.id.toString()\n          });\n        }\n      });\n    }\n  }))), __jsx(InformationBox, null, __jsx(Heading, null, __jsx(FormattedMessage, {\n    id: \"contactNumberText\",\n    defaultMessage: \"Select Your Contact Number\"\n  })), __jsx(ButtonGroup, null, __jsx(RadioGroupThree, {\n    items: phones,\n    component: function component(item, index) {\n      return __jsx(RadioCard, {\n        id: index,\n        key: index,\n        title: item.is_primary ? 'Primary' : 'Secondary',\n        content: item.number,\n        checked: item.is_primary === true,\n        onChange: function onChange() {\n          return handlePrimary(item, 'contact');\n        },\n        onClick: function onClick() {\n          return setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n            contact_number: item.number,\n            products: cartProduct\n          }));\n        },\n        name: \"contact\",\n        onEdit: function onEdit() {\n          return handleEditDelete(item, index, 'edit', 'contact');\n        },\n        onDelete: function onDelete() {\n          return handleEditDelete(item, index, 'delete', 'contact');\n        }\n      });\n    },\n    secondaryComponent: __jsx(Button, {\n      className: \"addButton\",\n      variant: \"text\",\n      type: \"button\",\n      onClick: function onClick() {\n        return handleModal(UpdateContact, {\n          item: {},\n          id: id\n        }, 'add-contact-modal');\n      }\n    }, __jsx(IconWrapper, null, __jsx(Plus, {\n      width: \"10px\"\n    })), __jsx(FormattedMessage, {\n      id: \"addContactBtn\",\n      defaultMessage: \"Add Contact\"\n    }))\n  }))), __jsx(InformationBox, {\n    className: \"paymentBox\",\n    style: {\n      paddingBottom: 30\n    }\n  }, __jsx(Heading, null, __jsx(FormattedMessage, {\n    id: \"selectPaymentText\",\n    defaultMessage: \"Select Payment Option\"\n  })), __jsx(PaymentGroup, {\n    name: \"payment\",\n    deviceType: deviceType,\n    items: paymentMethods,\n    onEditDeleteField: function onEditDeleteField(item, type) {\n      return null;\n    },\n    onClick: function onClick(item) {\n      setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        payment_option_id: item.id,\n        products: cartProduct\n      }));\n      return null;\n    },\n    onChange: function onChange(item) {\n      return dispatch({\n        type: 'SET_PRIMARY_CARD',\n        payload: item.id.toString()\n      });\n    },\n    handleAddNewCard: function handleAddNewCard() {\n      return null;\n    }\n  }), coupon ? __jsx(CouponBoxWrapper, null, __jsx(CouponCode, null, __jsx(FormattedMessage, {\n    id: \"couponApplied\"\n  }), __jsx(\"span\", null, coupon.code), __jsx(RemoveCoupon, {\n    onClick: function onClick(e) {\n      e.preventDefault();\n      removeCoupon();\n      setHasCoupon(false);\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"removeCoupon\"\n  })))) : __jsx(CouponBoxWrapper, null, !hasCoupon ? __jsx(HaveCoupon, {\n    onClick: function onClick() {\n      return setHasCoupon(function (prev) {\n        return !prev;\n      });\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"specialCode\",\n    defaultMessage: \"Have a special code?\"\n  })) : __jsx(React.Fragment, null, __jsx(CouponInputBox, null, __jsx(CouponBox, {\n    onClick: handleApplyCoupon,\n    value: couponCode,\n    onChange: handleOnUpdate,\n    className: \"normalCoupon\"\n  })), couponError && __jsx(ErrorMsg, null, __jsx(FormattedMessage, {\n    id: \"couponError\",\n    defaultMessage: couponError\n  })))), __jsx(TermConditionText, null, __jsx(FormattedMessage, {\n    id: \"termAndConditionHelper\",\n    defaultMessage: \"By making this purchase you agree to our\"\n  }), __jsx(Link, {\n    href: \"#\"\n  }, __jsx(TermConditionLink, null, __jsx(FormattedMessage, {\n    id: \"termAndCondition\",\n    defaultMessage: \"terms and conditions.\"\n  })))), __jsx(CheckoutSubmit, null, __jsx(Button, {\n    type: \"button\",\n    onClick: handleSubmit,\n    disabled: !isValid,\n    size: \"big\",\n    loading: loading,\n    style: {\n      width: '100%'\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"processCheckout\",\n    defaultMessage: \"Proceed to Checkout\"\n  }))), __jsx(\"div\", null, checkoutError && __jsx(ErrorMsg, null, __jsx(FormattedMessage, {\n    id: \"checkoutError\",\n    defaultMessage: checkoutError\n  })), orderError && __jsx(ErrorMsg, null, __jsx(\"p\", null, orderError))))), __jsx(CartWrapper, null, __jsx(Sticky, {\n    enabled: size.width >= 768 ? true : false,\n    top: 120,\n    innerZ: 999\n  }, __jsx(OrderInfo, null, __jsx(Title, null, __jsx(FormattedMessage, {\n    id: \"cartTitle\",\n    defaultMessage: \"Your Orderdfd\"\n  })), __jsx(Scrollbars, {\n    universal: true,\n    autoHide: true,\n    autoHeight: true,\n    autoHeightMax: \"390px\",\n    renderView: function renderView(props) {\n      return __jsx(\"div\", _extends({}, props, {\n        style: _objectSpread(_objectSpread({}, props.style), {}, {\n          marginLeft: isRtl ? props.style.marginRight : 0,\n          marginRight: isRtl ? 0 : props.style.marginRight,\n          paddingLeft: isRtl ? 15 : 0,\n          paddingRight: isRtl ? 0 : 15\n        })\n      }));\n    }\n  }, __jsx(ItemsWrapper, null, cartItemsCount > 0 ? items.map(function (item) {\n    return __jsx(OrderItem, {\n      key: \"cartItem-\".concat(item.id),\n      product: item\n    });\n  }) : __jsx(React.Fragment, null, __jsx(NoProductImg, null, __jsx(NoCartBag, null)), __jsx(NoProductMsg, null, __jsx(FormattedMessage, {\n    id: \"noProductFound\",\n    defaultMessage: \"No products found\"\n  }))))), __jsx(CalculationWrapper, null, __jsx(TextWrapper, null, __jsx(Text, null, __jsx(FormattedMessage, {\n    id: \"subTotal\",\n    defaultMessage: \"Subtotal\"\n  })), __jsx(Text, null, CURRENCY, calculateSubTotalPrice())), __jsx(TextWrapper, null, __jsx(Text, null, __jsx(FormattedMessage, {\n    id: \"discountText\",\n    defaultMessage: \"Discount\"\n  })), __jsx(Text, null, CURRENCY, calculateDiscount())), __jsx(TextWrapper, {\n    style: {\n      marginTop: 20\n    }\n  }, __jsx(Bold, null, __jsx(FormattedMessage, {\n    id: \"totalText\",\n    defaultMessage: \"Total\"\n  }), ' '), __jsx(Bold, null, CURRENCY, calculatePrice())))))))));\n};\n\nexport default CheckoutWithSidebar;","map":null,"metadata":{},"sourceType":"module"}