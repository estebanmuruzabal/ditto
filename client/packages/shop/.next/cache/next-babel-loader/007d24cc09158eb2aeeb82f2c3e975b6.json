{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { Button } from 'components/button/button';\nimport { ProductDetailsWrapper, ProductPreview, ProductInfo, BookTitle, BackButton, AuthorName, BookDescriptionWrapper, BookDescription, BookMetaTable, BookMetaTableRow, BookMetaItem, ProductMeta, ButtonText, ProductCartWrapper, ProductPriceWrapper, ProductPrice, SalePrice, ProductCartBtn, MetaSingle, MetaItem, DetailsWrapper, DetailsTitle, Description, Avatar, SocialNetworks, SocialIcon, RelatedItems } from './product-details-two.style';\nimport { LongArrowLeft } from 'assets/icons/LongArrowLeft';\nimport { CartIcon } from 'assets/icons/CartIcon';\nimport { InkPen } from 'assets/icons/InkPen';\nimport { AdobeIcon } from 'assets/icons/AdobeIcon';\nimport { Facebook } from 'assets/icons/Facebook';\nimport { GooglePlus } from 'assets/icons/GooglePlus';\nimport { Twitter } from 'assets/icons/Twitter';\nimport { Linkedin } from 'assets/icons/Linkedin';\nimport { CURRENCY } from 'utils/constant';\nimport Products from 'components/product-grid/product-list/product-list';\nimport { FormattedMessage } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { Counter } from 'components/counter/counter';\n\nvar ProductDetails = function ProductDetails(_ref) {\n  var product = _ref.product,\n      deviceType = _ref.deviceType;\n\n  var _useCart = useCart(),\n      addItem = _useCart.addItem,\n      removeItem = _useCart.removeItem,\n      getItem = _useCart.getItem,\n      isInCart = _useCart.isInCart;\n\n  var data = product;\n  var scrollRef = useRef(null);\n\n  var scrollToDiv = function scrollToDiv(e) {\n    e.preventDefault();\n    window.scrollTo({\n      top: scrollRef.current.getBoundingClientRect().top + window.pageYOffset - 65,\n      behavior: 'smooth'\n    });\n  };\n\n  var handleAddClick = function handleAddClick(e) {\n    e.stopPropagation();\n    addItem(data);\n  };\n\n  var handleRemoveClick = function handleRemoveClick(e) {\n    e.stopPropagation();\n    removeItem(data);\n  };\n\n  useEffect(function () {\n    setTimeout(function () {\n      window.scrollTo(0, 0);\n    }, 500);\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ProductDetailsWrapper, {\n    className: \"product-card\"\n  }, __jsx(ProductPreview, null, __jsx(BackButton, null, __jsx(Button, {\n    type: \"button\",\n    size: \"small\",\n    style: {\n      backgroundColor: '#ffffff',\n      border: '1px solid #f1f1f1',\n      color: '#77798c'\n    },\n    onClick: Router.back\n  }, __jsx(LongArrowLeft, null), __jsx(FormattedMessage, {\n    id: \"backBtn\",\n    defaultMessage: \"Back\"\n  }))), __jsx(\"img\", {\n    src: product.gallery[0].url,\n    alt: product.title,\n    className: \"product-image\"\n  })), __jsx(ProductInfo, null, __jsx(BookTitle, null, product.title), __jsx(AuthorName, null, __jsx(InkPen, null), \" \", product.author.name), __jsx(BookDescriptionWrapper, null, __jsx(BookDescription, null, product.description.substring(0, 600), __jsx(\"a\", {\n    href: \"#\",\n    onClick: scrollToDiv,\n    style: {\n      color: '#009e7f',\n      fontWeight: 700\n    }\n  }, \"Read More\")), __jsx(BookMetaTable, null, product.meta ? Object.entries(product.meta).map(function (_ref2, i, arr) {\n    var _ref3 = _slicedToArray(_ref2, 1),\n        item = _ref3[0];\n\n    return i !== arr.length - 1 && i !== arr.length - 2 ? __jsx(BookMetaTableRow, {\n      key: i\n    }, __jsx(BookMetaItem, null, item.replace(/^[a-z]|[A-Z]/g, function (v, i) {\n      return i === 0 ? v.toUpperCase() : ' ' + v.toLowerCase();\n    })), __jsx(BookMetaItem, null, item === 'languages' ? product.meta[item].map(function (lang, i, arr) {\n      return lang.charAt(0).toUpperCase() + lang.slice(1) + (i !== arr.length - 1 ? ', ' : '');\n    }) : product.meta[item])) : '';\n  }) : '')), __jsx(ProductCartWrapper, null, __jsx(ProductPriceWrapper, null, product.discountInPercent ? __jsx(SalePrice, null, CURRENCY, product.price) : null, __jsx(ProductPrice, null, CURRENCY, product.salePrice ? product.salePrice : product.price)), __jsx(ProductCartBtn, null, !isInCart(data.id) ? __jsx(Button, {\n    className: \"cart-button\",\n    variant: \"secondary\",\n    borderRadius: 100,\n    onClick: handleAddClick\n  }, __jsx(CartIcon, null), __jsx(ButtonText, null, __jsx(FormattedMessage, {\n    id: \"addCartButton\",\n    defaultMessage: \"Cart\"\n  }))) : __jsx(Counter, {\n    value: getItem(data.id).quantity,\n    onDecrement: handleRemoveClick,\n    onIncrement: handleAddClick\n  }), product.meta && product.meta.samplePDF.length !== 0 ? __jsx(Button, {\n    title: \"Read Free Sample\",\n    intlButtonId: \"readFreeSampleButton\",\n    iconPosition: \"left\",\n    size: \"small\",\n    variant: \"outlined\",\n    className: \"outline-button\",\n    icon: __jsx(AdobeIcon, null)\n  }) : null)), __jsx(ProductMeta, null, __jsx(MetaSingle, null, product.categories ? product.categories.map(function (item) {\n    return __jsx(Link, {\n      href: \"/\".concat(product.type, \"?category=\").concat(item.slug),\n      key: \"link-\".concat(item.id)\n    }, __jsx(\"a\", null, __jsx(MetaItem, null, item.title)));\n  }) : '')))), __jsx(DetailsWrapper, {\n    ref: scrollRef\n  }, __jsx(DetailsTitle, null, __jsx(FormattedMessage, {\n    id: \"bookSectionTitle\",\n    defaultMessage: \"About The Book\"\n  })), __jsx(Description, null, product.description)), __jsx(DetailsWrapper, null, __jsx(DetailsTitle, null, __jsx(FormattedMessage, {\n    id: \"authorSectionTitle\",\n    defaultMessage: \"About The Author\"\n  })), __jsx(AuthorName, null, product.author.avatar && product.author.avatar.length !== 0 ? __jsx(Avatar, null, __jsx(\"img\", {\n    src: product.author.avatar,\n    alt: product.author.name\n  })) : __jsx(InkPen, null), product.author.name), __jsx(Description, null, product.author.bio), __jsx(SocialNetworks, null, product.author && product.author.socials.map(function (item) {\n    return item.profileLink.length !== 0 ? __jsx(SocialIcon, null, __jsx(\"a\", {\n      key: item.id,\n      href: item.profileLink,\n      target: \"_blank\"\n    }, item.media === 'facebook' ? __jsx(Facebook, {\n      color: \"#3b5999\"\n    }) : item.media === 'twitter' ? __jsx(Twitter, {\n      color: \"#55acee\"\n    }) : item.media === 'google' ? __jsx(GooglePlus, {\n      color: \"#dd4b39\"\n    }) : item.media === 'linkedin' ? __jsx(Linkedin, {\n      color: \"#0077B5\"\n    }) : '')) : '';\n  }))), __jsx(RelatedItems, null, __jsx(\"h2\", null, __jsx(FormattedMessage, {\n    id: \"intlReletedItems\",\n    defaultMessage: \"Related Items\"\n  })), __jsx(Products, {\n    type: product.type.toLowerCase(),\n    deviceType: deviceType,\n    loadMore: false,\n    fetchLimit: 10\n  })));\n};\n\nexport default ProductDetails;","map":null,"metadata":{},"sourceType":"module"}