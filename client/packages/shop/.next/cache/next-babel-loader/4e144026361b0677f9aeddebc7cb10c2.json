{"ast":null,"code":"var _jsxFileName = \"/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/features/checkouts/checkout-two/checkout-two.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { Button } from 'components/button/button';\nimport RadioCard from 'components/radio-card/radio-card';\nimport RadioGroupTwo from 'components/radio-group/radio-group-two';\nimport RadioGroupThree from 'components/radio-group/radio-group-three';\nimport RadioCardTWO from 'components/radio-card/radio-card-two';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport UpdateContact from 'components/contact-card/contact-card';\nimport { DELETE_ADDRESS, SETPRIMARY_ADDRESS } from 'graphql/mutation/address';\nimport { DELETE_PHONENUMBER, SETPRIMARY_PHONENUMBER } from 'graphql/mutation/phone';\nimport { CREAT_ORDER } from 'graphql/mutation/order';\nimport { GET_COUPON } from 'graphql/query/coupon';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { DELETE_CONTACT } from 'graphql/mutation/contact';\nimport { CURRENCY } from 'utils/constant';\nimport { openModal } from '@redq/reuse-modal';\nimport { useMutation } from '@apollo/react-hooks';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport CheckoutWrapper, { CheckoutContainer, CheckoutInformation, InformationBox, DeliverySchedule, Heading, ButtonGroup, CheckoutSubmit, HaveCoupon, CouponBoxWrapper, CouponInputBox, HeadingWider, CouponCode, RemoveCoupon, ErrorMsg, TermConditionText, TermConditionLink, CartWrapper, CalculationWrapper, OrderInfo, Title, ItemsWrapper, Items, Quantity, ItemInfo, Price, TextWrapper, Text, Bold, NoProductMsg, NoProductImg, IconWrapper, DeliveryTypesOptions } from './checkout-two.style';\nimport CouponBox from 'components/coupon-box/coupon-box';\nimport { Plus } from 'assets/icons/PlusMinus';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport Sticky from 'react-stickynode';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { useWindowSize } from 'utils/useWindowSize';\nimport UpdateAddressTwo from 'components/address-card/address-card-two';\nimport moment from 'moment';\nimport { calculateDeliveryCharge, capitalizeFirstLetter } from 'utils/shop-helper'; // The type of props Checkout Form receives\n\nconst OrderItem = ({\n  product\n}) => {\n  const {\n    name,\n    images,\n    price,\n    salePrice,\n    unit,\n    quantity = 0,\n    recicledQuantity = 0,\n    packagePrice,\n    id\n  } = product;\n  const recicledPrice = price - packagePrice;\n  const totalQuantity = quantity + recicledQuantity;\n  const displayPrice = salePrice || price;\n  const nonRecicledTotalPrice = displayPrice * quantity;\n  const recicledTotalPrice = recicledPrice * recicledQuantity;\n  const totalPrice = nonRecicledTotalPrice + recicledTotalPrice;\n  const intl = useIntl();\n  return __jsx(Items, {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, __jsx(ItemInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, recicledQuantity > 0 && __jsx(React.Fragment, null, __jsx(Quantity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, name), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), recicledQuantity, \" X \", CURRENCY, recicledPrice, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  })), quantity > 0 && __jsx(React.Fragment, null, __jsx(Quantity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, name), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }), quantity, \" X \", CURRENCY, price)), __jsx(Price, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, CURRENCY, totalPrice.toFixed(2)));\n};\n\nconst CheckoutWithSidebar = ({\n  token,\n  deviceType\n}) => {\n  var _deliveryMethods$find, _calculateCCCharge;\n\n  const {\n    0: hasCoupon,\n    1: setHasCoupon\n  } = useState(false);\n  const {\n    0: couponCode,\n    1: setCouponCode\n  } = useState('');\n  const {\n    0: couponError,\n    1: setError\n  } = useState('');\n  const {\n    0: orderError,\n    1: setOrderError\n  } = useState('');\n  const {\n    0: checkoutError,\n    1: setCheckoutError\n  } = useState('');\n  const {\n    state,\n    dispatch\n  } = useContext(ProfileContext);\n  const {\n    isRtl\n  } = useLocale();\n  const {\n    items,\n    removeCoupon,\n    coupon,\n    applyCoupon,\n    clearCart,\n    cartItemsCount,\n    calculatePrice,\n    calculateDiscount,\n    calculateSubTotalPrice,\n    isRestaurant,\n    toggleRestaurant\n  } = useCart();\n  const intl = useIntl();\n  let cartProduct = null;\n  let contains = false;\n\n  if (items.length > 0) {\n    cartProduct = items.map((item, index) => ({\n      product_id: item.id,\n      unit: item.unit,\n      quantity: Number(item.quantity) || 0,\n      recicledQuantity: Number(item.recicledQuantity) || 0,\n      sale_price: item.sale_price,\n      // price: (Number(item.quantity || 0) * item.price) + (Number(item.recicledQuantity || 0) * (item.price - (item.packagePrice || 0))),\n      price: item.price,\n      image: item.images[0],\n      name: item.name\n    }));\n  }\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isValid,\n    1: setIsValid\n  } = useState(false);\n  const {\n    0: pickUpMethodsSelected,\n    1: setPickUpMethodsSelected\n  } = useState(false);\n  const {\n    0: submitResult,\n    1: setSubmitResult\n  } = useState({\n    contact_number: '',\n    payment_option_id: '',\n    payment_option_type: '',\n    delivery_method_id: '',\n    coupon_code: '',\n    delivery_address: null,\n    products: null\n  });\n  const {\n    delivery_address,\n    contact,\n    paymentMethods,\n    phones,\n    name,\n    email,\n    id,\n    deliveryMethods\n  } = state; //set mututions\n\n  const [setprimaryAddressMutation] = useMutation(SETPRIMARY_ADDRESS);\n  const [deleteAddressMutation] = useMutation(DELETE_ADDRESS);\n  const [setprimaryPhoneNumberMutation] = useMutation(SETPRIMARY_PHONENUMBER);\n  const [deletePhoneNumberMutation] = useMutation(DELETE_PHONENUMBER);\n  const [setOrderMutation] = useMutation(CREAT_ORDER);\n  const [deleteContactMutation] = useMutation(DELETE_CONTACT);\n  const [deletePaymentCardMutation] = useMutation(DELETE_CARD);\n  const size = useWindowSize();\n  const [deliveryMethodsSelected, setDeliveryMethodsSelected] = React.useState([]);\n  const [appliedCoupon] = useMutation(GET_COUPON);\n  let deliveryCharge = 0;\n  const selectedAddress = delivery_address && delivery_address.find(item => item.is_primary === true);\n  const selectedContact = phones.find(item => item.is_primary === true);\n  console.log('deliveryMethods,', deliveryMethods);\n  const pickUpAddress = (_deliveryMethods$find = deliveryMethods.find(deliveryMethod => {\n    return submitResult.delivery_method_id === deliveryMethod.id;\n  })) === null || _deliveryMethods$find === void 0 ? void 0 : _deliveryMethods$find.pickUpAddress;\n  const deliveryMethodSelected = deliveryMethods.find(deliveryMethod => {\n    return submitResult.delivery_method_id === deliveryMethod.id;\n  });\n\n  const calculateCCCharge = () => {\n    var _paymentOptionSelecte, _paymentOptionSelecte2;\n\n    const paymentOptionSelected = paymentMethods.find(paymentMethod => {\n      return (submitResult === null || submitResult === void 0 ? void 0 : submitResult.payment_option_id) === (paymentMethod === null || paymentMethod === void 0 ? void 0 : paymentMethod.id);\n    });\n    const total = Number(calculateSubTotalPrice());\n\n    if ((paymentOptionSelected === null || paymentOptionSelected === void 0 ? void 0 : (_paymentOptionSelecte = paymentOptionSelected.name) === null || _paymentOptionSelecte === void 0 ? void 0 : _paymentOptionSelecte.toLowerCase().includes('tarjeta')) || (paymentOptionSelected === null || paymentOptionSelected === void 0 ? void 0 : (_paymentOptionSelecte2 = paymentOptionSelected.name) === null || _paymentOptionSelecte2 === void 0 ? void 0 : _paymentOptionSelecte2.toLowerCase().includes('card'))) {\n      var _paymentOptionSelecte3;\n\n      const ccCharge = paymentOptionSelected === null || paymentOptionSelected === void 0 ? void 0 : (_paymentOptionSelecte3 = paymentOptionSelected.name) === null || _paymentOptionSelecte3 === void 0 ? void 0 : _paymentOptionSelecte3.replace(/\\D/g, '');\n      const result = total * (ccCharge / 100);\n      return result;\n    }\n\n    return 0;\n  };\n\n  const selectedAddressText = (selectedAddress === null || selectedAddress === void 0 ? void 0 : selectedAddress.address) ? `${selectedAddress && capitalizeFirstLetter(selectedAddress.title)} - ${selectedAddress && capitalizeFirstLetter(selectedAddress.address)}, ${selectedAddress && selectedAddress.instructions}` : null;\n  useEffect(() => {\n    removeCoupon();\n    setHasCoupon(false);\n    deliveryCharge = calculateDeliveryCharge(deliveryMethodSelected === null || deliveryMethodSelected === void 0 ? void 0 : deliveryMethodSelected.name);\n    const deliveryAddress = pickUpOptionSelected ? pickUpAddress : deliveryOptionSelected ? selectedAddressText : '';\n    setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n      delivery_address: deliveryAddress,\n      products: cartProduct,\n      contact_number: selectedContact.number\n    }));\n\n    if (calculatePrice() > 0 && cartItemsCount > 0 && ((submitResult === null || submitResult === void 0 ? void 0 : submitResult.delivery_method_id) || pickUpAddress) && phones.length && deliveryMethods.length) {\n      setIsValid(true);\n    }\n  }, [state]); // Add or edit modal\n\n  const handleModal = (modalComponent, modalProps = {}, className = 'add-address-modal') => {\n    openModal({\n      show: true,\n      config: {\n        width: 360,\n        height: 'auto',\n        enableResizing: false,\n        disableDragging: true,\n        className: className\n      },\n      closeOnClickOutside: true,\n      component: modalComponent,\n      componentProps: {\n        item: modalProps\n      }\n    });\n  };\n\n  const handleEditDelete = async (item, index, type, name) => {\n    if (type === 'edit') {\n      const modalComponent = name === 'address' ? UpdateAddressTwo : UpdateContact;\n      handleModal(modalComponent, {\n        item,\n        id\n      });\n    } else {\n      switch (name) {\n        /* case 'payment':\n           dispatch({ type: 'DELETE_CARD', payload: item.id });\n           return await deletePaymentCardMutation({\n             variables: { cardId: JSON.stringify(item.id) },\n           });\n         */\n        case 'contact':\n          if (phones.length > 1) {\n            dispatch({\n              type: 'DELETE_CONTACT',\n              payload: item.id\n            });\n            return await deletePhoneNumberMutation({\n              variables: {\n                id,\n                phoneId: item.id\n              }\n            });\n          } else {\n            return null;\n          }\n\n        case 'address':\n          if (delivery_address.length > 1) {\n            dispatch({\n              type: 'DELETE_ADDRESS',\n              payload: item.id\n            });\n            return await deleteAddressMutation({\n              variables: {\n                id,\n                addressId: item.id\n              }\n            });\n          } else {\n            return null;\n          }\n\n        default:\n          return false;\n      }\n    }\n  };\n\n  const handlePrimary = async (item, name) => {\n    switch (name) {\n      case 'contact':\n        dispatch({\n          type: 'SET_PRIMARY_CONTACT',\n          payload: item.id\n        });\n        return await setprimaryPhoneNumberMutation({\n          variables: {\n            id,\n            phoneId: item.id\n          }\n        });\n\n      case 'address':\n        dispatch({\n          type: 'SET_PRIMARY_ADDRESS',\n          payload: item.id\n        });\n        return await setprimaryAddressMutation({\n          variables: {\n            id,\n            addressId: item.id\n          }\n        });\n\n      default:\n        return false;\n    }\n  };\n\n  const handleApplyCoupon = async () => {\n    if (!couponCode) {\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    const {\n      data,\n      errors\n    } = await appliedCoupon({\n      variables: {\n        code: couponCode\n      }\n    });\n\n    if (!data.getCoupon.coupon && data.getCoupon.message && !data.getCoupon.message.status) {\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    if (errors) {\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    if (data.getCoupon.coupon && data.getCoupon.coupon.percentage) {\n      applyCoupon(data.getCoupon.coupon);\n      setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        coupon_code: couponCode,\n        products: cartProduct\n      }));\n      setCouponCode('');\n    } else {\n      setError('Invalid Coupon');\n    }\n  };\n\n  const handleOnUpdate = e => {\n    setCouponCode(e.currentTarget.value);\n  };\n\n  const setErrorFor5Sec = messageId => {\n    const error = intl.formatMessage({\n      id: messageId,\n      defaultMessage: 'Please check the form'\n    });\n    setCheckoutError(error);\n    setTimeout(() => setCheckoutError(null), 3500);\n    return null;\n  };\n\n  const getDeliveryDate = () => {\n    // moment.locale('es');\n    let orderDay = moment(new Date(), 'MM/D/YYYY').day();\n    const orderHour = moment(new Date(), 'MM/D/YYYY').hour();\n    let deliveryDate = moment(new Date());\n    const lunes = 1;\n    const martes = 2;\n    const miercoles = 3;\n    const jueves = 4;\n    const viernes = 5;\n    const sabado = 6;\n    const domingo = 7;\n    const lastOrderTime = 12;\n\n    switch (orderDay) {\n      case viernes:\n      case sabado:\n      case domingo:\n      case lunes:\n        deliveryDate.add(1, 'days');\n        break;\n\n      case martes:\n        if (orderHour >= lastOrderTime) {\n          deliveryDate.add(2, 'days');\n        }\n\n        break;\n\n      case miercoles:\n        // deliveryDate.add(1, 'days');\n        break;\n\n      case jueves:\n        if (orderHour >= lastOrderTime) {\n          deliveryDate.add(5, 'days');\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    return moment(deliveryDate).format('dddd DD MMM');\n  };\n\n  const handleSubmit = async () => {\n    var _deliveryOptionSelect;\n\n    const deliveryCharge = calculateDeliveryCharge(deliveryMethodSelected === null || deliveryMethodSelected === void 0 ? void 0 : deliveryMethodSelected.name);\n    const ccCharge = calculateCCCharge();\n    const otherSubmitResult = {\n      customer_id: id,\n      sub_total: Number(calculateSubTotalPrice()),\n      total: Number(calculatePrice(deliveryCharge + ccCharge)),\n      discount_amount: Number(calculateDiscount())\n    };\n    const {\n      contact_number,\n      payment_option_id,\n      payment_option_type,\n      delivery_method_id,\n      delivery_address,\n      coupon_code,\n      products\n    } = submitResult;\n    const {\n      customer_id,\n      sub_total,\n      total,\n      discount_amount\n    } = otherSubmitResult;\n\n    if (deliveryOptionSelected && !delivery_address) {\n      setErrorFor5Sec('checkoutDeliveryAddressInvalid');\n      return;\n    }\n\n    if (!delivery_method_id) {\n      setErrorFor5Sec('checkoutDeliveryMethodInvalid');\n      return;\n    }\n\n    if (!contact_number) {\n      setErrorFor5Sec('checkoutContactNumberInvalid');\n      return;\n    }\n\n    if (!payment_option_id) {\n      setErrorFor5Sec(pickUpAddress ? 'checkoutPaymentMethodInvalidOption3' : 'checkoutPaymentMethodInvalidOption4');\n      return;\n    }\n\n    if (!customer_id || !products) {\n      setCheckoutError('Please place a valid order!');\n      return null;\n    }\n\n    setLoading(true);\n    const delivery_date = deliveryOptionSelected === null || deliveryOptionSelected === void 0 ? void 0 : (_deliveryOptionSelect = deliveryOptionSelected.details.split(\"|\")[1]) === null || _deliveryOptionSelect === void 0 ? void 0 : _deliveryOptionSelect.trim(); // const deliveryDateAndTime = `${getDeliverySchedule(deliveryOptionSelected?.details)} - ${moment(deliveryDate).format('DD MMM')}`;\n    // if (confirm('Are you sure? You want to place this order?')) {\n\n    try {\n      const {\n        errors: orderCreateError\n      } = await setOrderMutation({\n        variables: {\n          input: {\n            customer_id,\n            contact_number,\n            payment_option_id,\n            delivery_method_id,\n            delivery_date,\n            delivery_address,\n            sub_total,\n            total,\n            coupon_code,\n            discount_amount,\n            products,\n            payment_option_type,\n            isWhatsappPurchase: false,\n            lenguageLocale: intl.locale\n          }\n        }\n      });\n\n      if (!orderCreateError) {\n        if (isValid) {\n          clearCart();\n          removeCoupon();\n          setHasCoupon(false);\n          Router.push({\n            pathname: '/order-received',\n            query: {\n              itemId: id\n            }\n          });\n        }\n\n        setLoading(false);\n        setIsValid(false);\n      }\n\n      if (orderCreateError) {\n        var _orderCreateError$;\n\n        setOrderError(((_orderCreateError$ = orderCreateError[0]) === null || _orderCreateError$ === void 0 ? void 0 : _orderCreateError$.message) || 'Somehting went wrong');\n        setLoading(false);\n      }\n    } catch (error) {\n      console.log(error);\n\n      if (confirm('Algo salió mal! Te pedimos disculpas y que por favor, comiences de vuelta tu compra.')) {\n        console.log(error);\n        setLoading(false);\n        startAllOver();\n      }\n    }\n\n    setLoading(false); // }\n  };\n\n  const startAllOver = () => {\n    clearCart();\n    removeCoupon();\n    setHasCoupon(false);\n    Router.push({\n      pathname: '/'\n    });\n  };\n\n  const pickedUpOptionIds = deliveryMethods.map(deliveryMethod => {\n    return deliveryMethod.isPickUp ? deliveryMethod.id : null;\n  });\n  const deliveryOptionIds = deliveryMethods.map(deliveryMethod => {\n    return !deliveryMethod.isPickUp ? deliveryMethod.id : null;\n  });\n  const pickUpOptionSelected = pickedUpOptionIds.includes(submitResult.delivery_method_id);\n  const deliveryOptionSelected = deliveryMethods.find(deliveryMethod => {\n    return deliveryMethod.id === submitResult.delivery_method_id;\n  });\n  console.log('deliveryMethods', deliveryMethods);\n  const deliveryMethodsTypes = [{\n    name: intl.formatMessage({\n      id: 'deliveryId',\n      defaultMessage: 'delivery'\n    })\n  }, {\n    name: intl.formatMessage({\n      id: 'pickUpId',\n      defaultMessage: 'delivery'\n    })\n  }];\n  return __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 5\n    }\n  }, __jsx(CheckoutWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 7\n    }\n  }, __jsx(CheckoutContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 9\n    }\n  }, __jsx(CheckoutInformation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 11\n    }\n  }, __jsx(InformationBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 13\n    }\n  }, __jsx(DeliverySchedule, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 15\n    }\n  }, __jsx(React.Fragment, null, __jsx(HeadingWider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"deliverySchedule\",\n    defaultMessage: \"Select Your Delivery Schedule\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 21\n    }\n  }), __jsx(DeliveryTypesOptions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 21\n    }\n  }))), __jsx(RadioGroupTwo, {\n    items: deliveryMethods,\n    component: (item, index) => __jsx(RadioCard, {\n      id: item.id,\n      key: item.id,\n      title: item.name,\n      details: item.details,\n      link: item.isPickUp && item.pickUpAddress ? item.pickUpAddress : null,\n      name: \"schedule\",\n      checked: item.type === 'primary',\n      withActionButtons: false,\n      onClick: () => setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        delivery_method_id: item.id,\n        products: cartProduct\n      })),\n      onChange: () => {\n        return dispatch({\n          type: 'SET_PRIMARY_SCHEDULE',\n          payload: item.id.toString()\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 23\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 19\n    }\n  }))), !pickUpOptionSelected && __jsx(InformationBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 15\n    }\n  }, __jsx(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"checkoutDeliveryAddress\",\n    defaultMessage: \"Delivery Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 19\n    }\n  })), __jsx(ButtonGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 17\n    }\n  }, __jsx(RadioGroupTwo, {\n    items: delivery_address,\n    component: (item, index) => __jsx(RadioCardTWO, {\n      id: index,\n      key: index,\n      address: item.address,\n      location: item.location,\n      instructions: item.instructions,\n      title: item.title,\n      name: \"address\",\n      isChecked: item.is_primary === true,\n      onClick: () => setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        delivery_address: `${item.title} -\n                          ${item.address}, ${item.location}, ${item.instructions}\n                          `,\n        products: cartProduct\n      })),\n      onChange: () => handlePrimary(item, 'address'),\n      onEdit: () => handleEditDelete(item, index, 'edit', 'address'),\n      onDelete: () => handleEditDelete(item, index, 'delete', 'address'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 25\n      }\n    }),\n    secondaryComponent: __jsx(Button, {\n      className: \"addButton\",\n      variant: \"text\",\n      type: \"button\",\n      onClick: () => handleModal(UpdateAddressTwo, {\n        item: {},\n        id\n      }, 'add-address-modal'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 23\n      }\n    }, __jsx(IconWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 25\n      }\n    }, __jsx(Plus, {\n      width: \"10px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 27\n      }\n    })), __jsx(FormattedMessage, {\n      id: \"addNew\",\n      defaultMessage: \"Add New\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 25\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 19\n    }\n  }))), __jsx(InformationBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 13\n    }\n  }, __jsx(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 15\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"contactNumberText\",\n    defaultMessage: \"Select Your Contact Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 17\n    }\n  })), __jsx(ButtonGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 15\n    }\n  }, __jsx(RadioGroupThree, {\n    items: phones,\n    component: (item, index) => __jsx(RadioCard, {\n      id: index,\n      key: index,\n      title: item.is_primary ? intl.formatMessage({\n        id: 'primaryId',\n        defaultMessage: 'Primary'\n      }) : intl.formatMessage({\n        id: 'secundaryId',\n        defaultMessage: 'Secondary'\n      }),\n      details: item.number,\n      checked: item.is_primary === true,\n      onChange: () => handlePrimary(item, 'contact'),\n      onClick: () => setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        contact_number: item.number,\n        products: cartProduct\n      })),\n      name: \"contact\",\n      onEdit: () => handleEditDelete(item, index, 'edit', 'contact'),\n      onDelete: () => handleEditDelete(item, index, 'delete', 'contact'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 21\n      }\n    }),\n    secondaryComponent: __jsx(Button, {\n      className: \"addButton\",\n      variant: \"text\",\n      type: \"button\",\n      onClick: () => handleModal(UpdateContact, {\n        item: {},\n        id\n      }, 'add-contact-modal'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 21\n      }\n    }, __jsx(IconWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 701,\n        columnNumber: 23\n      }\n    }, __jsx(Plus, {\n      width: \"10px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 25\n      }\n    })), __jsx(FormattedMessage, {\n      id: \"addContactBtn\",\n      defaultMessage: \"Add Contact\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 23\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 17\n    }\n  }))), __jsx(InformationBox, {\n    className: \"paymentBox\",\n    style: {\n      paddingBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 13\n    }\n  }, __jsx(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 719,\n      columnNumber: 15\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"selectPaymentText\",\n    defaultMessage: \"Select Payment Option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 720,\n      columnNumber: 17\n    }\n  })), __jsx(PaymentGroup, {\n    name: \"payment\",\n    deviceType: deviceType,\n    items: paymentMethods,\n    onEditDeleteField: (item, type) => null,\n    onClick: item => {\n      setSubmitResult(_objectSpread(_objectSpread({}, submitResult), {}, {\n        payment_option_id: item.id,\n        payment_option_type: item.type,\n        products: cartProduct\n      }));\n      return null;\n    },\n    onChange: item => {\n      return dispatch({\n        type: 'SET_PRIMARY_CARD',\n        payload: item.id.toString()\n      });\n    },\n    handleAddNewCard: () => null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 15\n    }\n  }), coupon ? __jsx(CouponBoxWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 752,\n      columnNumber: 17\n    }\n  }, __jsx(CouponCode, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"couponApplied\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 21\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 755,\n      columnNumber: 21\n    }\n  }, coupon.code), __jsx(RemoveCoupon, {\n    onClick: e => {\n      e.preventDefault();\n      removeCoupon();\n      setHasCoupon(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"removeCoupon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 23\n    }\n  })))) : __jsx(CouponBoxWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 17\n    }\n  }, !hasCoupon ? __jsx(HaveCoupon, {\n    onClick: () => setHasCoupon(prev => !prev),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"specialCode\",\n    defaultMessage: \"Have a special code?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 23\n    }\n  })) : __jsx(React.Fragment, null, __jsx(CouponInputBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 779,\n      columnNumber: 23\n    }\n  }, __jsx(CouponBox, {\n    onClick: handleApplyCoupon,\n    value: couponCode,\n    onChange: handleOnUpdate,\n    className: \"normalCoupon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 780,\n      columnNumber: 25\n    }\n  })), couponError && __jsx(ErrorMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 25\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"couponError\",\n    defaultMessage: couponError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 790,\n      columnNumber: 27\n    }\n  })))), __jsx(TermConditionText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 15\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"termAndConditionHelper\",\n    defaultMessage: \"By making this purchase you agree to our\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 17\n    }\n  }), __jsx(Link, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 806,\n      columnNumber: 17\n    }\n  }, __jsx(TermConditionLink, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 19\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"termAndCondition\",\n    defaultMessage: \"terms and conditions.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 21\n    }\n  })))), checkoutError && __jsx(ErrorMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 818,\n      columnNumber: 25\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"checkoutError\",\n    defaultMessage: checkoutError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 819,\n      columnNumber: 29\n    }\n  })), __jsx(CheckoutSubmit, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    type: \"button\",\n    onClick: handleSubmit,\n    disabled: loading,\n    size: \"big\",\n    loading: loading,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: loading ? 'processesingCheckout' : 'processCheckout',\n    defaultMessage: \"Proceed to Checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 835,\n      columnNumber: 19\n    }\n  }), \". (\", CURRENCY, calculatePrice(calculateDeliveryCharge(deliveryMethodSelected === null || deliveryMethodSelected === void 0 ? void 0 : deliveryMethodSelected.name) + calculateCCCharge()), \")\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 17\n    }\n  }, orderError && __jsx(ErrorMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 845,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 846,\n      columnNumber: 29\n    }\n  }, orderError))))), __jsx(CartWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 11\n    }\n  }, __jsx(Sticky, {\n    enabled: size.width >= 768 ? true : false,\n    top: 120,\n    innerZ: 999,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 855,\n      columnNumber: 13\n    }\n  }, __jsx(OrderInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 15\n    }\n  }, __jsx(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"cartTitle\",\n    defaultMessage: \"Your Orderdfd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 862,\n      columnNumber: 19\n    }\n  })), __jsx(Scrollbars, {\n    universal: true,\n    autoHide: true,\n    autoHeight: true,\n    autoHeightMax: \"390px\",\n    renderView: props => __jsx(\"div\", _extends({}, props, {\n      style: _objectSpread(_objectSpread({}, props.style), {}, {\n        marginLeft: isRtl ? props.style.marginRight : 0,\n        marginRight: isRtl ? 0 : props.style.marginRight,\n        paddingLeft: isRtl ? 15 : 0,\n        paddingRight: isRtl ? 0 : 15\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 868,\n      columnNumber: 17\n    }\n  }, __jsx(ItemsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 19\n    }\n  }, cartItemsCount > 0 ? items.map(item => __jsx(OrderItem, {\n    key: `cartItem-${item.id}`,\n    product: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 25\n    }\n  })) : __jsx(React.Fragment, null, __jsx(NoProductImg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 893,\n      columnNumber: 25\n    }\n  }, __jsx(NoCartBag, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 894,\n      columnNumber: 27\n    }\n  })), __jsx(NoProductMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 897,\n      columnNumber: 25\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"noProductFound\",\n    defaultMessage: \"No products found\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 898,\n      columnNumber: 27\n    }\n  }))))), __jsx(CalculationWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 908,\n      columnNumber: 17\n    }\n  }, __jsx(TextWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 909,\n      columnNumber: 19\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 910,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"subTotal\",\n    defaultMessage: \"Subtotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 23\n    }\n  })), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 913,\n      columnNumber: 21\n    }\n  }, CURRENCY, \" \", calculateSubTotalPrice())), __jsx(TextWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 918,\n      columnNumber: 19\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 919,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"discountText\",\n    defaultMessage: \"Discount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 920,\n      columnNumber: 23\n    }\n  })), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 922,\n      columnNumber: 21\n    }\n  }, CURRENCY, \" \", calculateDiscount())), calculateCCCharge() > 0 && __jsx(TextWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 928,\n      columnNumber: 21\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 929,\n      columnNumber: 23\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"ccrChargeText\",\n    defaultMessage: \"Card charge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 930,\n      columnNumber: 25\n    }\n  })), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 932,\n      columnNumber: 23\n    }\n  }, CURRENCY, \" \", (_calculateCCCharge = calculateCCCharge()) === null || _calculateCCCharge === void 0 ? void 0 : _calculateCCCharge.toFixed(2))), __jsx(TextWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 938,\n      columnNumber: 19\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 939,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"deliveryChargeText\",\n    defaultMessage: \"Delivery charge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 940,\n      columnNumber: 23\n    }\n  })), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 942,\n      columnNumber: 21\n    }\n  }, CURRENCY, \" \", calculateDeliveryCharge(deliveryMethodSelected === null || deliveryMethodSelected === void 0 ? void 0 : deliveryMethodSelected.name))), __jsx(TextWrapper, {\n    style: {\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 947,\n      columnNumber: 19\n    }\n  }, __jsx(Bold, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 948,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"totalText\",\n    defaultMessage: \"Total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 949,\n      columnNumber: 23\n    }\n  }), ' '), __jsx(Bold, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 951,\n      columnNumber: 21\n    }\n  }, CURRENCY, \" \", calculatePrice(calculateDeliveryCharge(deliveryMethodSelected === null || deliveryMethodSelected === void 0 ? void 0 : deliveryMethodSelected.name) + calculateCCCharge()))))))))));\n};\n\nexport default CheckoutWithSidebar;","map":{"version":3,"sources":["/Users/estebanmuruzabal/work/ditto/client/packages/shop/src/features/checkouts/checkout-two/checkout-two.tsx"],"names":["React","useContext","useState","useEffect","Router","Link","Button","RadioCard","RadioGroupTwo","RadioGroupThree","RadioCardTWO","PaymentGroup","UpdateContact","DELETE_ADDRESS","SETPRIMARY_ADDRESS","DELETE_PHONENUMBER","SETPRIMARY_PHONENUMBER","CREAT_ORDER","GET_COUPON","DELETE_CARD","DELETE_CONTACT","CURRENCY","openModal","useMutation","Scrollbars","CheckoutWrapper","CheckoutContainer","CheckoutInformation","InformationBox","DeliverySchedule","Heading","ButtonGroup","CheckoutSubmit","HaveCoupon","CouponBoxWrapper","CouponInputBox","HeadingWider","CouponCode","RemoveCoupon","ErrorMsg","TermConditionText","TermConditionLink","CartWrapper","CalculationWrapper","OrderInfo","Title","ItemsWrapper","Items","Quantity","ItemInfo","Price","TextWrapper","Text","Bold","NoProductMsg","NoProductImg","IconWrapper","DeliveryTypesOptions","CouponBox","Plus","NoCartBag","Sticky","ProfileContext","FormattedMessage","useIntl","useCart","useLocale","useWindowSize","UpdateAddressTwo","moment","calculateDeliveryCharge","capitalizeFirstLetter","OrderItem","product","name","images","price","salePrice","unit","quantity","recicledQuantity","packagePrice","id","recicledPrice","totalQuantity","displayPrice","nonRecicledTotalPrice","recicledTotalPrice","totalPrice","intl","toFixed","CheckoutWithSidebar","token","deviceType","hasCoupon","setHasCoupon","couponCode","setCouponCode","couponError","setError","orderError","setOrderError","checkoutError","setCheckoutError","state","dispatch","isRtl","items","removeCoupon","coupon","applyCoupon","clearCart","cartItemsCount","calculatePrice","calculateDiscount","calculateSubTotalPrice","isRestaurant","toggleRestaurant","cartProduct","contains","length","map","item","index","product_id","Number","sale_price","image","loading","setLoading","isValid","setIsValid","pickUpMethodsSelected","setPickUpMethodsSelected","submitResult","setSubmitResult","contact_number","payment_option_id","payment_option_type","delivery_method_id","coupon_code","delivery_address","products","contact","paymentMethods","phones","email","deliveryMethods","setprimaryAddressMutation","deleteAddressMutation","setprimaryPhoneNumberMutation","deletePhoneNumberMutation","setOrderMutation","deleteContactMutation","deletePaymentCardMutation","size","deliveryMethodsSelected","setDeliveryMethodsSelected","appliedCoupon","deliveryCharge","selectedAddress","find","is_primary","selectedContact","console","log","pickUpAddress","deliveryMethod","deliveryMethodSelected","calculateCCCharge","paymentOptionSelected","paymentMethod","total","toLowerCase","includes","ccCharge","replace","result","selectedAddressText","address","title","instructions","deliveryAddress","pickUpOptionSelected","deliveryOptionSelected","number","handleModal","modalComponent","modalProps","className","show","config","width","height","enableResizing","disableDragging","closeOnClickOutside","component","componentProps","handleEditDelete","type","payload","variables","phoneId","addressId","handlePrimary","handleApplyCoupon","data","errors","code","getCoupon","message","status","percentage","handleOnUpdate","e","currentTarget","value","setErrorFor5Sec","messageId","error","formatMessage","defaultMessage","setTimeout","getDeliveryDate","orderDay","Date","day","orderHour","hour","deliveryDate","lunes","martes","miercoles","jueves","viernes","sabado","domingo","lastOrderTime","add","format","handleSubmit","otherSubmitResult","customer_id","sub_total","discount_amount","delivery_date","details","split","trim","orderCreateError","input","isWhatsappPurchase","lenguageLocale","locale","push","pathname","query","itemId","confirm","startAllOver","pickedUpOptionIds","isPickUp","deliveryOptionIds","deliveryMethodsTypes","toString","location","paddingBottom","preventDefault","prev","props","style","marginLeft","marginRight","paddingLeft","paddingRight","marginTop"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AAEA,OAAOC,aAAP,MAA0B,wCAA1B;AACA,OAAOC,eAAP,MAA4B,0CAA5B;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,aAAP,MAA0B,sCAA1B;AACA,SAASC,cAAT,EAAyBC,kBAAzB,QAAmD,0BAAnD;AACA,SAASC,kBAAT,EAA6BC,sBAA7B,QAA2D,wBAA3D;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,UAAT,QAA2B,sBAA3B;AAEA,SAASC,WAAT,QAA4B,uBAA5B;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,SAA4BC,QAA5B,QAA4C,gBAA5C;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SAASC,WAAT,QAAsC,qBAAtC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,eAAP,IACEC,iBADF,EAEEC,mBAFF,EAGEC,cAHF,EAIEC,gBAJF,EAKEC,OALF,EAMEC,WANF,EAOEC,cAPF,EAQEC,UARF,EASEC,gBATF,EAUEC,cAVF,EAWEC,YAXF,EAYEC,UAZF,EAaEC,YAbF,EAcEC,QAdF,EAeEC,iBAfF,EAgBEC,iBAhBF,EAiBEC,WAjBF,EAkBEC,kBAlBF,EAmBEC,SAnBF,EAoBEC,KApBF,EAqBEC,YArBF,EAsBEC,KAtBF,EAuBEC,QAvBF,EAyBEC,QAzBF,EA0BEC,KA1BF,EA2BEC,WA3BF,EA4BEC,IA5BF,EA6BEC,IA7BF,EA+BEC,YA/BF,EAgCEC,YAhCF,EAiCEC,WAjCF,EAkCEC,oBAlCF,QAmCO,sBAnCP;AAoCA,OAAOC,SAAP,MAAsB,kCAAtB;AAEA,SAASC,IAAT,QAAqB,wBAArB;AACA,SAASC,SAAT,QAA0B,wBAA1B;AAEA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,SAASC,gBAAT,EAA2BC,OAA3B,QAA0C,YAA1C;AACA,SAASC,OAAT,QAAwB,wBAAxB;AAEA,SAASC,SAAT,QAA0B,qCAA1B;AACA,SAASC,aAAT,QAA8B,qBAA9B;AAGA,OAAOC,gBAAP,MAA6B,0CAA7B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,uBAAT,EAAkCC,qBAAlC,QAA+D,mBAA/D,C,CAGA;;AAUA,MAAMC,SAAkC,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC1D,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,KAAhB;AAAuBC,IAAAA,SAAvB;AAAkCC,IAAAA,IAAlC;AAAwCC,IAAAA,QAAQ,GAAG,CAAnD;AAAsDC,IAAAA,gBAAgB,GAAG,CAAzE;AAA4EC,IAAAA,YAA5E;AAA0FC,IAAAA;AAA1F,MAAiGT,OAAvG;AACA,QAAMU,aAAa,GAAGP,KAAK,GAAGK,YAA9B;AACA,QAAMG,aAAa,GAAGL,QAAQ,GAAGC,gBAAjC;AACA,QAAMK,YAAY,GAAGR,SAAS,IAAID,KAAlC;AACA,QAAMU,qBAAqB,GAAGD,YAAY,GAAGN,QAA7C;AACA,QAAMQ,kBAAkB,GAAGJ,aAAa,GAAGH,gBAA3C;AACA,QAAMQ,UAAU,GAAGF,qBAAqB,GAAGC,kBAA3C;AAEA,QAAME,IAAI,GAAGzB,OAAO,EAApB;AACA,SACE,MAAC,KAAD;AAAO,IAAA,GAAG,EAAEkB,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIF,gBAAgB,GAAG,CAAnB,IACA,4BACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAWN,IAAX,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGGM,gBAHH,SAGwB3D,QAHxB,EAGkC8D,aAHlC,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAFJ,EASIJ,QAAQ,GAAG,CAAX,IACA,4BACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAWL,IAAX,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGGK,QAHH,SAGgB1D,QAHhB,EAG0BuD,KAH1B,CAVJ,CAFF,EAmBE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGvD,QADH,EAEImE,UAAD,CAAaE,OAAb,CAAqB,CAArB,CAFH,CAnBF,CADF;AA0BD,CApCD;;AAsCA,MAAMC,mBAA0C,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAA2B;AAAA;;AAE5E,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4B7F,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAAC8F,UAAD;AAAA,OAAaC;AAAb,MAA8B/F,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM;AAAA,OAACgG,WAAD;AAAA,OAAcC;AAAd,MAA0BjG,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAA,OAACkG,UAAD;AAAA,OAAaC;AAAb,MAA8BnG,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM;AAAA,OAACoG,aAAD;AAAA,OAAgBC;AAAhB,MAAoCrG,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM;AAAEsG,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBxG,UAAU,CAAC6D,cAAD,CAAtC;AACA,QAAM;AAAE4C,IAAAA;AAAF,MAAYxC,SAAS,EAA3B;AACA,QAAM;AACJyC,IAAAA,KADI;AAEJC,IAAAA,YAFI;AAGJC,IAAAA,MAHI;AAIJC,IAAAA,WAJI;AAKJC,IAAAA,SALI;AAMJC,IAAAA,cANI;AAOJC,IAAAA,cAPI;AAQJC,IAAAA,iBARI;AASJC,IAAAA,sBATI;AAUJC,IAAAA,YAVI;AAWJC,IAAAA;AAXI,MAYFpD,OAAO,EAZX;AAaA,QAAMwB,IAAI,GAAGzB,OAAO,EAApB;AAEA,MAAIsD,WAAW,GAAE,IAAjB;AACA,MAAIC,QAAQ,GAAG,KAAf;;AACA,MAAIZ,KAAK,CAACa,MAAN,GAAe,CAAnB,EAAsB;AACpBF,IAAAA,WAAW,GAAGX,KAAK,CAACc,GAAN,CAAU,CAACC,IAAD,EAAYC,KAAZ,MACtB;AACAC,MAAAA,UAAU,EAAEF,IAAI,CAACxC,EADjB;AAEAJ,MAAAA,IAAI,EAAE4C,IAAI,CAAC5C,IAFX;AAGAC,MAAAA,QAAQ,EAAE8C,MAAM,CAACH,IAAI,CAAC3C,QAAN,CAAN,IAAyB,CAHnC;AAIAC,MAAAA,gBAAgB,EAAE6C,MAAM,CAACH,IAAI,CAAC1C,gBAAN,CAAN,IAAiC,CAJnD;AAKA8C,MAAAA,UAAU,EAAEJ,IAAI,CAACI,UALjB;AAMA;AACAlD,MAAAA,KAAK,EAAE8C,IAAI,CAAC9C,KAPZ;AAQAmD,MAAAA,KAAK,EAAEL,IAAI,CAAC/C,MAAL,CAAY,CAAZ,CARP;AASAD,MAAAA,IAAI,EAAEgD,IAAI,CAAChD;AATX,KADsB,CAAV,CAAd;AAYD;;AACD,QAAM;AAAA,OAACsD,OAAD;AAAA,OAAUC;AAAV,MAAwB/H,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACgI,OAAD;AAAA,OAAUC;AAAV,MAAwBjI,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACkI,qBAAD;AAAA,OAAwBC;AAAxB,MAAoDnI,QAAQ,CAAC,KAAD,CAAlE;AAEA,QAAM;AAAA,OAACoI,YAAD;AAAA,OAAeC;AAAf,MAAkCrI,QAAQ,CAAC;AAC/CsI,IAAAA,cAAc,EAAE,EAD+B;AAE/CC,IAAAA,iBAAiB,EAAE,EAF4B;AAG/CC,IAAAA,mBAAmB,EAAE,EAH0B;AAI/CC,IAAAA,kBAAkB,EAAE,EAJ2B;AAK/CC,IAAAA,WAAW,EAAE,EALkC;AAM/CC,IAAAA,gBAAgB,EAAE,IAN6B;AAO/CC,IAAAA,QAAQ,EAAE;AAPqC,GAAD,CAAhD;AAUA,QAAM;AACJD,IAAAA,gBADI;AAEJE,IAAAA,OAFI;AAGJC,IAAAA,cAHI;AAIJC,IAAAA,MAJI;AAKJvE,IAAAA,IALI;AAMJwE,IAAAA,KANI;AAOJhE,IAAAA,EAPI;AAQJiE,IAAAA;AARI,MASF3C,KATJ,CAtD4E,CAkE5E;;AACA,QAAM,CAAC4C,yBAAD,IAA8B7H,WAAW,CAACT,kBAAD,CAA/C;AACA,QAAM,CAACuI,qBAAD,IAA0B9H,WAAW,CAACV,cAAD,CAA3C;AACA,QAAM,CAACyI,6BAAD,IAAkC/H,WAAW,CAACP,sBAAD,CAAnD;AACA,QAAM,CAACuI,yBAAD,IAA8BhI,WAAW,CAACR,kBAAD,CAA/C;AACA,QAAM,CAACyI,gBAAD,IAAqBjI,WAAW,CAACN,WAAD,CAAtC;AAEA,QAAM,CAACwI,qBAAD,IAA0BlI,WAAW,CAACH,cAAD,CAA3C;AACA,QAAM,CAACsI,yBAAD,IAA8BnI,WAAW,CAACJ,WAAD,CAA/C;AACA,QAAMwI,IAAI,GAAGxF,aAAa,EAA1B;AACA,QAAM,CAACyF,uBAAD,EAA0BC,0BAA1B,IAAwD7J,KAAK,CAACE,QAAN,CAAe,EAAf,CAA9D;AAEA,QAAM,CAAC4J,aAAD,IAAkBvI,WAAW,CAACL,UAAD,CAAnC;AACA,MAAI6I,cAAc,GAAG,CAArB;AACA,QAAMC,eAAe,GAAGnB,gBAAgB,IAAIA,gBAAgB,CAACoB,IAAjB,CACzCvC,IAAD,IAAUA,IAAI,CAACwC,UAAL,KAAoB,IADY,CAA5C;AAGA,QAAMC,eAAe,GAAElB,MAAM,CAACgB,IAAP,CACpBvC,IAAD,IAAUA,IAAI,CAACwC,UAAL,KAAoB,IADT,CAAvB;AAGEE,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BlB,eAA/B;AACF,QAAMmB,aAAa,4BAAGnB,eAAe,CAACc,IAAhB,CAAqBM,cAAc,IAAI;AAC3D,WAAOjC,YAAY,CAACK,kBAAb,KAAoC4B,cAAc,CAACrF,EAA1D;AACD,GAFqB,CAAH,0DAAG,sBAElBoF,aAFJ;AAIA,QAAME,sBAAsB,GAAGrB,eAAe,CAACc,IAAhB,CAAqBM,cAAc,IAAI;AAAE,WAAOjC,YAAY,CAACK,kBAAb,KAAoC4B,cAAc,CAACrF,EAA1D;AAA+D,GAAxG,CAA/B;;AAEA,QAAMuF,iBAAiB,GAAG,MAAM;AAAA;;AAC9B,UAAMC,qBAAqB,GAAG1B,cAAc,CAACiB,IAAf,CAAoBU,aAAa,IAAI;AACjE,aAAO,CAAArC,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEG,iBAAd,OAAoCkC,aAApC,aAAoCA,aAApC,uBAAoCA,aAAa,CAAEzF,EAAnD,CAAP;AACD,KAF6B,CAA9B;AAIA,UAAM0F,KAAK,GAAG/C,MAAM,CAACV,sBAAsB,EAAvB,CAApB;;AAEA,QAAI,CAAAuD,qBAAqB,SAArB,IAAAA,qBAAqB,WAArB,qCAAAA,qBAAqB,CAAEhG,IAAvB,gFAA6BmG,WAA7B,GAA2CC,QAA3C,CAAoD,SAApD,OAAkEJ,qBAAlE,aAAkEA,qBAAlE,iDAAkEA,qBAAqB,CAAEhG,IAAzF,2DAAkE,uBAA6BmG,WAA7B,GAA2CC,QAA3C,CAAoD,MAApD,CAAlE,CAAJ,EAAmI;AAAA;;AACjI,YAAMC,QAAQ,GAAGL,qBAAH,aAAGA,qBAAH,iDAAGA,qBAAqB,CAAEhG,IAA1B,2DAAG,uBAA6BsG,OAA7B,CAAqC,KAArC,EAA4C,EAA5C,CAAjB;AACA,YAAMC,MAAM,GAAGL,KAAK,IAAIG,QAAQ,GAAG,GAAf,CAApB;AACA,aAAOE,MAAP;AACD;;AACD,WAAO,CAAP;AACD,GAbD;;AAeA,QAAMC,mBAAmB,GAAG,CAAAlB,eAAe,SAAf,IAAAA,eAAe,WAAf,YAAAA,eAAe,CAAEmB,OAAjB,IAA4B,GAAEnB,eAAe,IAAIzF,qBAAqB,CAACyF,eAAe,CAACoB,KAAjB,CAAwB,MAAKpB,eAAe,IAAIzF,qBAAqB,CAACyF,eAAe,CAACmB,OAAjB,CAA0B,KAAInB,eAAe,IAAIA,eAAe,CAACqB,YAAa,EAAzN,GAA6N,IAAzP;AAEAlL,EAAAA,SAAS,CAAC,MAAM;AACdyG,IAAAA,YAAY;AACZb,IAAAA,YAAY,CAAC,KAAD,CAAZ;AAEAgE,IAAAA,cAAc,GAAGzF,uBAAuB,CAACkG,sBAAD,aAACA,sBAAD,uBAACA,sBAAsB,CAAE9F,IAAzB,CAAxC;AACA,UAAM4G,eAAe,GAAGC,oBAAoB,GAAGjB,aAAH,GAAmBkB,sBAAsB,GAAGN,mBAAH,GAAyB,EAA9G;AAEA3C,IAAAA,eAAe,iCACVD,YADU;AAEbO,MAAAA,gBAAgB,EAAEyC,eAFL;AAGbxC,MAAAA,QAAQ,EAAExB,WAHG;AAIbkB,MAAAA,cAAc,EAAE2B,eAAe,CAACsB;AAJnB,OAAf;;AAOA,QACExE,cAAc,KAAK,CAAnB,IACAD,cAAc,GAAG,CADjB,KAEC,CAAAsB,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEK,kBAAd,KAAoC2B,aAFrC,KAGArB,MAAM,CAACzB,MAHP,IAIA2B,eAAe,CAAC3B,MALlB,EAME;AACAW,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;AACF,GAvBQ,EAuBN,CAAC3B,KAAD,CAvBM,CAAT,CA9G4E,CAuI5E;;AACA,QAAMkF,WAAW,GAAG,CAClBC,cADkB,EAElBC,UAAU,GAAG,EAFK,EAGlBC,SAAiB,GAAG,mBAHF,KAIf;AACHvK,IAAAA,SAAS,CAAC;AACRwK,MAAAA,IAAI,EAAE,IADE;AAERC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,GADD;AAENC,QAAAA,MAAM,EAAE,MAFF;AAGNC,QAAAA,cAAc,EAAE,KAHV;AAINC,QAAAA,eAAe,EAAE,IAJX;AAKNN,QAAAA,SAAS,EAAEA;AALL,OAFA;AASRO,MAAAA,mBAAmB,EAAE,IATb;AAURC,MAAAA,SAAS,EAAEV,cAVH;AAWRW,MAAAA,cAAc,EAAE;AAAE5E,QAAAA,IAAI,EAAEkE;AAAR;AAXR,KAAD,CAAT;AAaD,GAlBD;;AAoBA,QAAMW,gBAAgB,GAAG,OAAO7E,IAAP,EAAkBC,KAAlB,EAA8B6E,IAA9B,EAA4C9H,IAA5C,KAA6D;AACpF,QAAI8H,IAAI,KAAK,MAAb,EAAqB;AACnB,YAAMb,cAAc,GAAGjH,IAAI,KAAK,SAAT,GAAqBN,gBAArB,GAAwCxD,aAA/D;AACA8K,MAAAA,WAAW,CAACC,cAAD,EAAgB;AACzBjE,QAAAA,IADyB;AAEzBxC,QAAAA;AAFyB,OAAhB,CAAX;AAID,KAND,MAMO;AACL,cAAQR,IAAR;AACC;;;;;;AAMC,aAAK,SAAL;AACE,cAAGuE,MAAM,CAACzB,MAAP,GAAgB,CAAnB,EAAqB;AACnBf,YAAAA,QAAQ,CAAC;AAAE+F,cAAAA,IAAI,EAAE,gBAAR;AAA0BC,cAAAA,OAAO,EAAE/E,IAAI,CAACxC;AAAxC,aAAD,CAAR;AACA,mBAAO,MAAMqE,yBAAyB,CAAC;AACrCmD,cAAAA,SAAS,EAAE;AACTxH,gBAAAA,EADS;AAETyH,gBAAAA,OAAO,EAAEjF,IAAI,CAACxC;AAFL;AAD0B,aAAD,CAAtC;AAMD,WARD,MAQK;AACH,mBAAO,IAAP;AACD;;AACH,aAAK,SAAL;AACE,cAAG2D,gBAAgB,CAACrB,MAAjB,GAA0B,CAA7B,EAA+B;AAC/Bf,YAAAA,QAAQ,CAAC;AAAE+F,cAAAA,IAAI,EAAE,gBAAR;AAA0BC,cAAAA,OAAO,EAAE/E,IAAI,CAACxC;AAAxC,aAAD,CAAR;AACE,mBAAO,MAAMmE,qBAAqB,CAAC;AACjCqD,cAAAA,SAAS,EAAE;AACTxH,gBAAAA,EADS;AAET0H,gBAAAA,SAAS,EAAElF,IAAI,CAACxC;AAFP;AADsB,aAAD,CAAlC;AAMD,WARD,MAQK;AACH,mBAAO,IAAP;AACD;;AACH;AACE,iBAAO,KAAP;AAhCJ;AAkCD;AACF,GA3CD;;AA6CA,QAAM2H,aAAa,GAAG,OAAOnF,IAAP,EAAkBhD,IAAlB,KAAmC;AACvD,YAAQA,IAAR;AACE,WAAK,SAAL;AACE+B,QAAAA,QAAQ,CAAC;AAAE+F,UAAAA,IAAI,EAAE,qBAAR;AAA+BC,UAAAA,OAAO,EAAE/E,IAAI,CAACxC;AAA7C,SAAD,CAAR;AACA,eAAO,MAAMoE,6BAA6B,CAAC;AACzCoD,UAAAA,SAAS,EAAE;AACTxH,YAAAA,EADS;AAETyH,YAAAA,OAAO,EAAEjF,IAAI,CAACxC;AAFL;AAD8B,SAAD,CAA1C;;AAMF,WAAK,SAAL;AACEuB,QAAAA,QAAQ,CAAC;AAAE+F,UAAAA,IAAI,EAAE,qBAAR;AAA+BC,UAAAA,OAAO,EAAE/E,IAAI,CAACxC;AAA7C,SAAD,CAAR;AACE,eAAO,MAAMkE,yBAAyB,CAAC;AACrCsD,UAAAA,SAAS,EAAE;AACTxH,YAAAA,EADS;AAET0H,YAAAA,SAAS,EAAElF,IAAI,CAACxC;AAFP;AAD0B,SAAD,CAAtC;;AAMJ;AACE,eAAO,KAAP;AAlBJ;AAoBD,GArBD;;AAuBA,QAAM4H,iBAAiB,GAAG,YAAY;AAEpC,QAAG,CAAC9G,UAAJ,EAAe;AACbG,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACA,aAAO,IAAP;AACD;;AAED,UAAM;AAAE4G,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAwB,MAAMlD,aAAa,CAAC;AAChD4C,MAAAA,SAAS,EAAE;AAAEO,QAAAA,IAAI,EAAEjH;AAAR;AADqC,KAAD,CAAjD;;AAIA,QAAG,CAAC+G,IAAI,CAACG,SAAL,CAAerG,MAAhB,IAA0BkG,IAAI,CAACG,SAAL,CAAeC,OAAzC,IAAoD,CAACJ,IAAI,CAACG,SAAL,CAAeC,OAAf,CAAuBC,MAA/E,EAAsF;AACpFjH,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACA,aAAO,IAAP;AACD;;AAED,QAAG6G,MAAH,EAAU;AACR7G,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACA,aAAO,IAAP;AACD;;AAED,QAAI4G,IAAI,CAACG,SAAL,CAAerG,MAAf,IAAyBkG,IAAI,CAACG,SAAL,CAAerG,MAAf,CAAsBwG,UAAnD,EAA+D;AAC7DvG,MAAAA,WAAW,CAACiG,IAAI,CAACG,SAAL,CAAerG,MAAhB,CAAX;AACA0B,MAAAA,eAAe,iCACVD,YADU;AAEbM,QAAAA,WAAW,EAAE5C,UAFA;AAGb8C,QAAAA,QAAQ,EAAExB;AAHG,SAAf;AAMArB,MAAAA,aAAa,CAAC,EAAD,CAAb;AACD,KATD,MASO;AACLE,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACD;AACF,GAjCD;;AAkCA,QAAMmH,cAA0D,GAAIC,CAAD,IAAO;AACxEtH,IAAAA,aAAa,CAACsH,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAb;AACD,GAFD;;AAIA,QAAMC,eAAe,GAAIC,SAAD,IAAe;AACrC,UAAMC,KAAK,GAAGnI,IAAI,CAACoI,aAAL,CAAmB;AAAE3I,MAAAA,EAAE,EAAEyI,SAAN;AAAiBG,MAAAA,cAAc,EAAE;AAAjC,KAAnB,CAAd;AACEvH,IAAAA,gBAAgB,CAACqH,KAAD,CAAhB;AACAG,IAAAA,UAAU,CAAC,MAAMxH,gBAAgB,CAAC,IAAD,CAAvB,EAA+B,IAA/B,CAAV;AACA,WAAO,IAAP;AACH,GALD;;AAQA,QAAMyH,eAAe,GAAG,MAAM;AAC5B;AACA,QAAIC,QAAQ,GAAG5J,MAAM,CAAC,IAAI6J,IAAJ,EAAD,EAAa,WAAb,CAAN,CAAgCC,GAAhC,EAAf;AACA,UAAMC,SAAS,GAAG/J,MAAM,CAAC,IAAI6J,IAAJ,EAAD,EAAa,WAAb,CAAN,CAAgCG,IAAhC,EAAlB;AACA,QAAIC,YAAY,GAAGjK,MAAM,CAAC,IAAI6J,IAAJ,EAAD,CAAzB;AACA,UAAMK,KAAK,GAAG,CAAd;AAAgB,UAAMC,MAAM,GAAG,CAAf;AAAiB,UAAMC,SAAS,GAAG,CAAlB;AAAoB,UAAMC,MAAM,GAAG,CAAf;AAAiB,UAAMC,OAAO,GAAG,CAAhB;AAAkB,UAAMC,MAAM,GAAG,CAAf;AAAiB,UAAMC,OAAO,GAAG,CAAhB;AAEzG,UAAMC,aAAa,GAAG,EAAtB;;AACA,YAAQb,QAAR;AACE,WAAKU,OAAL;AACA,WAAKC,MAAL;AACA,WAAKC,OAAL;AACA,WAAKN,KAAL;AACED,QAAAA,YAAY,CAACS,GAAb,CAAiB,CAAjB,EAAoB,MAApB;AACA;;AACF,WAAKP,MAAL;AACE,YAAIJ,SAAS,IAAIU,aAAjB,EAAgC;AAC5BR,UAAAA,YAAY,CAACS,GAAb,CAAiB,CAAjB,EAAoB,MAApB;AACH;;AACD;;AACF,WAAKN,SAAL;AACI;AACF;;AACF,WAAKC,MAAL;AACE,YAAIN,SAAS,IAAIU,aAAjB,EAAgC;AAC5BR,UAAAA,YAAY,CAACS,GAAb,CAAiB,CAAjB,EAAoB,MAApB;AACH;;AACD;;AACF;AACE;AArBJ;;AAuBA,WAAO1K,MAAM,CAACiK,YAAD,CAAN,CAAqBU,MAArB,CAA4B,aAA5B,CAAP;AACD,GAhCD;;AAkCA,QAAMC,YAAY,GAAG,YAAY;AAAA;;AAC/B,UAAMlF,cAAsB,GAAGzF,uBAAuB,CAACkG,sBAAD,aAACA,sBAAD,uBAACA,sBAAsB,CAAE9F,IAAzB,CAAtD;AACA,UAAMqG,QAAgB,GAAGN,iBAAiB,EAA1C;AACA,UAAMyE,iBAAiB,GAAG;AACxBC,MAAAA,WAAW,EAAEjK,EADW;AAExBkK,MAAAA,SAAS,EAAEvH,MAAM,CAACV,sBAAsB,EAAvB,CAFO;AAGxByD,MAAAA,KAAK,EAAE/C,MAAM,CAACZ,cAAc,CAAC8C,cAAc,GAACgB,QAAhB,CAAf,CAHW;AAIxBsE,MAAAA,eAAe,EAAExH,MAAM,CAACX,iBAAiB,EAAlB;AAJC,KAA1B;AAOA,UAAM;AACJsB,MAAAA,cADI;AAEJC,MAAAA,iBAFI;AAGJC,MAAAA,mBAHI;AAIJC,MAAAA,kBAJI;AAKJE,MAAAA,gBALI;AAMJD,MAAAA,WANI;AAOJE,MAAAA;AAPI,QAQFR,YARJ;AAUA,UAAM;AACJ6G,MAAAA,WADI;AAEJC,MAAAA,SAFI;AAGJxE,MAAAA,KAHI;AAIJyE,MAAAA;AAJI,QAKFH,iBALJ;;AAOA,QAAI1D,sBAAsB,IAAI,CAAC3C,gBAA/B,EAAiD;AAAE6E,MAAAA,eAAe,CAAC,gCAAD,CAAf;AAAkD;AAAS;;AAC9G,QAAI,CAAC/E,kBAAL,EAAyB;AAAE+E,MAAAA,eAAe,CAAC,+BAAD,CAAf;AAAiD;AAAS;;AACrF,QAAI,CAAClF,cAAL,EAAqB;AAAEkF,MAAAA,eAAe,CAAC,8BAAD,CAAf;AAAgD;AAAS;;AAChF,QAAI,CAACjF,iBAAL,EAAwB;AAAEiF,MAAAA,eAAe,CAACpD,aAAa,GAAG,qCAAH,GAA2C,qCAAzD,CAAf;AAA+G;AAAS;;AAElJ,QAAI,CAAC6E,WAAD,IAAgB,CAACrG,QAArB,EAA+B;AAC7BvC,MAAAA,gBAAgB,CAAC,6BAAD,CAAhB;AACA,aAAO,IAAP;AACD;;AACD0B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAMqH,aAAa,GAAG9D,sBAAH,aAAGA,sBAAH,gDAAGA,sBAAsB,CAAE+D,OAAxB,CAAgCC,KAAhC,CAAsC,GAAtC,EAA2C,CAA3C,CAAH,0DAAG,sBAA+CC,IAA/C,EAAtB,CArC+B,CAsC/B;AACA;;AACE,QAAI;AACF,YAAM;AAACzC,QAAAA,MAAM,EAAE0C;AAAT,UAA6B,MAAMlG,gBAAgB,CAAC;AACxDkD,QAAAA,SAAS,EAAE;AACPiD,UAAAA,KAAK,EAAE;AACHR,YAAAA,WADG;AAEH3G,YAAAA,cAFG;AAGHC,YAAAA,iBAHG;AAIHE,YAAAA,kBAJG;AAKH2G,YAAAA,aALG;AAMHzG,YAAAA,gBANG;AAOHuG,YAAAA,SAPG;AAQHxE,YAAAA,KARG;AASHhC,YAAAA,WATG;AAUHyG,YAAAA,eAVG;AAWHvG,YAAAA,QAXG;AAYHJ,YAAAA,mBAZG;AAaHkH,YAAAA,kBAAkB,EAAE,KAbjB;AAcHC,YAAAA,cAAc,EAAEpK,IAAI,CAACqK;AAdlB;AADA;AAD6C,OAAD,CAAzD;;AAqBA,UAAI,CAACJ,gBAAL,EAAuB;AACnB,YAAIxH,OAAJ,EAAa;AACTnB,UAAAA,SAAS;AACTH,UAAAA,YAAY;AACZb,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACE3F,UAAAA,MAAM,CAAC2P,IAAP,CAAY;AACVC,YAAAA,QAAQ,EAAE,iBADA;AAEVC,YAAAA,KAAK,EAAE;AAAEC,cAAAA,MAAM,EAAEhL;AAAV;AAFG,WAAZ;AAIL;;AACD+C,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;;AAED,UAAIuH,gBAAJ,EAAsB;AAAA;;AACpBrJ,QAAAA,aAAa,CAAC,uBAAAqJ,gBAAgB,CAAC,CAAD,CAAhB,0EAAqBvC,OAArB,KAAgC,sBAAjC,CAAb;AACAlF,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KAxCD,CAwCE,OAAO2F,KAAP,EAAc;AACdxD,MAAAA,OAAO,CAACC,GAAR,CAAYuD,KAAZ;;AACA,UAAIuC,OAAO,CAAC,sFAAD,CAAX,EAAqG;AACnG/F,QAAAA,OAAO,CAACC,GAAR,CAAYuD,KAAZ;AACA3F,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAmI,QAAAA,YAAY;AACb;AACF;;AACCnI,IAAAA,UAAU,CAAC,KAAD,CAAV,CAxF2B,CAyF/B;AACD,GA1FD;;AA4FA,QAAMmI,YAAY,GAAG,MAAM;AACzBrJ,IAAAA,SAAS;AACTH,IAAAA,YAAY;AACZb,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACA3F,IAAAA,MAAM,CAAC2P,IAAP,CAAY;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAZ;AACD,GALD;;AAOA,QAAMK,iBAAiB,GAAGlH,eAAe,CAAC1B,GAAhB,CAAoB8C,cAAc,IAAI;AAC9D,WAAOA,cAAc,CAAC+F,QAAf,GAA0B/F,cAAc,CAACrF,EAAzC,GAA8C,IAArD;AACD,GAFyB,CAA1B;AAGA,QAAMqL,iBAAiB,GAAGpH,eAAe,CAAC1B,GAAhB,CAAoB8C,cAAc,IAAI;AAC9D,WAAO,CAACA,cAAc,CAAC+F,QAAhB,GAA2B/F,cAAc,CAACrF,EAA1C,GAA+C,IAAtD;AACD,GAFyB,CAA1B;AAGA,QAAMqG,oBAAoB,GAAG8E,iBAAiB,CAACvF,QAAlB,CAA2BxC,YAAY,CAACK,kBAAxC,CAA7B;AAEA,QAAM6C,sBAAsB,GAAGrC,eAAe,CAACc,IAAhB,CAAqBM,cAAc,IAAI;AACpE,WAAOA,cAAc,CAACrF,EAAf,KAAsBoD,YAAY,CAACK,kBAA1C;AACD,GAF8B,CAA/B;AAGAyB,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BlB,eAA9B;AACA,QAAMqH,oBAAoB,GAAG,CAAC;AAAE9L,IAAAA,IAAI,EAAEe,IAAI,CAACoI,aAAL,CAAmB;AAAE3I,MAAAA,EAAE,EAAE,YAAN;AAAoB4I,MAAAA,cAAc,EAAE;AAApC,KAAnB;AAAR,GAAD,EAAiF;AAAEpJ,IAAAA,IAAI,EAAEe,IAAI,CAACoI,aAAL,CAAmB;AAAE3I,MAAAA,EAAE,EAAE,UAAN;AAAkB4I,MAAAA,cAAc,EAAE;AAAlC,KAAnB;AAAR,GAAjF,CAA7B;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,4BACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,kBADL;AAEE,IAAA,cAAc,EAAC,+BAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,MAAC,oBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF,CADF,EAWI,MAAC,aAAD;AACE,IAAA,KAAK,EAAE3E,eADT;AAEE,IAAA,SAAS,EAAE,CAACzB,IAAD,EAAYC,KAAZ,KACT,MAAC,SAAD;AACE,MAAA,EAAE,EAAED,IAAI,CAACxC,EADX;AAEE,MAAA,GAAG,EAAEwC,IAAI,CAACxC,EAFZ;AAGE,MAAA,KAAK,EAAEwC,IAAI,CAAChD,IAHd;AAIE,MAAA,OAAO,EAAEgD,IAAI,CAAC6H,OAJhB;AAKE,MAAA,IAAI,EAAE7H,IAAI,CAAC4I,QAAL,IAAiB5I,IAAI,CAAC4C,aAAtB,GAAsC5C,IAAI,CAAC4C,aAA3C,GAA2D,IALnE;AAME,MAAA,IAAI,EAAC,UANP;AAOE,MAAA,OAAO,EAAE5C,IAAI,CAAC8E,IAAL,KAAc,SAPzB;AAQE,MAAA,iBAAiB,EAAE,KARrB;AASE,MAAA,OAAO,EAAE,MAAMjE,eAAe,iCACzBD,YADyB;AAE5BK,QAAAA,kBAAkB,EAAEjB,IAAI,CAACxC,EAFG;AAG5B4D,QAAAA,QAAQ,EAAExB;AAHkB,SAThC;AAcE,MAAA,QAAQ,EAAE,MAAK;AACb,eAAOb,QAAQ,CAAC;AACd+F,UAAAA,IAAI,EAAE,sBADQ;AAEdC,UAAAA,OAAO,EAAE/E,IAAI,CAACxC,EAAL,CAAQuL,QAAR;AAFK,SAAD,CAAf;AAIC,OAnBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CADF,CAHF,EA+CI,CAAClF,oBAAD,IACA,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,yBADL;AAEE,IAAA,cAAc,EAAC,kBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAQE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,aAAD;AACE,IAAA,KAAK,EAAE1C,gBADT;AAEI,IAAA,SAAS,EAAE,CAACnB,IAAD,EAAYC,KAAZ,KACT,MAAC,YAAD;AACA,MAAA,EAAE,EAAEA,KADJ;AAEA,MAAA,GAAG,EAAEA,KAFL;AAGA,MAAA,OAAO,EAAED,IAAI,CAACyD,OAHd;AAIA,MAAA,QAAQ,EAAEzD,IAAI,CAACgJ,QAJf;AAKA,MAAA,YAAY,EAAEhJ,IAAI,CAAC2D,YALnB;AAMA,MAAA,KAAK,EAAE3D,IAAI,CAAC0D,KANZ;AAOA,MAAA,IAAI,EAAC,SAPL;AAQA,MAAA,SAAS,EAAE1D,IAAI,CAACwC,UAAL,KAAoB,IAR/B;AASA,MAAA,OAAO,EAAE,MAAM3B,eAAe,iCACzBD,YADyB;AAE5BO,QAAAA,gBAAgB,EAAI,GAAEnB,IAAI,CAAC0D,KAAM;4BAC/B1D,IAAI,CAACyD,OAAQ,KAAIzD,IAAI,CAACgJ,QAAS,KAAIhJ,IAAI,CAAC2D,YAAa;2BAH3B;AAK5BvC,QAAAA,QAAQ,EAAExB;AALkB,SAT9B;AAgBA,MAAA,QAAQ,EAAE,MAAKuF,aAAa,CAACnF,IAAD,EAAO,SAAP,CAhB5B;AAiBA,MAAA,MAAM,EAAE,MAAM6E,gBAAgB,CAAC7E,IAAD,EAAOC,KAAP,EAAc,MAAd,EAAsB,SAAtB,CAjB9B;AAkBA,MAAA,QAAQ,EAAE,MACR4E,gBAAgB,CAAC7E,IAAD,EAAOC,KAAP,EAAc,QAAd,EAAwB,SAAxB,CAnBlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHN;AA0BE,IAAA,kBAAkB,EAChB,MAAC,MAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,OAAO,EAAC,MAFV;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,OAAO,EAAE,MACP+D,WAAW,CAACtH,gBAAD,EACT;AACEsD,QAAAA,IAAI,EAAC,EADP;AAEExC,QAAAA;AAFF,OADS,EAKT,mBALS,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAaE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAbF,EAgBE,MAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,QAArB;AAA8B,MAAA,cAAc,EAAC,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,CA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CARF,CAhDJ,EA6GE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,mBADL;AAEE,IAAA,cAAc,EAAC,4BAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAOE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AACE,IAAA,KAAK,EAAE+D,MADT;AAEE,IAAA,SAAS,EAAE,CAACvB,IAAD,EAAYC,KAAZ,KACT,MAAC,SAAD;AACE,MAAA,EAAE,EAAEA,KADN;AAEE,MAAA,GAAG,EAAEA,KAFP;AAGE,MAAA,KAAK,EAAED,IAAI,CAACwC,UAAL,GAAkBzE,IAAI,CAACoI,aAAL,CAAmB;AAAE3I,QAAAA,EAAE,EAAE,WAAN;AAAmB4I,QAAAA,cAAc,EAAE;AAAnC,OAAnB,CAAlB,GAAuFrI,IAAI,CAACoI,aAAL,CAAmB;AAAE3I,QAAAA,EAAE,EAAE,aAAN;AAAqB4I,QAAAA,cAAc,EAAE;AAArC,OAAnB,CAHhG;AAIE,MAAA,OAAO,EAAEpG,IAAI,CAAC+D,MAJhB;AAKE,MAAA,OAAO,EAAE/D,IAAI,CAACwC,UAAL,KAAoB,IAL/B;AAME,MAAA,QAAQ,EAAE,MAAK2C,aAAa,CAACnF,IAAD,EAAO,SAAP,CAN9B;AAOE,MAAA,OAAO,EAAE,MAAMa,eAAe,iCACzBD,YADyB;AAE5BE,QAAAA,cAAc,EAAEd,IAAI,CAAC+D,MAFO;AAG5B3C,QAAAA,QAAQ,EAAExB;AAHkB,SAPhC;AAYE,MAAA,IAAI,EAAC,SAZP;AAaE,MAAA,MAAM,EAAE,MAAMiF,gBAAgB,CAAC7E,IAAD,EAAOC,KAAP,EAAc,MAAd,EAAsB,SAAtB,CAbhC;AAcE,MAAA,QAAQ,EAAE,MACR4E,gBAAgB,CAAC7E,IAAD,EAAOC,KAAP,EAAc,QAAd,EAAwB,SAAxB,CAfpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ;AAsBE,IAAA,kBAAkB,EAChB,MAAC,MAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,OAAO,EAAC,MAFV;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,OAAO,EAAE,MACP+D,WAAW,CACT9K,aADS,EAET;AACC8G,QAAAA,IAAI,EAAC,EADN;AAECxC,QAAAA;AAFD,OAFS,EAMV,mBANU,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAeE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAfF,EAkBE,MAAC,gBAAD;AACE,MAAA,EAAE,EAAC,eADL;AAEE,MAAA,cAAc,EAAC,aAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,CAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAPF,CA7GF,EAyKE,MAAC,cAAD;AACE,IAAA,SAAS,EAAC,YADZ;AAEE,IAAA,KAAK,EAAE;AAAEyL,MAAAA,aAAa,EAAE;AAAjB,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,mBADL;AAEE,IAAA,cAAc,EAAC,uBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,EAUE,MAAC,YAAD;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,UAAU,EAAE9K,UAFd;AAGE,IAAA,KAAK,EAAEmD,cAHT;AAIE,IAAA,iBAAiB,EAAE,CAACtB,IAAD,EAAY8E,IAAZ,KAA8B,IAJnD;AAKE,IAAA,OAAO,EAAG9E,IAAD,IAAe;AACrBa,MAAAA,eAAe,iCACXD,YADW;AAEbG,QAAAA,iBAAiB,EAAEf,IAAI,CAACxC,EAFX;AAGdwD,QAAAA,mBAAmB,EAAEhB,IAAI,CAAC8E,IAHZ;AAId1D,QAAAA,QAAQ,EAAExB;AAJI,SAAf;AAMD,aAAO,IAAP;AACC,KAbL;AAeE,IAAA,QAAQ,EAAGI,IAAD,IAAc;AACtB,aAAOjB,QAAQ,CAAC;AACd+F,QAAAA,IAAI,EAAE,kBADQ;AAEdC,QAAAA,OAAO,EAAE/E,IAAI,CAACxC,EAAL,CAAQuL,QAAR;AAFK,OAAD,CAAf;AAIC,KApBL;AAsBE,IAAA,gBAAgB,EAAE,MAAM,IAtB1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAoCG5J,MAAM,GACL,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,eAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOA,MAAM,CAACoG,IAAd,CAFF,EAIE,MAAC,YAAD;AACE,IAAA,OAAO,EAAGM,CAAD,IAAO;AACdA,MAAAA,CAAC,CAACqD,cAAF;AACAhK,MAAAA,YAAY;AACZb,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CAJF,CADF,CADK,GAkBL,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACD,SAAD,GACC,MAAC,UAAD;AAAY,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAE8K,IAAD,IAAU,CAACA,IAAZ,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,cAAc,EAAC,sBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,GAQC,4BACE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AACE,IAAA,OAAO,EAAE/D,iBADX;AAEE,IAAA,KAAK,EAAE9G,UAFT;AAGE,IAAA,QAAQ,EAAEsH,cAHZ;AAIE,IAAA,SAAS,EAAC,cAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAUGpH,WAAW,IACV,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,cAAc,EAAEA,WAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXJ,CATJ,CAtDJ,EAsFE,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,wBADL;AAEE,IAAA,cAAc,EAAC,0CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,kBADL;AAEE,IAAA,cAAc,EAAC,uBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CALF,CAtFF,EAsGGI,aAAa,IACJ,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AACI,IAAA,EAAE,EAAC,eADP;AAEI,IAAA,cAAc,EAAEA,aAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAvGZ,EA+GE,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,OAAO,EAAE2I,YAFb;AAGI,IAAA,QAAQ,EAAEjH,OAHd;AAII,IAAA,IAAI,EAAC,KAJT;AAKI,IAAA,OAAO,EAAEA,OALb;AAMI,IAAA,KAAK,EAAE;AAAEgE,MAAAA,KAAK,EAAE;AAAT,KANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAEhE,OAAO,GAAG,sBAAH,GAA4B,iBADzC;AAEE,IAAA,cAAc,EAAC,qBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,SAYO3G,QAZP,EAYiB4F,cAAc,CAAC3C,uBAAuB,CAACkG,sBAAD,aAACA,sBAAD,uBAACA,sBAAsB,CAAE9F,IAAzB,CAAvB,GAAsD+F,iBAAiB,EAAxE,CAZ/B,MADF,CA/GF,EA+HI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEKrE,UAAU,IACP,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,UAAJ,CADJ,CAHR,CA/HJ,CAzKF,CADF,EAoTE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,MAAD;AACE,IAAA,OAAO,EAAEuD,IAAI,CAACqC,KAAL,IAAc,GAAd,GAAoB,IAApB,GAA2B,KADtC;AAEE,IAAA,GAAG,EAAE,GAFP;AAGE,IAAA,MAAM,EAAE,GAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,WADL;AAEE,IAAA,cAAc,EAAC,eAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAQE,MAAC,UAAD;AACE,IAAA,SAAS,MADX;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,UAAU,MAHZ;AAIE,IAAA,aAAa,EAAC,OAJhB;AAKE,IAAA,UAAU,EAAG8E,KAAD,IACV,0BACMA,KADN;AAEE,MAAA,KAAK,kCACAA,KAAK,CAACC,KADN;AAEHC,QAAAA,UAAU,EAAEtK,KAAK,GAAGoK,KAAK,CAACC,KAAN,CAAYE,WAAf,GAA6B,CAF3C;AAGHA,QAAAA,WAAW,EAAEvK,KAAK,GAAG,CAAH,GAAOoK,KAAK,CAACC,KAAN,CAAYE,WAHlC;AAIHC,QAAAA,WAAW,EAAExK,KAAK,GAAG,EAAH,GAAQ,CAJvB;AAKHyK,QAAAA,YAAY,EAAEzK,KAAK,GAAG,CAAH,GAAO;AALvB,QAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAkBE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGM,cAAc,GAAG,CAAjB,GACCL,KAAK,CAACc,GAAN,CAAWC,IAAD,IACR,MAAC,SAAD;AAAW,IAAA,GAAG,EAAG,YAAWA,IAAI,CAACxC,EAAG,EAApC;AAAuC,IAAA,OAAO,EAAEwC,IAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,GAKC,4BACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAKE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,EAAE,EAAC,gBADL;AAEE,IAAA,cAAc,EAAC,mBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,CANJ,CAlBF,CARF,EAgDE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,UAArB;AAAgC,IAAA,cAAc,EAAC,UAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrG,QADH,OACc8F,sBAAsB,EADpC,CAJF,CADF,EAUE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,cAArB;AAAoC,IAAA,cAAc,EAAC,UAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG9F,QADH,OACc6F,iBAAiB,EAD/B,CAJF,CAVF,EAmBGuD,iBAAiB,KAAK,CAAtB,IACC,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,eAArB;AAAqC,IAAA,cAAc,EAAC,aAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpJ,QADH,6BACcoJ,iBAAiB,EAD/B,uDACc,mBAAqB/E,OAArB,CAA6B,CAA7B,CADd,CAJF,CApBJ,EA8BE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,oBAArB;AAA0C,IAAA,cAAc,EAAC,iBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrE,QADH,OACciD,uBAAuB,CAACkG,sBAAD,aAACA,sBAAD,uBAACA,sBAAsB,CAAE9F,IAAzB,CADrC,CAJF,CA9BF,EAuCE,MAAC,WAAD;AAAa,IAAA,KAAK,EAAE;AAAE0M,MAAAA,SAAS,EAAE;AAAb,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,WAArB;AAAiC,IAAA,cAAc,EAAC,OAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAC6D,GAD7D,CADF,EAIE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG/P,QADH,OACc4F,cAAc,CAAC3C,uBAAuB,CAACkG,sBAAD,aAACA,sBAAD,uBAACA,sBAAsB,CAAE9F,IAAzB,CAAvB,GAAsD+F,iBAAiB,EAAxE,CAD5B,CAJF,CAvCF,CAhDF,CALF,CAFF,CApTF,CADF,CADF,CADF;AAqaD,CAr0BD;;AAu0BA,eAAe9E,mBAAf","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { Button } from 'components/button/button';\nimport RadioCard from 'components/radio-card/radio-card';\nimport RadioGroup from 'components/radio-group/radio-group';\nimport RadioGroupTwo from 'components/radio-group/radio-group-two';\nimport RadioGroupThree from 'components/radio-group/radio-group-three';\nimport RadioCardTWO from 'components/radio-card/radio-card-two';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport UpdateContact from 'components/contact-card/contact-card';\nimport { DELETE_ADDRESS, SETPRIMARY_ADDRESS } from 'graphql/mutation/address';\nimport { DELETE_PHONENUMBER, SETPRIMARY_PHONENUMBER } from 'graphql/mutation/phone';\nimport { CREAT_ORDER } from 'graphql/mutation/order';\nimport { GET_COUPON } from 'graphql/query/coupon';\nimport { DELIVERY_METHOD } from 'graphql/query/delivery';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { DELETE_CONTACT } from 'graphql/mutation/contact';\nimport { CC_PAYMENT_OPTION, CURRENCY } from 'utils/constant';\nimport { openModal } from '@redq/reuse-modal';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport CheckoutWrapper, {\n  CheckoutContainer,\n  CheckoutInformation,\n  InformationBox,\n  DeliverySchedule,\n  Heading,\n  ButtonGroup,\n  CheckoutSubmit,\n  HaveCoupon,\n  CouponBoxWrapper,\n  CouponInputBox,\n  HeadingWider,\n  CouponCode,\n  RemoveCoupon,\n  ErrorMsg,\n  TermConditionText,\n  TermConditionLink,\n  CartWrapper,\n  CalculationWrapper,\n  OrderInfo,\n  Title,\n  ItemsWrapper,\n  Items,\n  Quantity,\n  Multiplier,\n  ItemInfo,\n  Price,\n  TextWrapper,\n  Text,\n  Bold,\n  Small,\n  NoProductMsg,\n  NoProductImg,\n  IconWrapper,\n  DeliveryTypesOptions,\n} from './checkout-two.style';\nimport CouponBox from 'components/coupon-box/coupon-box';\n\nimport { Plus } from 'assets/icons/PlusMinus';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\n\nimport Sticky from 'react-stickynode';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { APPLY_COUPON } from 'graphql/mutation/coupon';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { useWindowSize } from 'utils/useWindowSize';\n\n\nimport UpdateAddressTwo from 'components/address-card/address-card-two';\nimport moment from 'moment';\nimport { calculateDeliveryCharge, capitalizeFirstLetter } from 'utils/shop-helper';\n\n\n// The type of props Checkout Form receives\ninterface MyFormProps {\n  token: string;\n  deviceType: any;\n}\n\ntype CartItemProps = {\n  product: any;\n};\n\nconst OrderItem: React.FC<CartItemProps> = ({ product }) => {\n  const { name, images, price, salePrice, unit, quantity = 0, recicledQuantity = 0, packagePrice, id } = product;\n  const recicledPrice = price - packagePrice;\n  const totalQuantity = quantity + recicledQuantity;\n  const displayPrice = salePrice || price;\n  const nonRecicledTotalPrice = displayPrice * quantity;\n  const recicledTotalPrice = recicledPrice * recicledQuantity;\n  const totalPrice = nonRecicledTotalPrice + recicledTotalPrice\n  \n  const intl = useIntl();\n  return (\n    <Items key={id}>\n      {/* <Multiplier>x</Multiplier> */}\n      <ItemInfo>\n        { recicledQuantity > 0 && (\n          <>\n            <Quantity>{name}</Quantity>\n            <br />\n            {recicledQuantity} X {CURRENCY}{recicledPrice}\n            <br />\n          </>\n        )}\n        { quantity > 0 && (\n          <>\n            <Quantity>{name}</Quantity>\n            <br />\n            {quantity} X {CURRENCY}{price}\n          </>\n        )}\n      </ItemInfo>\n      <Price>\n        {CURRENCY}\n        {(totalPrice).toFixed(2)}\n      </Price>\n    </Items>\n  );\n};\n\nconst CheckoutWithSidebar: React.FC<MyFormProps> = ({ token, deviceType }) => {\n\n  const [hasCoupon, setHasCoupon] = useState(false);\n  const [couponCode, setCouponCode] = useState('');\n  const [couponError, setError] = useState('');\n  const [orderError, setOrderError] = useState('');\n  const [checkoutError, setCheckoutError] = useState('');\n  const { state, dispatch } = useContext(ProfileContext);\n  const { isRtl } = useLocale();\n  const {\n    items,\n    removeCoupon,\n    coupon,\n    applyCoupon,\n    clearCart,\n    cartItemsCount,\n    calculatePrice,\n    calculateDiscount,\n    calculateSubTotalPrice,\n    isRestaurant,\n    toggleRestaurant,\n  } = useCart();\n  const intl = useIntl();\n\n  let cartProduct= null;\n  let contains = false;\n  if (items.length > 0) {\n    cartProduct = items.map((item: any, index:any) => (\n      {\n      product_id: item.id,\n      unit: item.unit,\n      quantity: Number(item.quantity) || 0,\n      recicledQuantity: Number(item.recicledQuantity) || 0,\n      sale_price: item.sale_price,\n      // price: (Number(item.quantity || 0) * item.price) + (Number(item.recicledQuantity || 0) * (item.price - (item.packagePrice || 0))),\n      price: item.price,\n      image: item.images[0],\n      name: item.name,\n    }))\n  }\n  const [loading, setLoading] = useState(false);\n  const [isValid, setIsValid] = useState(false);\n  const [pickUpMethodsSelected, setPickUpMethodsSelected] = useState(false);\n  \n  const [submitResult, setSubmitResult] = useState({\n    contact_number: '',\n    payment_option_id: '',\n    payment_option_type: '',\n    delivery_method_id: '',\n    coupon_code: '',\n    delivery_address: null,\n    products: null\n });\n\n  const {    \n    delivery_address, \n    contact, \n    paymentMethods, \n    phones,\n    name,\n    email,\n    id,\n    deliveryMethods\n  } = state;\n\n\n  //set mututions\n  const [setprimaryAddressMutation] = useMutation(SETPRIMARY_ADDRESS);\n  const [deleteAddressMutation] = useMutation(DELETE_ADDRESS);\n  const [setprimaryPhoneNumberMutation] = useMutation(SETPRIMARY_PHONENUMBER);\n  const [deletePhoneNumberMutation] = useMutation(DELETE_PHONENUMBER);\n  const [setOrderMutation] = useMutation(CREAT_ORDER);\n\n  const [deleteContactMutation] = useMutation(DELETE_CONTACT);\n  const [deletePaymentCardMutation] = useMutation(DELETE_CARD);\n  const size = useWindowSize();\n  const [deliveryMethodsSelected, setDeliveryMethodsSelected] = React.useState([]);\n\n  const [appliedCoupon] = useMutation(GET_COUPON);\n  let deliveryCharge = 0;\n  const selectedAddress = delivery_address && delivery_address.find(\n    (item) => item.is_primary === true\n  );\n  const selectedContact= phones.find(\n    (item) => item.is_primary === true\n  );\n    console.log('deliveryMethods,',deliveryMethods)\n  const pickUpAddress = deliveryMethods.find(deliveryMethod => {\n    return submitResult.delivery_method_id === deliveryMethod.id;\n  })?.pickUpAddress;\n\n  const deliveryMethodSelected = deliveryMethods.find(deliveryMethod => { return submitResult.delivery_method_id === deliveryMethod.id; });\n\n  const calculateCCCharge = () => {\n    const paymentOptionSelected = paymentMethods.find(paymentMethod => {\n      return submitResult?.payment_option_id === paymentMethod?.id;\n    });\n\n    const total = Number(calculateSubTotalPrice());\n\n    if (paymentOptionSelected?.name?.toLowerCase().includes('tarjeta') || paymentOptionSelected?.name?.toLowerCase().includes('card')) {\n      const ccCharge = paymentOptionSelected?.name?.replace(/\\D/g, '');\n      const result = total * (ccCharge / 100);\n      return result;\n    }\n    return 0;\n  }\n\n  const selectedAddressText = selectedAddress?.address ? `${selectedAddress && capitalizeFirstLetter(selectedAddress.title)} - ${selectedAddress && capitalizeFirstLetter(selectedAddress.address)}, ${selectedAddress && selectedAddress.instructions}` : null;\n\n  useEffect(() => {\n    removeCoupon();\n    setHasCoupon(false);\n    \n    deliveryCharge = calculateDeliveryCharge(deliveryMethodSelected?.name);\n    const deliveryAddress = pickUpOptionSelected ? pickUpAddress : deliveryOptionSelected ? selectedAddressText : '';\n\n    setSubmitResult({\n      ...submitResult,\n      delivery_address: deliveryAddress,\n      products: cartProduct,\n      contact_number: selectedContact.number\n    })\n\n    if (\n      calculatePrice() > 0 &&\n      cartItemsCount > 0 &&\n      (submitResult?.delivery_method_id || pickUpAddress) &&\n      phones.length &&\n      deliveryMethods.length\n    ) {\n      setIsValid(true);\n    }\n  }, [state]);\n\n  // Add or edit modal\n  const handleModal = (\n    modalComponent: any,\n    modalProps = {},\n    className: string = 'add-address-modal'\n  ) => {\n    openModal({\n      show: true,\n      config: {\n        width: 360,\n        height: 'auto',\n        enableResizing: false,\n        disableDragging: true,\n        className: className,\n      },\n      closeOnClickOutside: true,\n      component: modalComponent,\n      componentProps: { item: modalProps },\n    });\n  };\n\n  const handleEditDelete = async (item: any, index: any, type: string, name: string) => {\n    if (type === 'edit') {\n      const modalComponent = name === 'address' ? UpdateAddressTwo : UpdateContact;\n      handleModal(modalComponent,{\n        item,\n        id\n      });\n    } else {\n      switch (name) {\n       /* case 'payment':\n          dispatch({ type: 'DELETE_CARD', payload: item.id });\n          return await deletePaymentCardMutation({\n            variables: { cardId: JSON.stringify(item.id) },\n          });\n        */\n        case 'contact':\n          if(phones.length > 1){\n            dispatch({ type: 'DELETE_CONTACT', payload: item.id });\n            return await deletePhoneNumberMutation({\n              variables: { \n                id,\n                phoneId: item.id\n              },\n            });\n          }else{\n            return null\n          }\n        case 'address':\n          if(delivery_address.length > 1){\n          dispatch({ type: 'DELETE_ADDRESS', payload: item.id });\n            return await deleteAddressMutation({\n              variables: { \n                id,\n                addressId: item.id\n              },\n            });\n          }else{\n            return null\n          }\n        default:\n          return false;\n      }\n    }\n  };\n\n  const handlePrimary = async (item: any, name: string) => {\n    switch (name) {\n      case 'contact':\n        dispatch({ type: 'SET_PRIMARY_CONTACT', payload: item.id });\n        return await setprimaryPhoneNumberMutation({\n          variables: { \n            id,\n            phoneId: item.id\n          },\n        });\n      case 'address':\n        dispatch({ type: 'SET_PRIMARY_ADDRESS', payload: item.id });\n          return await setprimaryAddressMutation({\n            variables: { \n              id,\n              addressId: item.id\n            },\n          });\n      default:\n        return false;\n    }\n  };\n\n  const handleApplyCoupon = async () => {\n\n    if(!couponCode){\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    const { data, errors }: any = await appliedCoupon({\n      variables: { code: couponCode },\n    });\n\n    if(!data.getCoupon.coupon && data.getCoupon.message && !data.getCoupon.message.status){\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    if(errors){\n      setError('Invalid Coupon');\n      return null;\n    }\n\n    if (data.getCoupon.coupon && data.getCoupon.coupon.percentage) {\n      applyCoupon(data.getCoupon.coupon);\n      setSubmitResult({\n        ...submitResult,\n        coupon_code: couponCode,\n        products: cartProduct\n      });\n\n      setCouponCode('');\n    } else {\n      setError('Invalid Coupon');\n    }\n  };\n  const handleOnUpdate: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    setCouponCode(e.currentTarget.value);\n  };\n\n  const setErrorFor5Sec = (messageId) => {\n    const error = intl.formatMessage({ id: messageId, defaultMessage: 'Please check the form' })\n      setCheckoutError(error);\n      setTimeout(() => setCheckoutError(null), 3500)\n      return null;\n  };\n\n\n  const getDeliveryDate = () => {\n    // moment.locale('es');\n    let orderDay = moment(new Date(), 'MM/D/YYYY').day();\n    const orderHour = moment(new Date(), 'MM/D/YYYY').hour();\n    let deliveryDate = moment(new Date());\n    const lunes = 1;const martes = 2;const miercoles = 3;const jueves = 4;const viernes = 5;const sabado = 6;const domingo = 7;\n\n    const lastOrderTime = 12;\n    switch (orderDay) {\n      case viernes:\n      case sabado:\n      case domingo:\n      case lunes:\n        deliveryDate.add(1, 'days');\n        break;\n      case martes:\n        if (orderHour >= lastOrderTime) {\n            deliveryDate.add(2, 'days');\n        }\n        break;\n      case miercoles:\n          // deliveryDate.add(1, 'days');\n        break;\n      case jueves:\n        if (orderHour >= lastOrderTime) {\n            deliveryDate.add(5, 'days');\n        }\n        break;\n      default:\n        break;\n    }\n    return moment(deliveryDate).format('dddd DD MMM');\n  }\n\n  const handleSubmit = async () => {\n    const deliveryCharge: number = calculateDeliveryCharge(deliveryMethodSelected?.name);\n    const ccCharge: number = calculateCCCharge();\n    const otherSubmitResult = {\n      customer_id: id,\n      sub_total: Number(calculateSubTotalPrice()),\n      total: Number(calculatePrice(deliveryCharge+ccCharge)),\n      discount_amount: Number(calculateDiscount()),\n    }\n\n    const {\n      contact_number,\n      payment_option_id,\n      payment_option_type,\n      delivery_method_id,\n      delivery_address,\n      coupon_code,\n      products\n    } = submitResult;\n\n    const {\n      customer_id,\n      sub_total,\n      total,\n      discount_amount\n    } = otherSubmitResult;\n\n    if (deliveryOptionSelected && !delivery_address) { setErrorFor5Sec('checkoutDeliveryAddressInvalid');return; }\n    if (!delivery_method_id) { setErrorFor5Sec('checkoutDeliveryMethodInvalid');return; }\n    if (!contact_number) { setErrorFor5Sec('checkoutContactNumberInvalid');return; }\n    if (!payment_option_id) { setErrorFor5Sec(pickUpAddress ? 'checkoutPaymentMethodInvalidOption3' : 'checkoutPaymentMethodInvalidOption4');return; }\n\n    if (!customer_id || !products) {\n      setCheckoutError('Please place a valid order!');\n      return null;\n    }\n    setLoading(true);\n    const delivery_date = deliveryOptionSelected?.details.split(\"|\")[1]?.trim();\n    // const deliveryDateAndTime = `${getDeliverySchedule(deliveryOptionSelected?.details)} - ${moment(deliveryDate).format('DD MMM')}`;\n    // if (confirm('Are you sure? You want to place this order?')) {\n      try {\n        const {errors: orderCreateError} = await setOrderMutation({\n          variables: {\n              input: {\n                  customer_id,\n                  contact_number,\n                  payment_option_id,\n                  delivery_method_id,\n                  delivery_date,\n                  delivery_address,\n                  sub_total,\n                  total,\n                  coupon_code,\n                  discount_amount,\n                  products,\n                  payment_option_type,\n                  isWhatsappPurchase: false,\n                  lenguageLocale: intl.locale\n              }\n            }\n        });\n\n        if (!orderCreateError) {\n            if (isValid) {\n                clearCart();\n                removeCoupon();\n                setHasCoupon(false);\n                  Router.push({\n                    pathname: '/order-received',\n                    query: { itemId: id }\n                  })\n            }\n            setLoading(false);\n            setIsValid(false);\n        }\n\n        if (orderCreateError) {\n          setOrderError(orderCreateError[0]?.message || 'Somehting went wrong')\n          setLoading(false);\n        }\n      } catch (error) {\n        console.log(error)\n        if (confirm('Algo salió mal! Te pedimos disculpas y que por favor, comiences de vuelta tu compra.')) {\n          console.log(error)\n          setLoading(false);\n          startAllOver();\n        }\n      }\n        setLoading(false);\n    // }\n  };\n\n  const startAllOver = () => {\n    clearCart();\n    removeCoupon();\n    setHasCoupon(false);\n    Router.push({ pathname: '/' })\n  }\n\n  const pickedUpOptionIds = deliveryMethods.map(deliveryMethod => {\n    return deliveryMethod.isPickUp ? deliveryMethod.id : null;\n  });\n  const deliveryOptionIds = deliveryMethods.map(deliveryMethod => {\n    return !deliveryMethod.isPickUp ? deliveryMethod.id : null;\n  });\n  const pickUpOptionSelected = pickedUpOptionIds.includes(submitResult.delivery_method_id)\n\n  const deliveryOptionSelected = deliveryMethods.find(deliveryMethod => {\n    return deliveryMethod.id === submitResult.delivery_method_id;\n  });\n  console.log('deliveryMethods',deliveryMethods)\n  const deliveryMethodsTypes = [{ name: intl.formatMessage({ id: 'deliveryId', defaultMessage: 'delivery' }) }, { name: intl.formatMessage({ id: 'pickUpId', defaultMessage: 'delivery' }) }]\n  return (\n    <form>\n      <CheckoutWrapper>\n        <CheckoutContainer>\n          <CheckoutInformation>\n\n            {/* DeliverySchedule */}\n            <InformationBox>\n              <DeliverySchedule>\n                <>\n                  <HeadingWider>\n                    <FormattedMessage\n                      id='deliverySchedule'\n                      defaultMessage='Select Your Delivery Schedule'\n                    />\n                    <DeliveryTypesOptions />\n                  </HeadingWider>\n                </>\n\n                  <RadioGroupTwo\n                    items={deliveryMethods}\n                    component={(item: any, index: any) => (\n                      <RadioCard\n                        id={item.id}\n                        key={item.id}\n                        title={item.name}\n                        details={item.details}\n                        link={item.isPickUp && item.pickUpAddress ? item.pickUpAddress : null}\n                        name='schedule'\n                        checked={item.type === 'primary'}\n                        withActionButtons={false}\n                        onClick={() => setSubmitResult({\n                          ...submitResult,\n                          delivery_method_id: item.id, \n                          products: cartProduct\n                        })}\n                        onChange={() =>{\n                          return(dispatch({\n                            type: 'SET_PRIMARY_SCHEDULE',\n                            payload: item.id.toString(),\n                          }))\n                          }\n                        }\n                      />\n                    )}\n                  />\n               \n              </DeliverySchedule>\n            </InformationBox>\n\n            {/* DeliveryAddress */}\n            { !pickUpOptionSelected && (\n              <InformationBox>\n                <Heading>\n                  <FormattedMessage\n                    id='checkoutDeliveryAddress'\n                    defaultMessage='Delivery Address'\n                  />\n                </Heading>\n                \n                <ButtonGroup>\n                  <RadioGroupTwo\n                    items={delivery_address}\n                      component={(item: any, index: any) => (\n                        <RadioCardTWO \n                        id={index}\n                        key={index}\n                        address={item.address}\n                        location={item.location}\n                        instructions={item.instructions}\n                        title={item.title}\n                        name='address'\n                        isChecked={item.is_primary === true}\n                        onClick={() => setSubmitResult({\n                          ...submitResult,\n                          delivery_address:  `${item.title} -\n                          ${item.address}, ${item.location}, ${item.instructions}\n                          `,\n                          products: cartProduct\n                        })}\n                        onChange={() =>handlePrimary(item, 'address')}\n                        onEdit={() => handleEditDelete(item, index, 'edit', 'address')}\n                        onDelete={() =>\n                          handleEditDelete(item, index, 'delete', 'address')\n                        }\n                      />\n                    )}\n                    secondaryComponent={\n                      <Button\n                        className='addButton'\n                        variant='text'\n                        type='button'\n                        onClick={() =>\n                          handleModal(UpdateAddressTwo,\n                            {\n                              item:{},\n                              id\n                            },\n                            'add-address-modal')\n                        }\n                      >\n                        <IconWrapper>\n                          <Plus width='10px' />\n                        </IconWrapper>\n                        <FormattedMessage id='addNew' defaultMessage='Add New' />\n                      </Button>\n                    }\n                  />\n                </ButtonGroup>\n              </InformationBox>\n            )}\n            \n            {/* Contact number */}\n            <InformationBox>\n              <Heading>\n                <FormattedMessage\n                  id='contactNumberText'\n                  defaultMessage='Select Your Contact Number'\n                />\n              </Heading>\n              <ButtonGroup>\n                <RadioGroupThree\n                  items={phones}\n                  component={(item: any, index: any ) => (\n                    <RadioCard\n                      id={index}\n                      key={index}\n                      title={item.is_primary ? intl.formatMessage({ id: 'primaryId', defaultMessage: 'Primary' }) : intl.formatMessage({ id: 'secundaryId', defaultMessage: 'Secondary' })}\n                      details={item.number}\n                      checked={item.is_primary === true}\n                      onChange={() =>handlePrimary(item, 'contact')}\n                      onClick={() => setSubmitResult({\n                        ...submitResult,\n                        contact_number: item.number,\n                        products: cartProduct\n                      })}\n                      name='contact'\n                      onEdit={() => handleEditDelete(item, index, 'edit', 'contact')}\n                      onDelete={() =>\n                        handleEditDelete(item, index, 'delete', 'contact')\n                      }\n                    />\n                  )}\n                  secondaryComponent={\n                    <Button\n                      className='addButton'\n                      variant='text'\n                      type='button'\n                      onClick={() =>\n                        handleModal(\n                          UpdateContact, \n                          {\n                           item:{},\n                           id\n                         }, \n                         'add-contact-modal'\n                         )\n                      }\n                    >\n                      <IconWrapper>\n                        <Plus width='10px' />\n                      </IconWrapper>\n                      <FormattedMessage\n                        id='addContactBtn'\n                        defaultMessage='Add Contact'\n                      />\n                    </Button>\n                  }\n                />\n              </ButtonGroup>\n            </InformationBox>\n            {/* PaymentOption */}\n\n            <InformationBox\n              className='paymentBox'\n              style={{ paddingBottom: 30 }}\n            >\n              <Heading>\n                <FormattedMessage\n                  id='selectPaymentText'\n                  defaultMessage='Select Payment Option'\n                />\n              </Heading>\n              <PaymentGroup\n                name='payment'\n                deviceType={deviceType}\n                items={paymentMethods}\n                onEditDeleteField={(item: any, type: string) =>  null }\n                onClick={(item: any) => {\n                   setSubmitResult({\n                    ...submitResult,\n                     payment_option_id: item.id,\n                    payment_option_type: item.type,\n                    products: cartProduct\n                  })\n                  return null\n                  }\n                }\n                onChange={(item: any) =>{\n                  return(dispatch({\n                    type: 'SET_PRIMARY_CARD',\n                    payload: item.id.toString(),\n                  }))\n                  }\n                }\n                handleAddNewCard={() => null }\n              />\n\n              {/* Coupon start */}\n              {coupon ? (\n                <CouponBoxWrapper>\n                  <CouponCode>\n                    <FormattedMessage id='couponApplied' />\n                    <span>{coupon.code}</span>\n\n                    <RemoveCoupon\n                      onClick={(e) => {\n                        e.preventDefault();\n                        removeCoupon();\n                        setHasCoupon(false);\n                      }}\n                    >\n                      <FormattedMessage id='removeCoupon' />\n                    </RemoveCoupon>\n                  </CouponCode>\n                </CouponBoxWrapper>\n              ) : (\n                <CouponBoxWrapper>\n                  {!hasCoupon ? (\n                    <HaveCoupon onClick={() => setHasCoupon((prev) => !prev)}>\n                      <FormattedMessage\n                        id='specialCode'\n                        defaultMessage='Have a special code?'\n                      />\n                    </HaveCoupon>\n                  ) : (\n                    <>\n                      <CouponInputBox>\n                        <CouponBox\n                          onClick={handleApplyCoupon}\n                          value={couponCode}\n                          onChange={handleOnUpdate}\n                          className='normalCoupon'\n                        />\n                      </CouponInputBox>\n\n                      {couponError && (\n                        <ErrorMsg>\n                          <FormattedMessage\n                            id='couponError'\n                            defaultMessage={couponError}\n                          />\n                        </ErrorMsg>\n                      )}\n                    </>\n                  )}\n                </CouponBoxWrapper>\n              )}\n\n              <TermConditionText>\n                <FormattedMessage\n                  id='termAndConditionHelper'\n                  defaultMessage='By making this purchase you agree to our'\n                />\n                <Link href='#'>\n                  <TermConditionLink>\n                    <FormattedMessage\n                      id='termAndCondition'\n                      defaultMessage='terms and conditions.'\n                    />\n                  </TermConditionLink>\n                </Link>\n              </TermConditionText>\n\n              {/* CheckoutSubmit */}\n              {checkoutError && (\n                        <ErrorMsg>\n                            <FormattedMessage\n                                id='checkoutError'\n                                defaultMessage={checkoutError}\n                            />\n                        </ErrorMsg>\n                    )}\n\n              <CheckoutSubmit>\n                <Button\n                    type='button'\n                    onClick={handleSubmit}\n                    disabled={loading}\n                    size='big'\n                    loading={loading}\n                    style={{ width: '100%' }}\n                >\n                  <FormattedMessage\n                    id={loading ? 'processesingCheckout' : 'processCheckout'}\n                    defaultMessage='Proceed to Checkout'\n                  />\n                   . ({CURRENCY}{calculatePrice(calculateDeliveryCharge(deliveryMethodSelected?.name)+calculateCCCharge())})\n                </Button>\n              </CheckoutSubmit>\n                <div>\n                    \n                    {orderError && (\n                        <ErrorMsg>\n                            <p>{orderError}</p>\n                        </ErrorMsg>\n                    )}\n                </div>\n            </InformationBox>\n          </CheckoutInformation>\n\n          <CartWrapper>\n            {/* <Sticky enabled={true} top={totalHeight} innerZ={999}> */}\n            <Sticky\n              enabled={size.width >= 768 ? true : false}\n              top={120}\n              innerZ={999}\n            >\n              <OrderInfo>\n                <Title>\n                  <FormattedMessage\n                    id='cartTitle'\n                    defaultMessage='Your Orderdfd'\n                  />\n                </Title>\n\n                <Scrollbars\n                  universal\n                  autoHide\n                  autoHeight\n                  autoHeightMax='390px'\n                  renderView={(props) => (\n                    <div\n                      {...props}\n                      style={{\n                        ...props.style,\n                        marginLeft: isRtl ? props.style.marginRight : 0,\n                        marginRight: isRtl ? 0 : props.style.marginRight,\n                        paddingLeft: isRtl ? 15 : 0,\n                        paddingRight: isRtl ? 0 : 15,\n                      }}\n                    />\n                  )}\n                >\n                  <ItemsWrapper>\n                    {cartItemsCount > 0 ? (\n                      items.map((item) => (\n                        <OrderItem key={`cartItem-${item.id}`} product={item} />\n                      ))\n                    ) : (\n                      <>\n                        <NoProductImg>\n                          <NoCartBag />\n                        </NoProductImg>\n\n                        <NoProductMsg>\n                          <FormattedMessage\n                            id='noProductFound'\n                            defaultMessage='No products found'\n                          />\n                        </NoProductMsg>\n                      </>\n                    )}\n                  </ItemsWrapper>\n                </Scrollbars>\n\n                <CalculationWrapper>\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage id='subTotal' defaultMessage='Subtotal' />\n                    </Text>\n                    <Text>\n                      {CURRENCY} {calculateSubTotalPrice()}\n                    </Text>\n                  </TextWrapper>\n\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage id='discountText' defaultMessage='Discount' />\n                    </Text>\n                    <Text>\n                      {CURRENCY} {calculateDiscount()}\n                    </Text>\n                  </TextWrapper>\n\n                  {calculateCCCharge() > 0 && (\n                    <TextWrapper>\n                      <Text>\n                        <FormattedMessage id='ccrChargeText' defaultMessage='Card charge' />\n                      </Text>\n                      <Text>\n                        {CURRENCY} {calculateCCCharge()?.toFixed(2)}\n                      </Text>\n                    </TextWrapper>\n                  )}\n\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage id='deliveryChargeText' defaultMessage='Delivery charge' />\n                    </Text>\n                    <Text>\n                      {CURRENCY} {calculateDeliveryCharge(deliveryMethodSelected?.name)}\n                    </Text>\n                  </TextWrapper>\n\n                  <TextWrapper style={{ marginTop: 20 }}>\n                    <Bold>\n                      <FormattedMessage id='totalText' defaultMessage='Total' />{' '}\n                    </Bold>\n                    <Bold>\n                      {CURRENCY} {calculatePrice(calculateDeliveryCharge(deliveryMethodSelected?.name)+calculateCCCharge())}\n                    </Bold>\n                  </TextWrapper>\n                </CalculationWrapper>\n              </OrderInfo>\n            </Sticky>\n          </CartWrapper>\n        </CheckoutContainer>\n      </CheckoutWrapper>\n    </form>\n  );\n};\n\nexport default CheckoutWithSidebar;\n"]},"metadata":{},"sourceType":"module"}