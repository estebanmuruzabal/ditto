(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{IpII:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a("huF4")}])},fYnN:function(e,t,a){var n,r;!function(o){if(void 0===(r="function"===typeof(n=o)?n.call(t,a,t,e):n)||(e.exports=r),!0,e.exports=o(),!!0){var i=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=i,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(n){function r(){}function o(t,a,o){if("undefined"!==typeof document){"number"===typeof(o=e({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var i=JSON.stringify(a);/^[\{\[]/.test(i)&&(a=i)}catch(l){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var d in o)o[d]&&(s+="; "+d,!0!==o[d]&&(s+="="+o[d].split(";")[0]));return document.cookie=t+"="+a+s}}function i(e,a){if("undefined"!==typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],i=0;i<o.length;i++){var s=o[i].split("="),d=s.slice(1).join("=");a||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var l=t(s[0]);if(d=(n.read||n)(d,l)||t(d),a)try{d=JSON.parse(d)}catch(c){}if(r[l]=d,e===l)break}catch(c){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return i(e,!1)},r.getJSON=function(e){return i(e,!0)},r.remove=function(t,a){o(t,"",e(a,{expires:-1}))},r.defaults={},r.withConverter=a,r}((function(){}))}))},huF4:function(e,t,a){"use strict";a.r(t);var n=a("ERkP"),r=a.n(n),o=a("1U1M"),i=a("VU+f"),s=a("yR3f"),d=a("4HXp"),l=a("VtSi"),c=a.n(l),u=a("QsI/"),p=a("zygG"),m=a("Y0uC"),f=a("7xIC"),g=a.n(f),b=a("IE2q"),h=a("B3Fo"),x=a("p2kv"),w=a("QfjN"),y=a("bQa+"),v=a("b6eG"),C=a("/ql5"),k=a("4Jh2"),O=a("6/p4"),j=a("j/s1"),I=a("tZdC"),_=a("OBVT"),S=a("GkOb"),N=j.e.div.withConfig({displayName:"settingsstyle__SettingsForm",componentId:"sc-9xbk1w-0"})(["width:100%;display:flex;flex-direction:column;"]),F=j.e.div.withConfig({displayName:"settingsstyle__HeadingSection",componentId:"sc-9xbk1w-1"})(["width:100%;display:flex;align-items:center;justify-content:space-between;margin-bottom:25px;"]),E=j.e.h3.withConfig({displayName:"settingsstyle__Title",componentId:"sc-9xbk1w-2"})(["font-family:",";font-size:","px;font-weight:",";color:",";"],Object(I.a)("fonts.heading","sans-serif"),Object(I.a)("fontSizes.lg","21"),Object(I.a)("fontWeights.bold","700"),Object(I.a)("colors.text.bold","#0D1136")),M=j.e.div.withConfig({displayName:"settingsstyle__SettingsFormContent",componentId:"sc-9xbk1w-3"})(["margin-bottom:50px;&:last-child{margin-bottom:0;}"]),P=Object(j.e)(m.b).withConfig({displayName:"settingsstyle__Row",componentId:"sc-9xbk1w-4"})(["margin-bottom:40px;@media only screen and (min-width:0em) and (max-width:47.99em){margin-bottom:30px;}"]),T=j.e.div.withConfig({displayName:"settingsstyle__ButtonGroup",componentId:"sc-9xbk1w-5"})(["display:flex;flex-direction:column;.radioGroup{flex-grow:1;justify-content:space-between;label{margin-top:0;flex:calc(33.333333333% - 10px);max-width:calc(33.333333333% - 10px);margin-bottom:15px;&:nth-child(3n){margin-right:0;}@media (max-width:700px){flex:calc(50% - 10px);max-width:calc(50% - 10px);&:nth-child(3n){margin-right:15px;}&:nth-child(2n){margin-right:0;}}@media (max-width:480px){flex:100%;max-width:100%;margin-right:0;&:nth-child(3n){margin-right:0;}&:nth-child(2n){margin-right:0;}}}}.add-button{flex:calc(33.3333333333% - 10px);max-width:calc(33.3333333333% - 10px);flex-shrink:0;height:auto;min-height:77px;border:1px dashed ",";margin-bottom:15px;margin-left:0;margin-right:auto;&:hover{border-color:",";}@media (max-width:700px){flex:calc(50% - 10px);max-width:calc(50% - 10px);}@media (max-width:480px){flex:100%;max-width:100%;}}"],Object(I.a)("colors.gray.500","#f1f1f1"),Object(I.a)("colors.primary.regular","#009e7f")),D=Object(j.e)("span").withConfig({displayName:"settingsstyle__SuccessMsg",componentId:"sc-9xbk1w-6"})(["font-family:",";font-size:","px;font-weight:",";color:#51b96b;padding-top:10px;display:flex;margin-left:20px;"],Object(I.a)("fonts.body","Lato"),Object(I.a)("fontSizes.xs","12"),Object(I.a)("fontWeights.regular","400")),B=(Object(j.e)("span").withConfig({displayName:"settingsstyle__ErrorMsg",componentId:"sc-9xbk1w-7"})(["font-family:",";font-size:","px;font-weight:",";color:",";padding-top:10px;display:flex;margin-left:20px;"],Object(I.a)("fonts.body","Lato"),Object(I.a)("fontSizes.xs","12"),Object(I.a)("fontWeights.regular","400"),Object(I.a)("colors.secondary.hover","#FF282F")),j.e.input.withConfig({displayName:"settingsstyle__InputUpper",componentId:"sc-9xbk1w-8"})(Object(_.a)({display:"block",width:"100%",textTransform:"capitalize",p:"0 18px",appearance:"none",fontFamily:"body",fontSize:"base",lineHeight:"inherit",border:"1px solid",borderColor:"gray.500",borderRadius:"base",backgroundColor:"white",color:"text.bold",height:"48px",transition:"all 0.25s ease","&:focus":{borderColor:"primary.regular"}}),{"&:hover,&:focus":{outline:0},"&::placeholder":{color:""},"&::-webkit-inner-spin-button,&::-webkit-outer-spin-button":{"-webkit-appearance":"none",margin:0},"&.disabled":{cursor:"not-allowed",opacity:.6}},Object(S.d)(S.f,S.h,S.c,S.b))),A=j.e.input.withConfig({displayName:"settingsstyle__Input",componentId:"sc-9xbk1w-9"})(Object(_.a)({display:"block",width:"100%",p:"0 18px",appearance:"none",fontFamily:"body",fontSize:"base",lineHeight:"inherit",border:"1px solid",borderColor:"gray.500",borderRadius:"base",backgroundColor:"white",color:"text.bold",height:"48px",transition:"all 0.25s ease","&:focus":{borderColor:"primary.regular"}}),{"&:hover,&:focus":{outline:0},"&::placeholder":{color:""},"&::-webkit-inner-spin-button,&::-webkit-outer-spin-button":{"-webkit-appearance":"none",margin:0},"&.disabled":{cursor:"not-allowed",opacity:.6}},Object(S.d)(S.f,S.h,S.c,S.b)),R=a("agtI"),z=a("FTk/"),U=a("GyXf"),G=a("6zwy"),L=a("B68Z"),H=a("C+de"),J=a("yVh0"),Y=a("2SGB"),V=a("IdAm"),Q=r.a.createElement,X=function(e){e.deviceType;var t,a,s,d=Object(n.useContext)(x.a),l=d.state,f=d.dispatch,j=Object(n.useState)(""),I=(j[0],j[1]),_=Object(n.useState)(""),S=_[0],X=_[1],q=r.a.useContext(w.a),W=q.authState,Z=W.isStaff,K=W.isGrower,$=q.authDispatch,ee=Object(o.a)(H.a),te=(Object(p.a)(ee,1)[0],Object(o.a)(k.a)),ae=Object(p.a)(te,1)[0],ne=Object(o.a)(v.a),re=Object(p.a)(ne,1)[0],oe=Object(o.a)(C.a),ie=Object(p.a)(oe,1)[0],se=Object(o.a)(O.b),de=Object(p.a)(se,1)[0],le=Object(o.a)(O.c),ce=Object(p.a)(le,1)[0],ue=Object(o.a)(y.c),pe=Object(p.a)(ue,1)[0],me=Object(o.a)(y.b),fe=Object(p.a)(me,1)[0],ge=Object(J.a)(),be=ge.formatMessage({id:"passwordEmptyFields",defaultMessage:"passwordEmptyFields"}),he=l.delivery_address,xe=(l.card,l.name),we=l.email,ye=l.id,ve=l.phones,Ce=(l.plants,l.role),ke=function(e){var t=e.target,a=t.value,n=t.name;f({type:"HANDLE_ON_INPUT_CHANGE",payload:{value:a,field:n}})},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add-address-modal";Object(i.c)({show:!0,config:{width:360,height:"auto",enableResizing:!1,disableDragging:!0,className:a},closeOnClickOutside:!0,component:e,componentProps:{item:t}})},je=function(){var e=Object(u.a)(c.a.mark((function e(t,a,n,r){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("edit"!==n){e.next=5;break}o="address"===r?U.a:G.a,Oe(o,{item:t,id:ye}),e.next=29;break;case 5:e.t0=r,e.next="payment"===e.t0?8:"contact"===e.t0?12:"address"===e.t0?20:28;break;case 8:return f({type:"DELETE_CARD",payload:t.id}),e.next=11,ae({variables:{cardId:JSON.stringify(t.id)}});case 11:return e.abrupt("return",e.sent);case 12:if(!(ve.length>1)){e.next=19;break}return f({type:"DELETE_CONTACT",payload:t.id}),e.next=16,de({variables:{id:ye,phoneId:t.id}});case 16:return e.abrupt("return",e.sent);case 19:return e.abrupt("return",null);case 20:if(!(he.length>1)){e.next=27;break}return f({type:"DELETE_ADDRESS",payload:t.id}),e.next=24,fe({variables:{id:ye,addressId:t.id}});case 24:return e.abrupt("return",e.sent);case 27:return e.abrupt("return",null);case 28:return e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="contact"===e.t0?3:"address"===e.t0?7:11;break;case 3:return f({type:"SET_PRIMARY_CONTACT",payload:t.id}),e.next=6,ce({variables:{id:ye,phoneId:t.id}});case 6:return e.abrupt("return",e.sent);case 7:return f({type:"SET_PRIMARY_ADDRESS",payload:t.id}),e.next=10,pe({variables:{id:ye,addressId:t.id}});case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_e=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.name,a=l.email,e.next=3,re({variables:{id:ye,name:t,email:a}});case 3:I("Update user info successfully"),setTimeout((function(){I("")}),8e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.oldPassword,a=l.newPassword,n=l.confirmPassword,!(!t||!a||!n)){e.next=7;break}return X(be),e.abrupt("return");case 7:X("");case 8:return e.next=10,ie({variables:{id:ye,old_password:t,new_password:a,confirm_password:n}});case 10:localStorage.removeItem("access_token"),$({type:"SIGN_OUT"}),g.a.push("/"),X("Loadding...");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===(null===(t=l.oldPassword)||void 0===t?void 0:t.length)||0===(null===(a=l.newPassword)||void 0===a?void 0:a.length)||null===(s=l.confirmPassword)||void 0===s||s.length;return Q(N,null,Q(M,null,Q(F,null,Q(E,null,Q(Y.a,{id:"profilePageTitle",defaultMessage:"Your Profile"})),(Z||K)&&Q(E,null,"[",Ce,"]")),Q(P,{style:{alignItems:"flex-end",marginBottom:"50px"}},Q(m.a,{xs:12,sm:5,md:5,lg:5},Q(V.a,null,Q(Y.a,{id:"profileNameField",defaultMessage:"Your Name"})),Q(B,{type:"text",label:"Name",name:"name",value:xe,onChange:ke,backgroundcolor:"#F7F7F7",height:"48px",marginbottom:"10px"})),Q(m.a,{xs:12,sm:5,md:5,lg:5},Q(V.a,null,Q(Y.a,{id:"profileEmailField",defaultMessage:"Your Email"})),Q(A,{type:"email",name:"email",label:"Email Address",value:we,onChange:ke,backgroundColor:"#F7F7F7",marginBottom:"10px"})),Q(m.a,{xs:12,sm:2,md:2,lg:2},Q(L.a,{size:"big",style:{width:"100%",marginBottom:"10px"},onClick:_e},Q(Y.a,{id:"profileSaveBtn",defaultMessage:"Save"})))),Q(P,null,Q(m.a,{xs:12,sm:12,md:12,lg:12},Q(M,null,Q(F,null,Q(E,null,Q(Y.a,{id:"contactNumberTItle",defaultMessage:"Contact Numbers"}))),Q(T,null,Q(z.a,{items:ve,component:function(e,t){return Q(h.a,{id:t,key:t,title:e.is_primary?ge.formatMessage({id:"primaryId",defaultMessage:"Primary"}):ge.formatMessage({id:"secundaryId",defaultMessage:"Secondary"}),content:e.number,checked:!0===e.is_primary,onChange:function(){return Ie(e,"contact")},name:"contact",onEdit:function(){return je(e,t,"edit","contact")},onDelete:function(){return je(e,t,"delete","contact")}})},secondaryComponent:Q(L.a,{size:"big",variant:"outlined",type:"button",className:"add-button",onClick:function(){return Oe(G.a,{item:{},id:ye},"add-contact-modal")}},Q(Y.a,{id:"addContactBtn",defaultMessage:"Add Contact"}))}))))),Q(P,null,Q(m.a,{xs:12,sm:12,md:12,lg:12,style:{position:"relative"}},Q(M,null,Q(F,null,Q(E,null,Q(Y.a,{id:"deliveryAddresTitle",defaultMessage:"Delivery Address"}))),Q(T,null,Q(R.a,{items:he,component:function(e,t){return Q(b.a,{id:t,key:t,address:e.address,instructions:e.instructions,location:e.location,title:e.title,name:"address",isChecked:!0===e.is_primary,onChange:function(){return Ie(e,"address")},onEdit:function(){return je(e,t,"edit","address")},onDelete:function(){return je(e,t,"delete","address")}})},secondaryComponent:Q(L.a,{size:"big",variant:"outlined",type:"button",className:"add-button",onClick:function(){return Oe(U.a,{item:{},id:ye},"add-address-modal")}},Q(Y.a,{id:3===(null===he||void 0===he?void 0:he.length)?"fullDeliveryAddressesMsg":"addAddressBtn",defaultMessage:"Add Address"}))}))))),Q(P,{style:{alignItems:"flex-end",marginBottom:"50px"}},Q(m.a,{xs:12,sm:12,md:12,lg:12},Q(M,null,Q(F,null,Q(E,null,Q(Y.a,{id:"changePasswordTitle",defaultMessage:"Change Password"}))))),Q(m.a,{xs:12,sm:2,md:2,lg:3},Q(A,{type:"password",placeholder:ge.formatMessage({id:"oldPasswordId",defaultMessage:"Old password"}),name:"oldPassword",value:l.oldPassword||"",onChange:ke,backgroundColor:"#F7F7F7",height:"48px",marginBottom:"10px"})),Q(m.a,{xs:12,sm:2,md:2,lg:3},Q(A,{type:"password",label:"New Password",placeholder:ge.formatMessage({id:"newPasswordId",defaultMessage:"New password"}),name:"newPassword",value:l.newPassword||"",onChange:ke,backgroundColor:"#F7F7F7",height:"48px",marginBottom:"10px"})),Q(m.a,{xs:12,sm:2,md:2,lg:3},Q(A,{type:"password",name:"confirmPassword",placeholder:ge.formatMessage({id:"confirmPasswordId",defaultMessage:"Confirm password"}),value:l.confirmPassword||"",onChange:ke,backgroundColor:"#F7F7F7",marginBottom:"10px"})),Q(m.a,{xs:12,sm:2,md:2,lg:3},S===be&&Q(D,null,Q(Y.a,{id:"passwordEmptyFields",defaultMessage:be})),!S&&Q(L.a,{size:"big",style:{width:"100%",marginBottom:"10px"},onClick:Se},Q(Y.a,{id:"profileSaveBtn",defaultMessage:"Save"})),S&&Q(L.a,{size:"big",style:{width:"100%"},onClick:Se},Q(Y.a,{id:"profileSaveBtn",defaultMessage:"Loading.."}))))))},q=a("r0LQ"),W=a("jh0t"),Z=a("H8eV"),K=a("quMH"),$=r.a.createElement;t.default=function(e){var t=e.deviceType,a=Object(o.b)(s.a),n=a.data,l=a.error,c=a.loading;return!n||c?$("div",null,"loading..."):l?$(K.default,{message:l.message}):$(r.a.Fragment,null,$(Z.a,{title:"Profile - Ditto",description:"Profile Details"}),$(d.a,{initData:n.getUser},$(i.a,null,$(q.b,null,$(q.c,null,$(W.a,null)),$(q.a,null,$(X,{deviceType:t}))))))}}},[["IpII",1,0,3,2,4,5,6,7,8,9,16,18,19,27,24]]]);